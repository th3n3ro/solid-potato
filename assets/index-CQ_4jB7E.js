var xS=Object.defineProperty;var bS=(t,e,r)=>e in t?xS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var el=(t,e,r)=>bS(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Il(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Pf={exports:{}},tl={},Rf={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function TS(){if(Zv)return At;Zv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,I={};function A(B,z,te){this.props=B,this.context=z,this.refs=I,this.updater=te||S}A.prototype.isReactComponent={},A.prototype.setState=function(B,z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,z,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function R(){}R.prototype=A.prototype;function O(B,z,te){this.props=B,this.context=z,this.refs=I,this.updater=te||S}var L=O.prototype=new R;L.constructor=O,E(L,A.prototype),L.isPureReactComponent=!0;var X=Array.isArray,N=Object.prototype.hasOwnProperty,Z={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function ie(B,z,te){var he,xe={},Ce=null,Me=null;if(z!=null)for(he in z.ref!==void 0&&(Me=z.ref),z.key!==void 0&&(Ce=""+z.key),z)N.call(z,he)&&!G.hasOwnProperty(he)&&(xe[he]=z[he]);var ke=arguments.length-2;if(ke===1)xe.children=te;else if(1<ke){for(var Ne=Array(ke),Oe=0;Oe<ke;Oe++)Ne[Oe]=arguments[Oe+2];xe.children=Ne}if(B&&B.defaultProps)for(he in ke=B.defaultProps,ke)xe[he]===void 0&&(xe[he]=ke[he]);return{$$typeof:t,type:B,key:Ce,ref:Me,props:xe,_owner:Z.current}}function re(B,z){return{$$typeof:t,type:B.type,key:z,ref:B.ref,props:B.props,_owner:B._owner}}function _e(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function oe(B){var z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return z[te]})}var ee=/\/+/g;function me(B,z){return typeof B=="object"&&B!==null&&B.key!=null?oe(""+B.key):z.toString(36)}function ue(B,z,te,he,xe){var Ce=typeof B;(Ce==="undefined"||Ce==="boolean")&&(B=null);var Me=!1;if(B===null)Me=!0;else switch(Ce){case"string":case"number":Me=!0;break;case"object":switch(B.$$typeof){case t:case e:Me=!0}}if(Me)return Me=B,xe=xe(Me),B=he===""?"."+me(Me,0):he,X(xe)?(te="",B!=null&&(te=B.replace(ee,"$&/")+"/"),ue(xe,z,te,"",function(Oe){return Oe})):xe!=null&&(_e(xe)&&(xe=re(xe,te+(!xe.key||Me&&Me.key===xe.key?"":(""+xe.key).replace(ee,"$&/")+"/")+B)),z.push(xe)),1;if(Me=0,he=he===""?".":he+":",X(B))for(var ke=0;ke<B.length;ke++){Ce=B[ke];var Ne=he+me(Ce,ke);Me+=ue(Ce,z,te,Ne,xe)}else if(Ne=x(B),typeof Ne=="function")for(B=Ne.call(B),ke=0;!(Ce=B.next()).done;)Ce=Ce.value,Ne=he+me(Ce,ke++),Me+=ue(Ce,z,te,Ne,xe);else if(Ce==="object")throw z=String(B),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Me}function Ae(B,z,te){if(B==null)return B;var he=[],xe=0;return ue(B,he,"","",function(Ce){return z.call(te,Ce,xe++)}),he}function H(B){if(B._status===-1){var z=B._result;z=z(),z.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=z)}if(B._status===1)return B._result.default;throw B._result}var j={current:null},F={transition:null},K={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:F,ReactCurrentOwner:Z};function U(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:Ae,forEach:function(B,z,te){Ae(B,function(){z.apply(this,arguments)},te)},count:function(B){var z=0;return Ae(B,function(){z++}),z},toArray:function(B){return Ae(B,function(z){return z})||[]},only:function(B){if(!_e(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},At.Component=A,At.Fragment=r,At.Profiler=s,At.PureComponent=O,At.StrictMode=n,At.Suspense=d,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,At.act=U,At.cloneElement=function(B,z,te){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var he=E({},B.props),xe=B.key,Ce=B.ref,Me=B._owner;if(z!=null){if(z.ref!==void 0&&(Ce=z.ref,Me=Z.current),z.key!==void 0&&(xe=""+z.key),B.type&&B.type.defaultProps)var ke=B.type.defaultProps;for(Ne in z)N.call(z,Ne)&&!G.hasOwnProperty(Ne)&&(he[Ne]=z[Ne]===void 0&&ke!==void 0?ke[Ne]:z[Ne])}var Ne=arguments.length-2;if(Ne===1)he.children=te;else if(1<Ne){ke=Array(Ne);for(var Oe=0;Oe<Ne;Oe++)ke[Oe]=arguments[Oe+2];he.children=ke}return{$$typeof:t,type:B.type,key:xe,ref:Ce,props:he,_owner:Me}},At.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},At.createElement=ie,At.createFactory=function(B){var z=ie.bind(null,B);return z.type=B,z},At.createRef=function(){return{current:null}},At.forwardRef=function(B){return{$$typeof:c,render:B}},At.isValidElement=_e,At.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:H}},At.memo=function(B,z){return{$$typeof:p,type:B,compare:z===void 0?null:z}},At.startTransition=function(B){var z=F.transition;F.transition={};try{B()}finally{F.transition=z}},At.unstable_act=U,At.useCallback=function(B,z){return j.current.useCallback(B,z)},At.useContext=function(B){return j.current.useContext(B)},At.useDebugValue=function(){},At.useDeferredValue=function(B){return j.current.useDeferredValue(B)},At.useEffect=function(B,z){return j.current.useEffect(B,z)},At.useId=function(){return j.current.useId()},At.useImperativeHandle=function(B,z,te){return j.current.useImperativeHandle(B,z,te)},At.useInsertionEffect=function(B,z){return j.current.useInsertionEffect(B,z)},At.useLayoutEffect=function(B,z){return j.current.useLayoutEffect(B,z)},At.useMemo=function(B,z){return j.current.useMemo(B,z)},At.useReducer=function(B,z,te){return j.current.useReducer(B,z,te)},At.useRef=function(B){return j.current.useRef(B)},At.useState=function(B){return j.current.useState(B)},At.useSyncExternalStore=function(B,z,te){return j.current.useSyncExternalStore(B,z,te)},At.useTransition=function(){return j.current.useTransition()},At.version="18.3.1",At}var Qv;function Mg(){return Qv||(Qv=1,Rf.exports=TS()),Rf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function SS(){if(Jv)return tl;Jv=1;var t=Mg(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var m,_={},x=null,S=null;p!==void 0&&(x=""+p),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(S=d.ref);for(m in d)n.call(d,m)&&!a.hasOwnProperty(m)&&(_[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)_[m]===void 0&&(_[m]=d[m]);return{$$typeof:e,type:c,key:x,ref:S,props:_,_owner:s.current}}return tl.Fragment=r,tl.jsx=u,tl.jsxs=u,tl}var e0;function ES(){return e0||(e0=1,Pf.exports=SS()),Pf.exports}var Xn=ES(),zu={},If={exports:{}},mn={},Mf={exports:{}},kf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function CS(){return t0||(t0=1,function(t){function e(F,K){var U=F.length;F.push(K);e:for(;0<U;){var B=U-1>>>1,z=F[B];if(0<s(z,K))F[B]=K,F[U]=z,U=B;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var K=F[0],U=F.pop();if(U!==K){F[0]=U;e:for(var B=0,z=F.length,te=z>>>1;B<te;){var he=2*(B+1)-1,xe=F[he],Ce=he+1,Me=F[Ce];if(0>s(xe,U))Ce<z&&0>s(Me,xe)?(F[B]=Me,F[Ce]=U,B=Ce):(F[B]=xe,F[he]=U,B=he);else if(Ce<z&&0>s(Me,U))F[B]=Me,F[Ce]=U,B=Ce;else break e}}return K}function s(F,K){var U=F.sortIndex-K.sortIndex;return U!==0?U:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var d=[],p=[],m=1,_=null,x=3,S=!1,E=!1,I=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(F){for(var K=r(p);K!==null;){if(K.callback===null)n(p);else if(K.startTime<=F)n(p),K.sortIndex=K.expirationTime,e(d,K);else break;K=r(p)}}function X(F){if(I=!1,L(F),!E)if(r(d)!==null)E=!0,H(N);else{var K=r(p);K!==null&&j(X,K.startTime-F)}}function N(F,K){E=!1,I&&(I=!1,R(ie),ie=-1),S=!0;var U=x;try{for(L(K),_=r(d);_!==null&&(!(_.expirationTime>K)||F&&!oe());){var B=_.callback;if(typeof B=="function"){_.callback=null,x=_.priorityLevel;var z=B(_.expirationTime<=K);K=t.unstable_now(),typeof z=="function"?_.callback=z:_===r(d)&&n(d),L(K)}else n(d);_=r(d)}if(_!==null)var te=!0;else{var he=r(p);he!==null&&j(X,he.startTime-K),te=!1}return te}finally{_=null,x=U,S=!1}}var Z=!1,G=null,ie=-1,re=5,_e=-1;function oe(){return!(t.unstable_now()-_e<re)}function ee(){if(G!==null){var F=t.unstable_now();_e=F;var K=!0;try{K=G(!0,F)}finally{K?me():(Z=!1,G=null)}}else Z=!1}var me;if(typeof O=="function")me=function(){O(ee)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Ae=ue.port2;ue.port1.onmessage=ee,me=function(){Ae.postMessage(null)}}else me=function(){A(ee,0)};function H(F){G=F,Z||(Z=!0,me())}function j(F,K){ie=A(function(){F(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||S||(E=!0,H(N))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(F){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var U=x;x=K;try{return F()}finally{x=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=x;x=F;try{return K()}finally{x=U}},t.unstable_scheduleCallback=function(F,K,U){var B=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=U+z,F={id:m++,callback:K,priorityLevel:F,startTime:U,expirationTime:z,sortIndex:-1},U>B?(F.sortIndex=U,e(p,F),r(d)===null&&F===r(p)&&(I?(R(ie),ie=-1):I=!0,j(X,U-B))):(F.sortIndex=z,e(d,F),E||S||(E=!0,H(N))),F},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(F){var K=x;return function(){var U=x;x=K;try{return F.apply(this,arguments)}finally{x=U}}}}(kf)),kf}var r0;function AS(){return r0||(r0=1,Mf.exports=CS()),Mf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function PS(){if(n0)return mn;n0=1;var t=Mg(),e=AS();function r(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function x(i){return d.call(_,i)?!0:d.call(m,i)?!1:p.test(i)?_[i]=!0:(m[i]=!0,!1)}function S(i,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,l,f){if(o===null||typeof o>"u"||S(i,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function I(i,o,l,f,v,b,M){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=v,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=b,this.removeEmptyString=M}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];A[o]=new I(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function O(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(R,O);A[o]=new I(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(R,O);A[o]=new I(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(R,O);A[o]=new I(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function L(i,o,l,f){var v=A.hasOwnProperty(o)?A[o]:null;(v!==null?v.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,l,v,f)&&(l=null),f||v===null?x(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):v.mustUseProperty?i[v.propertyName]=l===null?v.type===3?!1:"":l:(o=v.attributeName,f=v.attributeNamespace,l===null?i.removeAttribute(o):(v=v.type,l=v===3||v===4&&l===!0?"":""+l,f?i.setAttributeNS(f,o,l):i.setAttribute(o,l))))}var X=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),Z=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),oe=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),F=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var U=Object.assign,B;function z(i){if(B===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var te=!1;function he(i,o){if(!i||te)return"";te=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(we){var f=we}Reflect.construct(i,[],o)}else{try{o.call()}catch(we){f=we}i.call(o.prototype)}else{try{throw Error()}catch(we){f=we}i()}}catch(we){if(we&&f&&typeof we.stack=="string"){for(var v=we.stack.split(`
`),b=f.stack.split(`
`),M=v.length-1,Y=b.length-1;1<=M&&0<=Y&&v[M]!==b[Y];)Y--;for(;1<=M&&0<=Y;M--,Y--)if(v[M]!==b[Y]){if(M!==1||Y!==1)do if(M--,Y--,0>Y||v[M]!==b[Y]){var J=`
`+v[M].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=M&&0<=Y);break}}}finally{te=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?z(i):""}function xe(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=he(i.type,!1),i;case 11:return i=he(i.type.render,!1),i;case 1:return i=he(i.type,!0),i;default:return""}}function Ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case Z:return"Portal";case re:return"Profiler";case ie:return"StrictMode";case me:return"Suspense";case ue:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case oe:return(i.displayName||"Context")+".Consumer";case _e:return(i._context.displayName||"Context")+".Provider";case ee:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ae:return o=i.displayName||null,o!==null?o:Ce(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return Ce(i(o))}catch{}}return null}function Me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ne(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Oe(i){var o=Ne(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,b=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(M){f=""+M,b.call(this,M)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(M){f=""+M},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ot(i){i._valueTracker||(i._valueTracker=Oe(i))}function ft(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return i&&(f=Ne(i)?i.checked?"true":"false":i.value),i=f,i!==l?(o.setValue(i),!0):!1}function St(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Dt(i,o){var l=o.checked;return U({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function je(i,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=ke(o.value!=null?o.value:l),i._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function tt(i,o){o=o.checked,o!=null&&L(i,"checked",o,!1)}function at(i,o){tt(i,o);var l=ke(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Cr(i,o.type,l):o.hasOwnProperty("defaultValue")&&Cr(i,o.type,ke(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function tr(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Cr(i,o,l){(o!=="number"||St(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var vn=Array.isArray;function vr(i,o,l,f){if(i=i.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<i.length;l++)v=o.hasOwnProperty("$"+i[l].value),i[l].selected!==v&&(i[l].selected=v),v&&f&&(i[l].defaultSelected=!0)}else{for(l=""+ke(l),o=null,v=0;v<i.length;v++){if(i[v].value===l){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function ur(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return U({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function $t(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(r(92));if(vn(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:ke(l)}}function on(i,o){var l=ke(o.value),f=ke(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),f!=null&&(i.defaultValue=""+f)}function Bn(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function On(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dr(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?On(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var sr,Ln=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,v){MSApp.execUnsafeLocalFunction(function(){return i(o,l,f,v)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(sr=sr||document.createElement("div"),sr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=sr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Mt(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Et=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(i){Et.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Hr[o]=Hr[i]})});function kr(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Hr.hasOwnProperty(i)&&Hr[i]?(""+o).trim():o+"px"}function Xt(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,v=kr(l,o[l],f);l==="float"&&(l="cssFloat"),f?i.setProperty(l,v):i[l]=v}}var fe=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(i,o){if(o){if(fe[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function Ct(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kt=null;function Bt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mt=null,hr=null,Ar=null;function or(i){if(i=Ua(i)){if(typeof mt!="function")throw Error(r(280));var o=i.stateNode;o&&(o=iu(o),mt(i.stateNode,i.type,o))}}function Fr(i){hr?Ar?Ar.push(i):Ar=[i]:hr=i}function is(){if(hr){var i=hr,o=Ar;if(Ar=hr=null,or(i),o)for(i=0;i<o.length;i++)or(o[i])}}function an(i,o){return i(o)}function pr(){}var Qr=!1;function ss(i,o,l){if(Qr)return i(o,l);Qr=!0;try{return an(i,o,l)}finally{Qr=!1,(hr!==null||Ar!==null)&&(pr(),is())}}function Nn(i,o){var l=i.stateNode;if(l===null)return null;var f=iu(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var _n=!1;if(c)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){_n=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{_n=!1}function os(i,o,l,f,v,b,M,Y,J){var we=Array.prototype.slice.call(arguments,3);try{o.apply(l,we)}catch(Be){this.onError(Be)}}var bn=!1,vi=null,Oi=!1,as=null,jr={onError:function(i){bn=!0,vi=i}};function Bs(i,o,l,f,v,b,M,Y,J){bn=!1,vi=null,os.apply(jr,arguments)}function Os(i,o,l,f,v,b,M,Y,J){if(Bs.apply(this,arguments),bn){if(bn){var we=vi;bn=!1,vi=null}else throw Error(r(198));Oi||(Oi=!0,as=we)}}function Vt(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Ls(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Li(i){if(Vt(i)!==i)throw Error(r(188))}function ln(i){var o=i.alternate;if(!o){if(o=Vt(i),o===null)throw Error(r(188));return o!==i?null:i}for(var l=i,f=o;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return Li(v),i;if(b===f)return Li(v),o;b=b.sibling}throw Error(r(188))}if(l.return!==f.return)l=v,f=b;else{for(var M=!1,Y=v.child;Y;){if(Y===l){M=!0,l=v,f=b;break}if(Y===f){M=!0,f=v,l=b;break}Y=Y.sibling}if(!M){for(Y=b.child;Y;){if(Y===l){M=!0,l=b,f=v;break}if(Y===f){M=!0,f=b,l=v;break}Y=Y.sibling}if(!M)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:o}function Un(i){return i=ln(i),i!==null?Ni(i):null}function Ni(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ni(i);if(o!==null)return o;i=i.sibling}return null}var ls=e.unstable_scheduleCallback,Jr=e.unstable_cancelCallback,va=e.unstable_shouldYield,un=e.unstable_requestPaint,It=e.unstable_now,Jh=e.unstable_getCurrentPriorityLevel,Ui=e.unstable_ImmediatePriority,To=e.unstable_UserBlockingPriority,So=e.unstable_NormalPriority,ec=e.unstable_LowPriority,wn=e.unstable_IdlePriority,Dr=null,Tn=null;function tc(i){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Dr,i,void 0,(i.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:ic,rc=Math.log,nc=Math.LN2;function ic(i){return i>>>=0,i===0?32:31-(rc(i)/nc|0)|0}var Eo=64,Co=4194304;function _i(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Gi(i,o){var l=i.pendingLanes;if(l===0)return 0;var f=0,v=i.suspendedLanes,b=i.pingedLanes,M=l&268435455;if(M!==0){var Y=M&~v;Y!==0?f=_i(Y):(b&=M,b!==0&&(f=_i(b)))}else M=l&~v,M!==0?f=_i(M):b!==0&&(f=_i(b));if(f===0)return 0;if(o!==0&&o!==f&&!(o&v)&&(v=f&-f,b=o&-o,v>=b||v===16&&(b&4194240)!==0))return o;if(f&4&&(f|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)l=31-Sn(o),v=1<<l,f|=i[l],o&=~v;return f}function Hl(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sc(i,o){for(var l=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes;0<b;){var M=31-Sn(b),Y=1<<M,J=v[M];J===-1?(!(Y&l)||Y&f)&&(v[M]=Hl(Y,o)):J<=o&&(i.expiredLanes|=Y),b&=~Y}}function _a(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function xa(){var i=Eo;return Eo<<=1,!(Eo&4194240)&&(Eo=64),i}function ba(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function us(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Sn(o),i[o]=l}function jl(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<l;){var v=31-Sn(l),b=1<<v;o[v]=0,f[v]=-1,i[v]=-1,l&=~b}}function Ns(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var f=31-Sn(l),v=1<<f;v&o|i[f]&o&&(i[f]|=o),l&=~v}}var Ot=0;function Ao(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var zl,hs,wa,Ta,$l,Sa=!1,Us=[],En=null,xi=null,Cn=null,en=new Map,cs=new Map,qt=[],_r="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mr(i,o){switch(i){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":en.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(o.pointerId)}}function Gs(i,o,l,f,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},o!==null&&(o=Ua(o),o!==null&&hs(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function oc(i,o,l,f,v){switch(o){case"focusin":return En=Gs(En,i,o,l,f,v),!0;case"dragenter":return xi=Gs(xi,i,o,l,f,v),!0;case"mouseover":return Cn=Gs(Cn,i,o,l,f,v),!0;case"pointerover":var b=v.pointerId;return en.set(b,Gs(en.get(b)||null,i,o,l,f,v)),!0;case"gotpointercapture":return b=v.pointerId,cs.set(b,Gs(cs.get(b)||null,i,o,l,f,v)),!0}return!1}function Vl(i){var o=Xs(i.target);if(o!==null){var l=Vt(o);if(l!==null){if(o=l.tag,o===13){if(o=Ls(l),o!==null){i.blockedOn=o,$l(i.priority,function(){wa(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Po(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Ca(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);kt=f,l.target.dispatchEvent(f),kt=null}else return o=Ua(l),o!==null&&hs(o),i.blockedOn=l,!1;o.shift()}return!0}function Wl(i,o,l){Po(i)&&l.delete(o)}function ac(){Sa=!1,En!==null&&Po(En)&&(En=null),xi!==null&&Po(xi)&&(xi=null),Cn!==null&&Po(Cn)&&(Cn=null),en.forEach(Wl),cs.forEach(Wl)}function Hs(i,o){i.blockedOn===o&&(i.blockedOn=null,Sa||(Sa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ac)))}function js(i){function o(v){return Hs(v,i)}if(0<Us.length){Hs(Us[0],i);for(var l=1;l<Us.length;l++){var f=Us[l];f.blockedOn===i&&(f.blockedOn=null)}}for(En!==null&&Hs(En,i),xi!==null&&Hs(xi,i),Cn!==null&&Hs(Cn,i),en.forEach(o),cs.forEach(o),l=0;l<qt.length;l++)f=qt[l],f.blockedOn===i&&(f.blockedOn=null);for(;0<qt.length&&(l=qt[0],l.blockedOn===null);)Vl(l),l.blockedOn===null&&qt.shift()}var fs=X.ReactCurrentBatchConfig,Ro=!0;function lc(i,o,l,f){var v=Ot,b=fs.transition;fs.transition=null;try{Ot=1,Ea(i,o,l,f)}finally{Ot=v,fs.transition=b}}function uc(i,o,l,f){var v=Ot,b=fs.transition;fs.transition=null;try{Ot=4,Ea(i,o,l,f)}finally{Ot=v,fs.transition=b}}function Ea(i,o,l,f){if(Ro){var v=Ca(i,o,l,f);if(v===null)yc(i,o,f,Io,l),mr(i,f);else if(oc(v,i,o,l,f))f.stopPropagation();else if(mr(i,f),o&4&&-1<_r.indexOf(i)){for(;v!==null;){var b=Ua(v);if(b!==null&&zl(b),b=Ca(i,o,l,f),b===null&&yc(i,o,f,Io,l),b===v)break;v=b}v!==null&&f.stopPropagation()}else yc(i,o,f,null,l)}}var Io=null;function Ca(i,o,l,f){if(Io=null,i=Bt(f),i=Xs(i),i!==null)if(o=Vt(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Ls(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Io=i,null}function Xl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jh()){case Ui:return 1;case To:return 4;case So:case ec:return 16;case wn:return 536870912;default:return 16}default:return 16}}var An=null,Mo=null,h=null;function w(){if(h)return h;var i,o=Mo,l=o.length,f,v="value"in An?An.value:An.textContent,b=v.length;for(i=0;i<l&&o[i]===v[i];i++);var M=l-i;for(f=1;f<=M&&o[l-f]===v[b-f];f++);return h=v.slice(i,1<f?1-f:void 0)}function C(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function D(){return!0}function q(){return!1}function Q(i){function o(l,f,v,b,M){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var Y in i)i.hasOwnProperty(Y)&&(l=i[Y],this[Y]=l?l(b):b[Y]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?D:q,this.isPropagationStopped=q,this}return U(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=D)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=D)},persist:function(){},isPersistent:D}),o}var be={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ye=Q(be),ve=U({},be,{view:0,detail:0}),ae=Q(ve),Ve,He,ct,le=U({},ve,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ct&&(ct&&i.type==="mousemove"?(Ve=i.screenX-ct.screenX,He=i.screenY-ct.screenY):He=Ve=0,ct=i),Ve)},movementY:function(i){return"movementY"in i?i.movementY:He}}),Je=Q(le),xt=U({},le,{dataTransfer:0}),gt=Q(xt),zr=U({},ve,{relatedTarget:0}),cr=Q(zr),zs=U({},be,{animationName:0,elapsedTime:0,pseudoElement:0}),$s=Q(zs),Kn=U({},be,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Aa=Q(Kn),ds=U({},be,{data:0}),ko=Q(ds),Gn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ht(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Br[i])?!!o[i]:!1}function Fo(){return Ht}var Zn=U({},ve,{key:function(i){if(i.key){var o=Gn[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=C(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pa[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fo,charCode:function(i){return i.type==="keypress"?C(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?C(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ra=Q(Zn),ps=U({},le,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ia=Q(ps),Ma=U({},ve,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fo}),Do=Q(Ma),Vs=U({},be,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=Q(Vs),ka=U({},le,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Yl=Q(ka),Kl=[9,13,27,32],Fa=c&&"CompositionEvent"in window,vt=null;c&&"documentMode"in document&&(vt=document.documentMode);var Ws=c&&"TextEvent"in window&&!vt,Zl=c&&(!Fa||vt&&8<vt&&11>=vt),y=" ",g=!1;function T(i,o){switch(i){case"keyup":return Kl.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var V=!1;function se(i,o){switch(i){case"compositionend":return k(o);case"keypress":return o.which!==32?null:(g=!0,y);case"textInput":return i=o.data,i===y&&g?null:i;default:return null}}function Te(i,o){if(V)return i==="compositionend"||!Fa&&T(i,o)?(i=w(),h=Mo=An=null,V=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Zl&&o.locale!=="ko"?null:o.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nt(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Ue[i.type]:o==="textarea"}function et(i,o,l,f){Fr(f),o=tu(o,"onChange"),0<o.length&&(l=new ye("onChange","change",null,l,f),i.push({event:l,listeners:o}))}var bt=null,_t=null;function W(i){dy(i,0)}function Ee(i){var o=Uo(i);if(ft(o))return i}function wt(i,o){if(i==="change")return o}var Ut=!1;if(c){var rr;if(c){var $r="oninput"in document;if(!$r){var tn=document.createElement("div");tn.setAttribute("oninput","return;"),$r=typeof tn.oninput=="function"}rr=$r}else rr=!1;Ut=rr&&(!document.documentMode||9<document.documentMode)}function xr(){bt&&(bt.detachEvent("onpropertychange",Ie),_t=bt=null)}function Ie(i){if(i.propertyName==="value"&&Ee(_t)){var o=[];et(o,_t,i,Bt(i)),ss(W,o)}}function P(i,o,l){i==="focusin"?(xr(),bt=o,_t=l,bt.attachEvent("onpropertychange",Ie)):i==="focusout"&&xr()}function $(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ee(_t)}function de(i,o){if(i==="click")return Ee(o)}function Se(i,o){if(i==="input"||i==="change")return Ee(o)}function Pe(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Re=typeof Object.is=="function"?Object.is:Pe;function Ye(i,o){if(Re(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!d.call(o,v)||!Re(i[v],o[v]))return!1}return!0}function jt(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function zt(i,o){var l=jt(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=o&&f>=o)return{node:l,offset:o-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=jt(l)}}function Pn(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Pn(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ms(){for(var i=window,o=St();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=St(i.document)}return o}function hc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function AT(i){var o=ms(),l=i.focusedElem,f=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&Pn(l.ownerDocument.documentElement,l)){if(f!==null&&hc(l)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=l.textContent.length,b=Math.min(f.start,v);f=f.end===void 0?b:Math.min(f.end,v),!i.extend&&b>f&&(v=f,f=b,b=v),v=zt(l,b);var M=zt(l,f);v&&M&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==M.node||i.focusOffset!==M.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),b>f?(i.addRange(o),i.extend(M.node,M.offset)):(o.setEnd(M.node,M.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var PT=c&&"documentMode"in document&&11>=document.documentMode,Bo=null,cc=null,Da=null,fc=!1;function iy(i,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fc||Bo==null||Bo!==St(f)||(f=Bo,"selectionStart"in f&&hc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Da&&Ye(Da,f)||(Da=f,f=tu(cc,"onSelect"),0<f.length&&(o=new ye("onSelect","select",null,o,l),i.push({event:o,listeners:f}),o.target=Bo)))}function Ql(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Oo={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},dc={},sy={};c&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Jl(i){if(dc[i])return dc[i];if(!Oo[i])return i;var o=Oo[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in sy)return dc[i]=o[l];return i}var oy=Jl("animationend"),ay=Jl("animationiteration"),ly=Jl("animationstart"),uy=Jl("transitionend"),hy=new Map,cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(i,o){hy.set(i,o),a(o,[i])}for(var pc=0;pc<cy.length;pc++){var mc=cy[pc],RT=mc.toLowerCase(),IT=mc[0].toUpperCase()+mc.slice(1);gs(RT,"on"+IT)}gs(oy,"onAnimationEnd"),gs(ay,"onAnimationIteration"),gs(ly,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(uy,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function fy(i,o,l){var f=i.type||"unknown-event";i.currentTarget=l,Os(f,o,void 0,i),i.currentTarget=null}function dy(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],v=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var M=f.length-1;0<=M;M--){var Y=f[M],J=Y.instance,we=Y.currentTarget;if(Y=Y.listener,J!==b&&v.isPropagationStopped())break e;fy(v,Y,we),b=J}else for(M=0;M<f.length;M++){if(Y=f[M],J=Y.instance,we=Y.currentTarget,Y=Y.listener,J!==b&&v.isPropagationStopped())break e;fy(v,Y,we),b=J}}}if(Oi)throw i=as,Oi=!1,as=null,i}function Kt(i,o){var l=o[Tc];l===void 0&&(l=o[Tc]=new Set);var f=i+"__bubble";l.has(f)||(py(o,i,2,!1),l.add(f))}function gc(i,o,l){var f=0;o&&(f|=4),py(l,i,f,o)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Oa(i){if(!i[eu]){i[eu]=!0,n.forEach(function(l){l!=="selectionchange"&&(MT.has(l)||gc(l,!1,i),gc(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[eu]||(o[eu]=!0,gc("selectionchange",!1,o))}}function py(i,o,l,f){switch(Xl(o)){case 1:var v=lc;break;case 4:v=uc;break;default:v=Ea}l=v.bind(null,o,l,i),v=void 0,!_n||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(o,l,{capture:!0,passive:v}):i.addEventListener(o,l,!0):v!==void 0?i.addEventListener(o,l,{passive:v}):i.addEventListener(o,l,!1)}function yc(i,o,l,f,v){var b=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var M=f.tag;if(M===3||M===4){var Y=f.stateNode.containerInfo;if(Y===v||Y.nodeType===8&&Y.parentNode===v)break;if(M===4)for(M=f.return;M!==null;){var J=M.tag;if((J===3||J===4)&&(J=M.stateNode.containerInfo,J===v||J.nodeType===8&&J.parentNode===v))return;M=M.return}for(;Y!==null;){if(M=Xs(Y),M===null)return;if(J=M.tag,J===5||J===6){f=b=M;continue e}Y=Y.parentNode}}f=f.return}ss(function(){var we=b,Be=Bt(l),Le=[];e:{var De=hy.get(i);if(De!==void 0){var Xe=ye,Qe=i;switch(i){case"keypress":if(C(l)===0)break e;case"keydown":case"keyup":Xe=Ra;break;case"focusin":Qe="focus",Xe=cr;break;case"focusout":Qe="blur",Xe=cr;break;case"beforeblur":case"afterblur":Xe=cr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=gt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Do;break;case oy:case ay:case ly:Xe=$s;break;case uy:Xe=ql;break;case"scroll":Xe=ae;break;case"wheel":Xe=Yl;break;case"copy":case"cut":case"paste":Xe=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=Ia}var rt=(o&4)!==0,fr=!rt&&i==="scroll",ce=rt?De!==null?De+"Capture":null:De;rt=[];for(var ne=we,pe;ne!==null;){pe=ne;var Ge=pe.stateNode;if(pe.tag===5&&Ge!==null&&(pe=Ge,ce!==null&&(Ge=Nn(ne,ce),Ge!=null&&rt.push(La(ne,Ge,pe)))),fr)break;ne=ne.return}0<rt.length&&(De=new Xe(De,Qe,null,l,Be),Le.push({event:De,listeners:rt}))}}if(!(o&7)){e:{if(De=i==="mouseover"||i==="pointerover",Xe=i==="mouseout"||i==="pointerout",De&&l!==kt&&(Qe=l.relatedTarget||l.fromElement)&&(Xs(Qe)||Qe[Hi]))break e;if((Xe||De)&&(De=Be.window===Be?Be:(De=Be.ownerDocument)?De.defaultView||De.parentWindow:window,Xe?(Qe=l.relatedTarget||l.toElement,Xe=we,Qe=Qe?Xs(Qe):null,Qe!==null&&(fr=Vt(Qe),Qe!==fr||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(Xe=null,Qe=we),Xe!==Qe)){if(rt=Je,Ge="onMouseLeave",ce="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(rt=Ia,Ge="onPointerLeave",ce="onPointerEnter",ne="pointer"),fr=Xe==null?De:Uo(Xe),pe=Qe==null?De:Uo(Qe),De=new rt(Ge,ne+"leave",Xe,l,Be),De.target=fr,De.relatedTarget=pe,Ge=null,Xs(Be)===we&&(rt=new rt(ce,ne+"enter",Qe,l,Be),rt.target=pe,rt.relatedTarget=fr,Ge=rt),fr=Ge,Xe&&Qe)t:{for(rt=Xe,ce=Qe,ne=0,pe=rt;pe;pe=Lo(pe))ne++;for(pe=0,Ge=ce;Ge;Ge=Lo(Ge))pe++;for(;0<ne-pe;)rt=Lo(rt),ne--;for(;0<pe-ne;)ce=Lo(ce),pe--;for(;ne--;){if(rt===ce||ce!==null&&rt===ce.alternate)break t;rt=Lo(rt),ce=Lo(ce)}rt=null}else rt=null;Xe!==null&&my(Le,De,Xe,rt,!1),Qe!==null&&fr!==null&&my(Le,fr,Qe,rt,!0)}}e:{if(De=we?Uo(we):window,Xe=De.nodeName&&De.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&De.type==="file")var it=wt;else if(nt(De))if(Ut)it=Se;else{it=$;var lt=P}else(Xe=De.nodeName)&&Xe.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(it=de);if(it&&(it=it(i,we))){et(Le,it,l,Be);break e}lt&&lt(i,De,we),i==="focusout"&&(lt=De._wrapperState)&&lt.controlled&&De.type==="number"&&Cr(De,"number",De.value)}switch(lt=we?Uo(we):window,i){case"focusin":(nt(lt)||lt.contentEditable==="true")&&(Bo=lt,cc=we,Da=null);break;case"focusout":Da=cc=Bo=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,iy(Le,l,Be);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":iy(Le,l,Be)}var ut;if(Fa)e:{switch(i){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else V?T(i,l)&&(dt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(dt="onCompositionStart");dt&&(Zl&&l.locale!=="ko"&&(V||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&V&&(ut=w()):(An=Be,Mo="value"in An?An.value:An.textContent,V=!0)),lt=tu(we,dt),0<lt.length&&(dt=new ko(dt,i,null,l,Be),Le.push({event:dt,listeners:lt}),ut?dt.data=ut:(ut=k(l),ut!==null&&(dt.data=ut)))),(ut=Ws?se(i,l):Te(i,l))&&(we=tu(we,"onBeforeInput"),0<we.length&&(Be=new ko("onBeforeInput","beforeinput",null,l,Be),Le.push({event:Be,listeners:we}),Be.data=ut))}dy(Le,o)})}function La(i,o,l){return{instance:i,listener:o,currentTarget:l}}function tu(i,o){for(var l=o+"Capture",f=[];i!==null;){var v=i,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=Nn(i,l),b!=null&&f.unshift(La(i,b,v)),b=Nn(i,o),b!=null&&f.push(La(i,b,v))),i=i.return}return f}function Lo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function my(i,o,l,f,v){for(var b=o._reactName,M=[];l!==null&&l!==f;){var Y=l,J=Y.alternate,we=Y.stateNode;if(J!==null&&J===f)break;Y.tag===5&&we!==null&&(Y=we,v?(J=Nn(l,b),J!=null&&M.unshift(La(l,J,Y))):v||(J=Nn(l,b),J!=null&&M.push(La(l,J,Y)))),l=l.return}M.length!==0&&i.push({event:o,listeners:M})}var kT=/\r\n?/g,FT=/\u0000|\uFFFD/g;function gy(i){return(typeof i=="string"?i:""+i).replace(kT,`
`).replace(FT,"")}function ru(i,o,l){if(o=gy(o),gy(i)!==o&&l)throw Error(r(425))}function nu(){}var vc=null,_c=null;function xc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,BT=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(i){return yy.resolve(null).then(i).catch(OT)}:bc;function OT(i){setTimeout(function(){throw i})}function wc(i,o){var l=o,f=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(f===0){i.removeChild(v),js(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=v}while(l);js(o)}function ys(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function vy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var No=Math.random().toString(36).slice(2),bi="__reactFiber$"+No,Na="__reactProps$"+No,Hi="__reactContainer$"+No,Tc="__reactEvents$"+No,LT="__reactListeners$"+No,NT="__reactHandles$"+No;function Xs(i){var o=i[bi];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Hi]||l[bi]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=vy(i);i!==null;){if(l=i[bi])return l;i=vy(i)}return o}i=l,l=i.parentNode}return null}function Ua(i){return i=i[bi]||i[Hi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Uo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(r(33))}function iu(i){return i[Na]||null}var Sc=[],Go=-1;function vs(i){return{current:i}}function Zt(i){0>Go||(i.current=Sc[Go],Sc[Go]=null,Go--)}function Yt(i,o){Go++,Sc[Go]=i.current,i.current=o}var _s={},Vr=vs(_s),hn=vs(!1),qs=_s;function Ho(i,o){var l=i.type.contextTypes;if(!l)return _s;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in l)v[b]=o[b];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function cn(i){return i=i.childContextTypes,i!=null}function su(){Zt(hn),Zt(Vr)}function _y(i,o,l){if(Vr.current!==_s)throw Error(r(168));Yt(Vr,o),Yt(hn,l)}function xy(i,o,l){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var v in f)if(!(v in o))throw Error(r(108,Me(i)||"Unknown",v));return U({},l,f)}function ou(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||_s,qs=Vr.current,Yt(Vr,i),Yt(hn,hn.current),!0}function by(i,o,l){var f=i.stateNode;if(!f)throw Error(r(169));l?(i=xy(i,o,qs),f.__reactInternalMemoizedMergedChildContext=i,Zt(hn),Zt(Vr),Yt(Vr,i)):Zt(hn),Yt(hn,l)}var ji=null,au=!1,Ec=!1;function wy(i){ji===null?ji=[i]:ji.push(i)}function UT(i){au=!0,wy(i)}function xs(){if(!Ec&&ji!==null){Ec=!0;var i=0,o=Ot;try{var l=ji;for(Ot=1;i<l.length;i++){var f=l[i];do f=f(!0);while(f!==null)}ji=null,au=!1}catch(v){throw ji!==null&&(ji=ji.slice(i+1)),ls(Ui,xs),v}finally{Ot=o,Ec=!1}}return null}var jo=[],zo=0,lu=null,uu=0,Hn=[],jn=0,Ys=null,zi=1,$i="";function Ks(i,o){jo[zo++]=uu,jo[zo++]=lu,lu=i,uu=o}function Ty(i,o,l){Hn[jn++]=zi,Hn[jn++]=$i,Hn[jn++]=Ys,Ys=i;var f=zi;i=$i;var v=32-Sn(f)-1;f&=~(1<<v),l+=1;var b=32-Sn(o)+v;if(30<b){var M=v-v%5;b=(f&(1<<M)-1).toString(32),f>>=M,v-=M,zi=1<<32-Sn(o)+v|l<<v|f,$i=b+i}else zi=1<<b|l<<v|f,$i=i}function Cc(i){i.return!==null&&(Ks(i,1),Ty(i,1,0))}function Ac(i){for(;i===lu;)lu=jo[--zo],jo[zo]=null,uu=jo[--zo],jo[zo]=null;for(;i===Ys;)Ys=Hn[--jn],Hn[jn]=null,$i=Hn[--jn],Hn[jn]=null,zi=Hn[--jn],Hn[jn]=null}var Rn=null,In=null,Qt=!1,Qn=null;function Sy(i,o){var l=Wn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Ey(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Rn=i,In=ys(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Rn=i,In=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Ys!==null?{id:zi,overflow:$i}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Wn(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Rn=i,In=null,!0):!1;default:return!1}}function Pc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Rc(i){if(Qt){var o=In;if(o){var l=o;if(!Ey(i,o)){if(Pc(i))throw Error(r(418));o=ys(l.nextSibling);var f=Rn;o&&Ey(i,o)?Sy(f,l):(i.flags=i.flags&-4097|2,Qt=!1,Rn=i)}}else{if(Pc(i))throw Error(r(418));i.flags=i.flags&-4097|2,Qt=!1,Rn=i}}}function Cy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Rn=i}function hu(i){if(i!==Rn)return!1;if(!Qt)return Cy(i),Qt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!xc(i.type,i.memoizedProps)),o&&(o=In)){if(Pc(i))throw Ay(),Error(r(418));for(;o;)Sy(i,o),o=ys(o.nextSibling)}if(Cy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){In=ys(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}In=null}}else In=Rn?ys(i.stateNode.nextSibling):null;return!0}function Ay(){for(var i=In;i;)i=ys(i.nextSibling)}function $o(){In=Rn=null,Qt=!1}function Ic(i){Qn===null?Qn=[i]:Qn.push(i)}var GT=X.ReactCurrentBatchConfig;function Ga(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var f=l.stateNode}if(!f)throw Error(r(147,i));var v=f,b=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===b?o.ref:(o=function(M){var Y=v.refs;M===null?delete Y[b]:Y[b]=M},o._stringRef=b,o)}if(typeof i!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,i))}return i}function cu(i,o){throw i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Py(i){var o=i._init;return o(i._payload)}function Ry(i){function o(ce,ne){if(i){var pe=ce.deletions;pe===null?(ce.deletions=[ne],ce.flags|=16):pe.push(ne)}}function l(ce,ne){if(!i)return null;for(;ne!==null;)o(ce,ne),ne=ne.sibling;return null}function f(ce,ne){for(ce=new Map;ne!==null;)ne.key!==null?ce.set(ne.key,ne):ce.set(ne.index,ne),ne=ne.sibling;return ce}function v(ce,ne){return ce=Ps(ce,ne),ce.index=0,ce.sibling=null,ce}function b(ce,ne,pe){return ce.index=pe,i?(pe=ce.alternate,pe!==null?(pe=pe.index,pe<ne?(ce.flags|=2,ne):pe):(ce.flags|=2,ne)):(ce.flags|=1048576,ne)}function M(ce){return i&&ce.alternate===null&&(ce.flags|=2),ce}function Y(ce,ne,pe,Ge){return ne===null||ne.tag!==6?(ne=wf(pe,ce.mode,Ge),ne.return=ce,ne):(ne=v(ne,pe),ne.return=ce,ne)}function J(ce,ne,pe,Ge){var it=pe.type;return it===G?Be(ce,ne,pe.props.children,Ge,pe.key):ne!==null&&(ne.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===H&&Py(it)===ne.type)?(Ge=v(ne,pe.props),Ge.ref=Ga(ce,ne,pe),Ge.return=ce,Ge):(Ge=Bu(pe.type,pe.key,pe.props,null,ce.mode,Ge),Ge.ref=Ga(ce,ne,pe),Ge.return=ce,Ge)}function we(ce,ne,pe,Ge){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==pe.containerInfo||ne.stateNode.implementation!==pe.implementation?(ne=Tf(pe,ce.mode,Ge),ne.return=ce,ne):(ne=v(ne,pe.children||[]),ne.return=ce,ne)}function Be(ce,ne,pe,Ge,it){return ne===null||ne.tag!==7?(ne=io(pe,ce.mode,Ge,it),ne.return=ce,ne):(ne=v(ne,pe),ne.return=ce,ne)}function Le(ce,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=wf(""+ne,ce.mode,pe),ne.return=ce,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return pe=Bu(ne.type,ne.key,ne.props,null,ce.mode,pe),pe.ref=Ga(ce,null,ne),pe.return=ce,pe;case Z:return ne=Tf(ne,ce.mode,pe),ne.return=ce,ne;case H:var Ge=ne._init;return Le(ce,Ge(ne._payload),pe)}if(vn(ne)||K(ne))return ne=io(ne,ce.mode,pe,null),ne.return=ce,ne;cu(ce,ne)}return null}function De(ce,ne,pe,Ge){var it=ne!==null?ne.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return it!==null?null:Y(ce,ne,""+pe,Ge);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case N:return pe.key===it?J(ce,ne,pe,Ge):null;case Z:return pe.key===it?we(ce,ne,pe,Ge):null;case H:return it=pe._init,De(ce,ne,it(pe._payload),Ge)}if(vn(pe)||K(pe))return it!==null?null:Be(ce,ne,pe,Ge,null);cu(ce,pe)}return null}function Xe(ce,ne,pe,Ge,it){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return ce=ce.get(pe)||null,Y(ne,ce,""+Ge,it);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case N:return ce=ce.get(Ge.key===null?pe:Ge.key)||null,J(ne,ce,Ge,it);case Z:return ce=ce.get(Ge.key===null?pe:Ge.key)||null,we(ne,ce,Ge,it);case H:var lt=Ge._init;return Xe(ce,ne,pe,lt(Ge._payload),it)}if(vn(Ge)||K(Ge))return ce=ce.get(pe)||null,Be(ne,ce,Ge,it,null);cu(ne,Ge)}return null}function Qe(ce,ne,pe,Ge){for(var it=null,lt=null,ut=ne,dt=ne=0,Ir=null;ut!==null&&dt<pe.length;dt++){ut.index>dt?(Ir=ut,ut=null):Ir=ut.sibling;var Lt=De(ce,ut,pe[dt],Ge);if(Lt===null){ut===null&&(ut=Ir);break}i&&ut&&Lt.alternate===null&&o(ce,ut),ne=b(Lt,ne,dt),lt===null?it=Lt:lt.sibling=Lt,lt=Lt,ut=Ir}if(dt===pe.length)return l(ce,ut),Qt&&Ks(ce,dt),it;if(ut===null){for(;dt<pe.length;dt++)ut=Le(ce,pe[dt],Ge),ut!==null&&(ne=b(ut,ne,dt),lt===null?it=ut:lt.sibling=ut,lt=ut);return Qt&&Ks(ce,dt),it}for(ut=f(ce,ut);dt<pe.length;dt++)Ir=Xe(ut,ce,dt,pe[dt],Ge),Ir!==null&&(i&&Ir.alternate!==null&&ut.delete(Ir.key===null?dt:Ir.key),ne=b(Ir,ne,dt),lt===null?it=Ir:lt.sibling=Ir,lt=Ir);return i&&ut.forEach(function(Rs){return o(ce,Rs)}),Qt&&Ks(ce,dt),it}function rt(ce,ne,pe,Ge){var it=K(pe);if(typeof it!="function")throw Error(r(150));if(pe=it.call(pe),pe==null)throw Error(r(151));for(var lt=it=null,ut=ne,dt=ne=0,Ir=null,Lt=pe.next();ut!==null&&!Lt.done;dt++,Lt=pe.next()){ut.index>dt?(Ir=ut,ut=null):Ir=ut.sibling;var Rs=De(ce,ut,Lt.value,Ge);if(Rs===null){ut===null&&(ut=Ir);break}i&&ut&&Rs.alternate===null&&o(ce,ut),ne=b(Rs,ne,dt),lt===null?it=Rs:lt.sibling=Rs,lt=Rs,ut=Ir}if(Lt.done)return l(ce,ut),Qt&&Ks(ce,dt),it;if(ut===null){for(;!Lt.done;dt++,Lt=pe.next())Lt=Le(ce,Lt.value,Ge),Lt!==null&&(ne=b(Lt,ne,dt),lt===null?it=Lt:lt.sibling=Lt,lt=Lt);return Qt&&Ks(ce,dt),it}for(ut=f(ce,ut);!Lt.done;dt++,Lt=pe.next())Lt=Xe(ut,ce,dt,Lt.value,Ge),Lt!==null&&(i&&Lt.alternate!==null&&ut.delete(Lt.key===null?dt:Lt.key),ne=b(Lt,ne,dt),lt===null?it=Lt:lt.sibling=Lt,lt=Lt);return i&&ut.forEach(function(_S){return o(ce,_S)}),Qt&&Ks(ce,dt),it}function fr(ce,ne,pe,Ge){if(typeof pe=="object"&&pe!==null&&pe.type===G&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case N:e:{for(var it=pe.key,lt=ne;lt!==null;){if(lt.key===it){if(it=pe.type,it===G){if(lt.tag===7){l(ce,lt.sibling),ne=v(lt,pe.props.children),ne.return=ce,ce=ne;break e}}else if(lt.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===H&&Py(it)===lt.type){l(ce,lt.sibling),ne=v(lt,pe.props),ne.ref=Ga(ce,lt,pe),ne.return=ce,ce=ne;break e}l(ce,lt);break}else o(ce,lt);lt=lt.sibling}pe.type===G?(ne=io(pe.props.children,ce.mode,Ge,pe.key),ne.return=ce,ce=ne):(Ge=Bu(pe.type,pe.key,pe.props,null,ce.mode,Ge),Ge.ref=Ga(ce,ne,pe),Ge.return=ce,ce=Ge)}return M(ce);case Z:e:{for(lt=pe.key;ne!==null;){if(ne.key===lt)if(ne.tag===4&&ne.stateNode.containerInfo===pe.containerInfo&&ne.stateNode.implementation===pe.implementation){l(ce,ne.sibling),ne=v(ne,pe.children||[]),ne.return=ce,ce=ne;break e}else{l(ce,ne);break}else o(ce,ne);ne=ne.sibling}ne=Tf(pe,ce.mode,Ge),ne.return=ce,ce=ne}return M(ce);case H:return lt=pe._init,fr(ce,ne,lt(pe._payload),Ge)}if(vn(pe))return Qe(ce,ne,pe,Ge);if(K(pe))return rt(ce,ne,pe,Ge);cu(ce,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,ne!==null&&ne.tag===6?(l(ce,ne.sibling),ne=v(ne,pe),ne.return=ce,ce=ne):(l(ce,ne),ne=wf(pe,ce.mode,Ge),ne.return=ce,ce=ne),M(ce)):l(ce,ne)}return fr}var Vo=Ry(!0),Iy=Ry(!1),fu=vs(null),du=null,Wo=null,Mc=null;function kc(){Mc=Wo=du=null}function Fc(i){var o=fu.current;Zt(fu),i._currentValue=o}function Dc(i,o,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===l)break;i=i.return}}function Xo(i,o){du=i,Mc=Wo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(fn=!0),i.firstContext=null)}function zn(i){var o=i._currentValue;if(Mc!==i)if(i={context:i,memoizedValue:o,next:null},Wo===null){if(du===null)throw Error(r(308));Wo=i,du.dependencies={lanes:0,firstContext:i}}else Wo=Wo.next=i;return o}var Zs=null;function Bc(i){Zs===null?Zs=[i]:Zs.push(i)}function My(i,o,l,f){var v=o.interleaved;return v===null?(l.next=l,Bc(o)):(l.next=v.next,v.next=l),o.interleaved=l,Vi(i,f)}function Vi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var bs=!1;function Oc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ky(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Wi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ws(i,o,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,Ft&2){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,Vi(i,l)}return v=f.interleaved,v===null?(o.next=o,Bc(f)):(o.next=v.next,v.next=o),f.interleaved=o,Vi(i,l)}function pu(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Ns(i,l)}}function Fy(i,o){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var M={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};b===null?v=b=M:b=b.next=M,l=l.next}while(l!==null);b===null?v=b=o:b=b.next=o}else v=b=o;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,effects:f.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function mu(i,o,l,f){var v=i.updateQueue;bs=!1;var b=v.firstBaseUpdate,M=v.lastBaseUpdate,Y=v.shared.pending;if(Y!==null){v.shared.pending=null;var J=Y,we=J.next;J.next=null,M===null?b=we:M.next=we,M=J;var Be=i.alternate;Be!==null&&(Be=Be.updateQueue,Y=Be.lastBaseUpdate,Y!==M&&(Y===null?Be.firstBaseUpdate=we:Y.next=we,Be.lastBaseUpdate=J))}if(b!==null){var Le=v.baseState;M=0,Be=we=J=null,Y=b;do{var De=Y.lane,Xe=Y.eventTime;if((f&De)===De){Be!==null&&(Be=Be.next={eventTime:Xe,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Qe=i,rt=Y;switch(De=o,Xe=l,rt.tag){case 1:if(Qe=rt.payload,typeof Qe=="function"){Le=Qe.call(Xe,Le,De);break e}Le=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=rt.payload,De=typeof Qe=="function"?Qe.call(Xe,Le,De):Qe,De==null)break e;Le=U({},Le,De);break e;case 2:bs=!0}}Y.callback!==null&&Y.lane!==0&&(i.flags|=64,De=v.effects,De===null?v.effects=[Y]:De.push(Y))}else Xe={eventTime:Xe,lane:De,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Be===null?(we=Be=Xe,J=Le):Be=Be.next=Xe,M|=De;if(Y=Y.next,Y===null){if(Y=v.shared.pending,Y===null)break;De=Y,Y=De.next,De.next=null,v.lastBaseUpdate=De,v.shared.pending=null}}while(!0);if(Be===null&&(J=Le),v.baseState=J,v.firstBaseUpdate=we,v.lastBaseUpdate=Be,o=v.shared.interleaved,o!==null){v=o;do M|=v.lane,v=v.next;while(v!==o)}else b===null&&(v.shared.lanes=0);eo|=M,i.lanes=M,i.memoizedState=Le}}function Dy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],v=f.callback;if(v!==null){if(f.callback=null,f=l,typeof v!="function")throw Error(r(191,v));v.call(f)}}}var Ha={},wi=vs(Ha),ja=vs(Ha),za=vs(Ha);function Qs(i){if(i===Ha)throw Error(r(174));return i}function Lc(i,o){switch(Yt(za,o),Yt(ja,i),Yt(wi,Ha),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:dr(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=dr(o,i)}Zt(wi),Yt(wi,o)}function qo(){Zt(wi),Zt(ja),Zt(za)}function By(i){Qs(za.current);var o=Qs(wi.current),l=dr(o,i.type);o!==l&&(Yt(ja,i),Yt(wi,l))}function Nc(i){ja.current===i&&(Zt(wi),Zt(ja))}var nr=vs(0);function gu(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Uc=[];function Gc(){for(var i=0;i<Uc.length;i++)Uc[i]._workInProgressVersionPrimary=null;Uc.length=0}var yu=X.ReactCurrentDispatcher,Hc=X.ReactCurrentBatchConfig,Js=0,ir=null,br=null,Pr=null,vu=!1,$a=!1,Va=0,HT=0;function Wr(){throw Error(r(321))}function jc(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Re(i[l],o[l]))return!1;return!0}function zc(i,o,l,f,v,b){if(Js=b,ir=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,yu.current=i===null||i.memoizedState===null?VT:WT,i=l(f,v),$a){b=0;do{if($a=!1,Va=0,25<=b)throw Error(r(301));b+=1,Pr=br=null,o.updateQueue=null,yu.current=XT,i=l(f,v)}while($a)}if(yu.current=bu,o=br!==null&&br.next!==null,Js=0,Pr=br=ir=null,vu=!1,o)throw Error(r(300));return i}function $c(){var i=Va!==0;return Va=0,i}function Ti(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?ir.memoizedState=Pr=i:Pr=Pr.next=i,Pr}function $n(){if(br===null){var i=ir.alternate;i=i!==null?i.memoizedState:null}else i=br.next;var o=Pr===null?ir.memoizedState:Pr.next;if(o!==null)Pr=o,br=i;else{if(i===null)throw Error(r(310));br=i,i={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Pr===null?ir.memoizedState=Pr=i:Pr=Pr.next=i}return Pr}function Wa(i,o){return typeof o=="function"?o(i):o}function Vc(i){var o=$n(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var f=br,v=f.baseQueue,b=l.pending;if(b!==null){if(v!==null){var M=v.next;v.next=b.next,b.next=M}f.baseQueue=v=b,l.pending=null}if(v!==null){b=v.next,f=f.baseState;var Y=M=null,J=null,we=b;do{var Be=we.lane;if((Js&Be)===Be)J!==null&&(J=J.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),f=we.hasEagerState?we.eagerState:i(f,we.action);else{var Le={lane:Be,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};J===null?(Y=J=Le,M=f):J=J.next=Le,ir.lanes|=Be,eo|=Be}we=we.next}while(we!==null&&we!==b);J===null?M=f:J.next=Y,Re(f,o.memoizedState)||(fn=!0),o.memoizedState=f,o.baseState=M,o.baseQueue=J,l.lastRenderedState=f}if(i=l.interleaved,i!==null){v=i;do b=v.lane,ir.lanes|=b,eo|=b,v=v.next;while(v!==i)}else v===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Wc(i){var o=$n(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var f=l.dispatch,v=l.pending,b=o.memoizedState;if(v!==null){l.pending=null;var M=v=v.next;do b=i(b,M.action),M=M.next;while(M!==v);Re(b,o.memoizedState)||(fn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,f]}function Oy(){}function Ly(i,o){var l=ir,f=$n(),v=o(),b=!Re(f.memoizedState,v);if(b&&(f.memoizedState=v,fn=!0),f=f.queue,Xc(Gy.bind(null,l,f,i),[i]),f.getSnapshot!==o||b||Pr!==null&&Pr.memoizedState.tag&1){if(l.flags|=2048,Xa(9,Uy.bind(null,l,f,v,o),void 0,null),Rr===null)throw Error(r(349));Js&30||Ny(l,o,v)}return v}function Ny(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=ir.updateQueue,o===null?(o={lastEffect:null,stores:null},ir.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Uy(i,o,l,f){o.value=l,o.getSnapshot=f,Hy(o)&&jy(i)}function Gy(i,o,l){return l(function(){Hy(o)&&jy(i)})}function Hy(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Re(i,l)}catch{return!0}}function jy(i){var o=Vi(i,1);o!==null&&ri(o,i,1,-1)}function zy(i){var o=Ti();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:i},o.queue=i,i=i.dispatch=$T.bind(null,ir,i),[o.memoizedState,i]}function Xa(i,o,l,f){return i={tag:i,create:o,destroy:l,deps:f,next:null},o=ir.updateQueue,o===null?(o={lastEffect:null,stores:null},ir.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,o.lastEffect=i)),i}function $y(){return $n().memoizedState}function _u(i,o,l,f){var v=Ti();ir.flags|=i,v.memoizedState=Xa(1|o,l,void 0,f===void 0?null:f)}function xu(i,o,l,f){var v=$n();f=f===void 0?null:f;var b=void 0;if(br!==null){var M=br.memoizedState;if(b=M.destroy,f!==null&&jc(f,M.deps)){v.memoizedState=Xa(o,l,b,f);return}}ir.flags|=i,v.memoizedState=Xa(1|o,l,b,f)}function Vy(i,o){return _u(8390656,8,i,o)}function Xc(i,o){return xu(2048,8,i,o)}function Wy(i,o){return xu(4,2,i,o)}function Xy(i,o){return xu(4,4,i,o)}function qy(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Yy(i,o,l){return l=l!=null?l.concat([i]):null,xu(4,4,qy.bind(null,o,i),l)}function qc(){}function Ky(i,o){var l=$n();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&jc(o,f[1])?f[0]:(l.memoizedState=[i,o],i)}function Zy(i,o){var l=$n();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&jc(o,f[1])?f[0]:(i=i(),l.memoizedState=[i,o],i)}function Qy(i,o,l){return Js&21?(Re(l,o)||(l=xa(),ir.lanes|=l,eo|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,fn=!0),i.memoizedState=l)}function jT(i,o){var l=Ot;Ot=l!==0&&4>l?l:4,i(!0);var f=Hc.transition;Hc.transition={};try{i(!1),o()}finally{Ot=l,Hc.transition=f}}function Jy(){return $n().memoizedState}function zT(i,o,l){var f=Cs(i);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},ev(i))tv(o,l);else if(l=My(i,o,l,f),l!==null){var v=nn();ri(l,i,f,v),rv(l,o,f)}}function $T(i,o,l){var f=Cs(i),v={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(ev(i))tv(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var M=o.lastRenderedState,Y=b(M,l);if(v.hasEagerState=!0,v.eagerState=Y,Re(Y,M)){var J=o.interleaved;J===null?(v.next=v,Bc(o)):(v.next=J.next,J.next=v),o.interleaved=v;return}}catch{}finally{}l=My(i,o,v,f),l!==null&&(v=nn(),ri(l,i,f,v),rv(l,o,f))}}function ev(i){var o=i.alternate;return i===ir||o!==null&&o===ir}function tv(i,o){$a=vu=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function rv(i,o,l){if(l&4194240){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Ns(i,l)}}var bu={readContext:zn,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},VT={readContext:zn,useCallback:function(i,o){return Ti().memoizedState=[i,o===void 0?null:o],i},useContext:zn,useEffect:Vy,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,_u(4194308,4,qy.bind(null,o,i),l)},useLayoutEffect:function(i,o){return _u(4194308,4,i,o)},useInsertionEffect:function(i,o){return _u(4,2,i,o)},useMemo:function(i,o){var l=Ti();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var f=Ti();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=zT.bind(null,ir,i),[f.memoizedState,i]},useRef:function(i){var o=Ti();return i={current:i},o.memoizedState=i},useState:zy,useDebugValue:qc,useDeferredValue:function(i){return Ti().memoizedState=i},useTransition:function(){var i=zy(!1),o=i[0];return i=jT.bind(null,i[1]),Ti().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var f=ir,v=Ti();if(Qt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),Rr===null)throw Error(r(349));Js&30||Ny(f,o,l)}v.memoizedState=l;var b={value:l,getSnapshot:o};return v.queue=b,Vy(Gy.bind(null,f,b,i),[i]),f.flags|=2048,Xa(9,Uy.bind(null,f,b,l,o),void 0,null),l},useId:function(){var i=Ti(),o=Rr.identifierPrefix;if(Qt){var l=$i,f=zi;l=(f&~(1<<32-Sn(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=Va++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=HT++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},WT={readContext:zn,useCallback:Ky,useContext:zn,useEffect:Xc,useImperativeHandle:Yy,useInsertionEffect:Wy,useLayoutEffect:Xy,useMemo:Zy,useReducer:Vc,useRef:$y,useState:function(){return Vc(Wa)},useDebugValue:qc,useDeferredValue:function(i){var o=$n();return Qy(o,br.memoizedState,i)},useTransition:function(){var i=Vc(Wa)[0],o=$n().memoizedState;return[i,o]},useMutableSource:Oy,useSyncExternalStore:Ly,useId:Jy,unstable_isNewReconciler:!1},XT={readContext:zn,useCallback:Ky,useContext:zn,useEffect:Xc,useImperativeHandle:Yy,useInsertionEffect:Wy,useLayoutEffect:Xy,useMemo:Zy,useReducer:Wc,useRef:$y,useState:function(){return Wc(Wa)},useDebugValue:qc,useDeferredValue:function(i){var o=$n();return br===null?o.memoizedState=i:Qy(o,br.memoizedState,i)},useTransition:function(){var i=Wc(Wa)[0],o=$n().memoizedState;return[i,o]},useMutableSource:Oy,useSyncExternalStore:Ly,useId:Jy,unstable_isNewReconciler:!1};function Jn(i,o){if(i&&i.defaultProps){o=U({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Yc(i,o,l,f){o=i.memoizedState,l=l(f,o),l=l==null?o:U({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var wu={isMounted:function(i){return(i=i._reactInternals)?Vt(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var f=nn(),v=Cs(i),b=Wi(f,v);b.payload=o,l!=null&&(b.callback=l),o=ws(i,b,v),o!==null&&(ri(o,i,v,f),pu(o,i,v))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var f=nn(),v=Cs(i),b=Wi(f,v);b.tag=1,b.payload=o,l!=null&&(b.callback=l),o=ws(i,b,v),o!==null&&(ri(o,i,v,f),pu(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=nn(),f=Cs(i),v=Wi(l,f);v.tag=2,o!=null&&(v.callback=o),o=ws(i,v,f),o!==null&&(ri(o,i,f,l),pu(o,i,f))}};function nv(i,o,l,f,v,b,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,M):o.prototype&&o.prototype.isPureReactComponent?!Ye(l,f)||!Ye(v,b):!0}function iv(i,o,l){var f=!1,v=_s,b=o.contextType;return typeof b=="object"&&b!==null?b=zn(b):(v=cn(o)?qs:Vr.current,f=o.contextTypes,b=(f=f!=null)?Ho(i,v):_s),o=new o(l,b),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wu,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=b),o}function sv(i,o,l,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==i&&wu.enqueueReplaceState(o,o.state,null)}function Kc(i,o,l,f){var v=i.stateNode;v.props=l,v.state=i.memoizedState,v.refs={},Oc(i);var b=o.contextType;typeof b=="object"&&b!==null?v.context=zn(b):(b=cn(o)?qs:Vr.current,v.context=Ho(i,b)),v.state=i.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Yc(i,o,b,l),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&wu.enqueueReplaceState(v,v.state,null),mu(i,l,v,f),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Yo(i,o){try{var l="",f=o;do l+=xe(f),f=f.return;while(f);var v=l}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:o,stack:v,digest:null}}function Zc(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Qc(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var qT=typeof WeakMap=="function"?WeakMap:Map;function ov(i,o,l){l=Wi(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){Ru||(Ru=!0,pf=f),Qc(i,o)},l}function av(i,o,l){l=Wi(-1,l),l.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var v=o.value;l.payload=function(){return f(v)},l.callback=function(){Qc(i,o)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(l.callback=function(){Qc(i,o),typeof f!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var M=o.stack;this.componentDidCatch(o.value,{componentStack:M!==null?M:""})}),l}function lv(i,o,l){var f=i.pingCache;if(f===null){f=i.pingCache=new qT;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(l)||(v.add(l),i=lS.bind(null,i,o,l),o.then(i,i))}function uv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function hv(i,o,l,f,v){return i.mode&1?(i.flags|=65536,i.lanes=v,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Wi(-1,1),o.tag=2,ws(l,o,1))),l.lanes|=1),i)}var YT=X.ReactCurrentOwner,fn=!1;function rn(i,o,l,f){o.child=i===null?Iy(o,null,l,f):Vo(o,i.child,l,f)}function cv(i,o,l,f,v){l=l.render;var b=o.ref;return Xo(o,v),f=zc(i,o,l,f,b,v),l=$c(),i!==null&&!fn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,Xi(i,o,v)):(Qt&&l&&Cc(o),o.flags|=1,rn(i,o,f,v),o.child)}function fv(i,o,l,f,v){if(i===null){var b=l.type;return typeof b=="function"&&!bf(b)&&b.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=b,dv(i,o,b,f,v)):(i=Bu(l.type,null,f,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!(i.lanes&v)){var M=b.memoizedProps;if(l=l.compare,l=l!==null?l:Ye,l(M,f)&&i.ref===o.ref)return Xi(i,o,v)}return o.flags|=1,i=Ps(b,f),i.ref=o.ref,i.return=o,o.child=i}function dv(i,o,l,f,v){if(i!==null){var b=i.memoizedProps;if(Ye(b,f)&&i.ref===o.ref)if(fn=!1,o.pendingProps=f=b,(i.lanes&v)!==0)i.flags&131072&&(fn=!0);else return o.lanes=i.lanes,Xi(i,o,v)}return Jc(i,o,l,f,v)}function pv(i,o,l){var f=o.pendingProps,v=f.children,b=i!==null?i.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Zo,Mn),Mn|=l;else{if(!(l&1073741824))return i=b!==null?b.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Yt(Zo,Mn),Mn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=b!==null?b.baseLanes:l,Yt(Zo,Mn),Mn|=f}else b!==null?(f=b.baseLanes|l,o.memoizedState=null):f=l,Yt(Zo,Mn),Mn|=f;return rn(i,o,v,l),o.child}function mv(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Jc(i,o,l,f,v){var b=cn(l)?qs:Vr.current;return b=Ho(o,b),Xo(o,v),l=zc(i,o,l,f,b,v),f=$c(),i!==null&&!fn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,Xi(i,o,v)):(Qt&&f&&Cc(o),o.flags|=1,rn(i,o,l,v),o.child)}function gv(i,o,l,f,v){if(cn(l)){var b=!0;ou(o)}else b=!1;if(Xo(o,v),o.stateNode===null)Su(i,o),iv(o,l,f),Kc(o,l,f,v),f=!0;else if(i===null){var M=o.stateNode,Y=o.memoizedProps;M.props=Y;var J=M.context,we=l.contextType;typeof we=="object"&&we!==null?we=zn(we):(we=cn(l)?qs:Vr.current,we=Ho(o,we));var Be=l.getDerivedStateFromProps,Le=typeof Be=="function"||typeof M.getSnapshotBeforeUpdate=="function";Le||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Y!==f||J!==we)&&sv(o,M,f,we),bs=!1;var De=o.memoizedState;M.state=De,mu(o,f,M,v),J=o.memoizedState,Y!==f||De!==J||hn.current||bs?(typeof Be=="function"&&(Yc(o,l,Be,f),J=o.memoizedState),(Y=bs||nv(o,l,Y,f,De,J,we))?(Le||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=J),M.props=f,M.state=J,M.context=we,f=Y):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{M=o.stateNode,ky(i,o),Y=o.memoizedProps,we=o.type===o.elementType?Y:Jn(o.type,Y),M.props=we,Le=o.pendingProps,De=M.context,J=l.contextType,typeof J=="object"&&J!==null?J=zn(J):(J=cn(l)?qs:Vr.current,J=Ho(o,J));var Xe=l.getDerivedStateFromProps;(Be=typeof Xe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Y!==Le||De!==J)&&sv(o,M,f,J),bs=!1,De=o.memoizedState,M.state=De,mu(o,f,M,v);var Qe=o.memoizedState;Y!==Le||De!==Qe||hn.current||bs?(typeof Xe=="function"&&(Yc(o,l,Xe,f),Qe=o.memoizedState),(we=bs||nv(o,l,we,f,De,Qe,J)||!1)?(Be||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(f,Qe,J),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(f,Qe,J)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||Y===i.memoizedProps&&De===i.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&De===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Qe),M.props=f,M.state=Qe,M.context=J,f=we):(typeof M.componentDidUpdate!="function"||Y===i.memoizedProps&&De===i.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&De===i.memoizedState||(o.flags|=1024),f=!1)}return ef(i,o,l,f,b,v)}function ef(i,o,l,f,v,b){mv(i,o);var M=(o.flags&128)!==0;if(!f&&!M)return v&&by(o,l,!1),Xi(i,o,b);f=o.stateNode,YT.current=o;var Y=M&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&M?(o.child=Vo(o,i.child,null,b),o.child=Vo(o,null,Y,b)):rn(i,o,Y,b),o.memoizedState=f.state,v&&by(o,l,!0),o.child}function yv(i){var o=i.stateNode;o.pendingContext?_y(i,o.pendingContext,o.pendingContext!==o.context):o.context&&_y(i,o.context,!1),Lc(i,o.containerInfo)}function vv(i,o,l,f,v){return $o(),Ic(v),o.flags|=256,rn(i,o,l,f),o.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function rf(i){return{baseLanes:i,cachePool:null,transitions:null}}function _v(i,o,l){var f=o.pendingProps,v=nr.current,b=!1,M=(o.flags&128)!==0,Y;if((Y=M)||(Y=i!==null&&i.memoizedState===null?!1:(v&2)!==0),Y?(b=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),Yt(nr,v&1),i===null)return Rc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(M=f.children,i=f.fallback,b?(f=o.mode,b=o.child,M={mode:"hidden",children:M},!(f&1)&&b!==null?(b.childLanes=0,b.pendingProps=M):b=Ou(M,f,0,null),i=io(i,f,l,null),b.return=o,i.return=o,b.sibling=i,o.child=b,o.child.memoizedState=rf(l),o.memoizedState=tf,i):nf(o,M));if(v=i.memoizedState,v!==null&&(Y=v.dehydrated,Y!==null))return KT(i,o,M,f,Y,v,l);if(b){b=f.fallback,M=o.mode,v=i.child,Y=v.sibling;var J={mode:"hidden",children:f.children};return!(M&1)&&o.child!==v?(f=o.child,f.childLanes=0,f.pendingProps=J,o.deletions=null):(f=Ps(v,J),f.subtreeFlags=v.subtreeFlags&14680064),Y!==null?b=Ps(Y,b):(b=io(b,M,l,null),b.flags|=2),b.return=o,f.return=o,f.sibling=b,o.child=f,f=b,b=o.child,M=i.child.memoizedState,M=M===null?rf(l):{baseLanes:M.baseLanes|l,cachePool:null,transitions:M.transitions},b.memoizedState=M,b.childLanes=i.childLanes&~l,o.memoizedState=tf,f}return b=i.child,i=b.sibling,f=Ps(b,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=f,o.memoizedState=null,f}function nf(i,o){return o=Ou({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Tu(i,o,l,f){return f!==null&&Ic(f),Vo(o,i.child,null,l),i=nf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function KT(i,o,l,f,v,b,M){if(l)return o.flags&256?(o.flags&=-257,f=Zc(Error(r(422))),Tu(i,o,M,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(b=f.fallback,v=o.mode,f=Ou({mode:"visible",children:f.children},v,0,null),b=io(b,v,M,null),b.flags|=2,f.return=o,b.return=o,f.sibling=b,o.child=f,o.mode&1&&Vo(o,i.child,null,M),o.child.memoizedState=rf(M),o.memoizedState=tf,b);if(!(o.mode&1))return Tu(i,o,M,null);if(v.data==="$!"){if(f=v.nextSibling&&v.nextSibling.dataset,f)var Y=f.dgst;return f=Y,b=Error(r(419)),f=Zc(b,f,void 0),Tu(i,o,M,f)}if(Y=(M&i.childLanes)!==0,fn||Y){if(f=Rr,f!==null){switch(M&-M){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(f.suspendedLanes|M)?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,Vi(i,v),ri(f,i,v,-1))}return xf(),f=Zc(Error(r(421))),Tu(i,o,M,f)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=uS.bind(null,i),v._reactRetry=o,null):(i=b.treeContext,In=ys(v.nextSibling),Rn=o,Qt=!0,Qn=null,i!==null&&(Hn[jn++]=zi,Hn[jn++]=$i,Hn[jn++]=Ys,zi=i.id,$i=i.overflow,Ys=o),o=nf(o,f.children),o.flags|=4096,o)}function xv(i,o,l){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Dc(i.return,o,l)}function sf(i,o,l,f,v){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=l,b.tailMode=v)}function bv(i,o,l){var f=o.pendingProps,v=f.revealOrder,b=f.tail;if(rn(i,o,f.children,l),f=nr.current,f&2)f=f&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&xv(i,l,o);else if(i.tag===19)xv(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Yt(nr,f),!(o.mode&1))o.memoizedState=null;else switch(v){case"forwards":for(l=o.child,v=null;l!==null;)i=l.alternate,i!==null&&gu(i)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),sf(o,!1,v,l,b);break;case"backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&gu(i)===null){o.child=v;break}i=v.sibling,v.sibling=l,l=v,v=i}sf(o,!0,l,null,b);break;case"together":sf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Su(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Xi(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),eo|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,l=Ps(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Ps(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function ZT(i,o,l){switch(o.tag){case 3:yv(o),$o();break;case 5:By(o);break;case 1:cn(o.type)&&ou(o);break;case 4:Lc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,v=o.memoizedProps.value;Yt(fu,f._currentValue),f._currentValue=v;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Yt(nr,nr.current&1),o.flags|=128,null):l&o.child.childLanes?_v(i,o,l):(Yt(nr,nr.current&1),i=Xi(i,o,l),i!==null?i.sibling:null);Yt(nr,nr.current&1);break;case 19:if(f=(l&o.childLanes)!==0,i.flags&128){if(f)return bv(i,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Yt(nr,nr.current),f)break;return null;case 22:case 23:return o.lanes=0,pv(i,o,l)}return Xi(i,o,l)}var wv,of,Tv,Sv;wv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},of=function(){},Tv=function(i,o,l,f){var v=i.memoizedProps;if(v!==f){i=o.stateNode,Qs(wi.current);var b=null;switch(l){case"input":v=Dt(i,v),f=Dt(i,f),b=[];break;case"select":v=U({},v,{value:void 0}),f=U({},f,{value:void 0}),b=[];break;case"textarea":v=ur(i,v),f=ur(i,f),b=[];break;default:typeof v.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=nu)}ge(l,f);var M;l=null;for(we in v)if(!f.hasOwnProperty(we)&&v.hasOwnProperty(we)&&v[we]!=null)if(we==="style"){var Y=v[we];for(M in Y)Y.hasOwnProperty(M)&&(l||(l={}),l[M]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(s.hasOwnProperty(we)?b||(b=[]):(b=b||[]).push(we,null));for(we in f){var J=f[we];if(Y=v!=null?v[we]:void 0,f.hasOwnProperty(we)&&J!==Y&&(J!=null||Y!=null))if(we==="style")if(Y){for(M in Y)!Y.hasOwnProperty(M)||J&&J.hasOwnProperty(M)||(l||(l={}),l[M]="");for(M in J)J.hasOwnProperty(M)&&Y[M]!==J[M]&&(l||(l={}),l[M]=J[M])}else l||(b||(b=[]),b.push(we,l)),l=J;else we==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,Y=Y?Y.__html:void 0,J!=null&&Y!==J&&(b=b||[]).push(we,J)):we==="children"?typeof J!="string"&&typeof J!="number"||(b=b||[]).push(we,""+J):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(s.hasOwnProperty(we)?(J!=null&&we==="onScroll"&&Kt("scroll",i),b||Y===J||(b=[])):(b=b||[]).push(we,J))}l&&(b=b||[]).push("style",l);var we=b;(o.updateQueue=we)&&(o.flags|=4)}},Sv=function(i,o,l,f){l!==f&&(o.flags|=4)};function qa(i,o){if(!Qt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Xr(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(o)for(var v=i.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&14680064,f|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=l,o}function QT(i,o,l){var f=o.pendingProps;switch(Ac(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(o),null;case 1:return cn(o.type)&&su(),Xr(o),null;case 3:return f=o.stateNode,qo(),Zt(hn),Zt(Vr),Gc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(hu(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Qn!==null&&(yf(Qn),Qn=null))),of(i,o),Xr(o),null;case 5:Nc(o);var v=Qs(za.current);if(l=o.type,i!==null&&o.stateNode!=null)Tv(i,o,l,f,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Xr(o),null}if(i=Qs(wi.current),hu(o)){f=o.stateNode,l=o.type;var b=o.memoizedProps;switch(f[bi]=o,f[Na]=b,i=(o.mode&1)!==0,l){case"dialog":Kt("cancel",f),Kt("close",f);break;case"iframe":case"object":case"embed":Kt("load",f);break;case"video":case"audio":for(v=0;v<Ba.length;v++)Kt(Ba[v],f);break;case"source":Kt("error",f);break;case"img":case"image":case"link":Kt("error",f),Kt("load",f);break;case"details":Kt("toggle",f);break;case"input":je(f,b),Kt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!b.multiple},Kt("invalid",f);break;case"textarea":$t(f,b),Kt("invalid",f)}ge(l,b),v=null;for(var M in b)if(b.hasOwnProperty(M)){var Y=b[M];M==="children"?typeof Y=="string"?f.textContent!==Y&&(b.suppressHydrationWarning!==!0&&ru(f.textContent,Y,i),v=["children",Y]):typeof Y=="number"&&f.textContent!==""+Y&&(b.suppressHydrationWarning!==!0&&ru(f.textContent,Y,i),v=["children",""+Y]):s.hasOwnProperty(M)&&Y!=null&&M==="onScroll"&&Kt("scroll",f)}switch(l){case"input":ot(f),tr(f,b,!0);break;case"textarea":ot(f),Bn(f);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(f.onclick=nu)}f=v,o.updateQueue=f,f!==null&&(o.flags|=4)}else{M=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=On(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=M.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=M.createElement(l,{is:f.is}):(i=M.createElement(l),l==="select"&&(M=i,f.multiple?M.multiple=!0:f.size&&(M.size=f.size))):i=M.createElementNS(i,l),i[bi]=o,i[Na]=f,wv(i,o,!1,!1),o.stateNode=i;e:{switch(M=Ct(l,f),l){case"dialog":Kt("cancel",i),Kt("close",i),v=f;break;case"iframe":case"object":case"embed":Kt("load",i),v=f;break;case"video":case"audio":for(v=0;v<Ba.length;v++)Kt(Ba[v],i);v=f;break;case"source":Kt("error",i),v=f;break;case"img":case"image":case"link":Kt("error",i),Kt("load",i),v=f;break;case"details":Kt("toggle",i),v=f;break;case"input":je(i,f),v=Dt(i,f),Kt("invalid",i);break;case"option":v=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},v=U({},f,{value:void 0}),Kt("invalid",i);break;case"textarea":$t(i,f),v=ur(i,f),Kt("invalid",i);break;default:v=f}ge(l,v),Y=v;for(b in Y)if(Y.hasOwnProperty(b)){var J=Y[b];b==="style"?Xt(i,J):b==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Ln(i,J)):b==="children"?typeof J=="string"?(l!=="textarea"||J!=="")&&Mt(i,J):typeof J=="number"&&Mt(i,""+J):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?J!=null&&b==="onScroll"&&Kt("scroll",i):J!=null&&L(i,b,J,M))}switch(l){case"input":ot(i),tr(i,f,!1);break;case"textarea":ot(i),Bn(i);break;case"option":f.value!=null&&i.setAttribute("value",""+ke(f.value));break;case"select":i.multiple=!!f.multiple,b=f.value,b!=null?vr(i,!!f.multiple,b,!1):f.defaultValue!=null&&vr(i,!!f.multiple,f.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=nu)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Xr(o),null;case 6:if(i&&o.stateNode!=null)Sv(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(l=Qs(za.current),Qs(wi.current),hu(o)){if(f=o.stateNode,l=o.memoizedProps,f[bi]=o,(b=f.nodeValue!==l)&&(i=Rn,i!==null))switch(i.tag){case 3:ru(f.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ru(f.nodeValue,l,(i.mode&1)!==0)}b&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[bi]=o,o.stateNode=f}return Xr(o),null;case 13:if(Zt(nr),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Qt&&In!==null&&o.mode&1&&!(o.flags&128))Ay(),$o(),o.flags|=98560,b=!1;else if(b=hu(o),f!==null&&f.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[bi]=o}else $o(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Xr(o),b=!1}else Qn!==null&&(yf(Qn),Qn=null),b=!0;if(!b)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(i===null||nr.current&1?wr===0&&(wr=3):xf())),o.updateQueue!==null&&(o.flags|=4),Xr(o),null);case 4:return qo(),of(i,o),i===null&&Oa(o.stateNode.containerInfo),Xr(o),null;case 10:return Fc(o.type._context),Xr(o),null;case 17:return cn(o.type)&&su(),Xr(o),null;case 19:if(Zt(nr),b=o.memoizedState,b===null)return Xr(o),null;if(f=(o.flags&128)!==0,M=b.rendering,M===null)if(f)qa(b,!1);else{if(wr!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(M=gu(i),M!==null){for(o.flags|=128,qa(b,!1),f=M.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)b=l,i=f,b.flags&=14680066,M=b.alternate,M===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=M.childLanes,b.lanes=M.lanes,b.child=M.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=M.memoizedProps,b.memoizedState=M.memoizedState,b.updateQueue=M.updateQueue,b.type=M.type,i=M.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Yt(nr,nr.current&1|2),o.child}i=i.sibling}b.tail!==null&&It()>Qo&&(o.flags|=128,f=!0,qa(b,!1),o.lanes=4194304)}else{if(!f)if(i=gu(M),i!==null){if(o.flags|=128,f=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),qa(b,!0),b.tail===null&&b.tailMode==="hidden"&&!M.alternate&&!Qt)return Xr(o),null}else 2*It()-b.renderingStartTime>Qo&&l!==1073741824&&(o.flags|=128,f=!0,qa(b,!1),o.lanes=4194304);b.isBackwards?(M.sibling=o.child,o.child=M):(l=b.last,l!==null?l.sibling=M:o.child=M,b.last=M)}return b.tail!==null?(o=b.tail,b.rendering=o,b.tail=o.sibling,b.renderingStartTime=It(),o.sibling=null,l=nr.current,Yt(nr,f?l&1|2:l&1),o):(Xr(o),null);case 22:case 23:return _f(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?Mn&1073741824&&(Xr(o),o.subtreeFlags&6&&(o.flags|=8192)):Xr(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function JT(i,o){switch(Ac(o),o.tag){case 1:return cn(o.type)&&su(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return qo(),Zt(hn),Zt(Vr),Gc(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Nc(o),null;case 13:if(Zt(nr),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));$o()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Zt(nr),null;case 4:return qo(),null;case 10:return Fc(o.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var Eu=!1,qr=!1,eS=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Ko(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ar(i,o,f)}else l.current=null}function af(i,o,l){try{l()}catch(f){ar(i,o,f)}}var Ev=!1;function tS(i,o){if(vc=Ro,i=ms(),hc(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var M=0,Y=-1,J=-1,we=0,Be=0,Le=i,De=null;t:for(;;){for(var Xe;Le!==l||v!==0&&Le.nodeType!==3||(Y=M+v),Le!==b||f!==0&&Le.nodeType!==3||(J=M+f),Le.nodeType===3&&(M+=Le.nodeValue.length),(Xe=Le.firstChild)!==null;)De=Le,Le=Xe;for(;;){if(Le===i)break t;if(De===l&&++we===v&&(Y=M),De===b&&++Be===f&&(J=M),(Xe=Le.nextSibling)!==null)break;Le=De,De=Le.parentNode}Le=Xe}l=Y===-1||J===-1?null:{start:Y,end:J}}else l=null}l=l||{start:0,end:0}}else l=null;for(_c={focusedElem:i,selectionRange:l},Ro=!1,Ze=o;Ze!==null;)if(o=Ze,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ze=i;else for(;Ze!==null;){o=Ze;try{var Qe=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var rt=Qe.memoizedProps,fr=Qe.memoizedState,ce=o.stateNode,ne=ce.getSnapshotBeforeUpdate(o.elementType===o.type?rt:Jn(o.type,rt),fr);ce.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var pe=o.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ge){ar(o,o.return,Ge)}if(i=o.sibling,i!==null){i.return=o.return,Ze=i;break}Ze=o.return}return Qe=Ev,Ev=!1,Qe}function Ya(i,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&i)===i){var b=v.destroy;v.destroy=void 0,b!==void 0&&af(o,l,b)}v=v.next}while(v!==f)}}function Cu(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function lf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function Cv(i){var o=i.alternate;o!==null&&(i.alternate=null,Cv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[bi],delete o[Na],delete o[Tc],delete o[LT],delete o[NT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Av(i){return i.tag===5||i.tag===3||i.tag===4}function Pv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Av(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function uf(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=nu));else if(f!==4&&(i=i.child,i!==null))for(uf(i,o,l),i=i.sibling;i!==null;)uf(i,o,l),i=i.sibling}function hf(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(hf(i,o,l),i=i.sibling;i!==null;)hf(i,o,l),i=i.sibling}var Or=null,ei=!1;function Ts(i,o,l){for(l=l.child;l!==null;)Rv(i,o,l),l=l.sibling}function Rv(i,o,l){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Dr,l)}catch{}switch(l.tag){case 5:qr||Ko(l,o);case 6:var f=Or,v=ei;Or=null,Ts(i,o,l),Or=f,ei=v,Or!==null&&(ei?(i=Or,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Or.removeChild(l.stateNode));break;case 18:Or!==null&&(ei?(i=Or,l=l.stateNode,i.nodeType===8?wc(i.parentNode,l):i.nodeType===1&&wc(i,l),js(i)):wc(Or,l.stateNode));break;case 4:f=Or,v=ei,Or=l.stateNode.containerInfo,ei=!0,Ts(i,o,l),Or=f,ei=v;break;case 0:case 11:case 14:case 15:if(!qr&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){v=f=f.next;do{var b=v,M=b.destroy;b=b.tag,M!==void 0&&(b&2||b&4)&&af(l,o,M),v=v.next}while(v!==f)}Ts(i,o,l);break;case 1:if(!qr&&(Ko(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(Y){ar(l,o,Y)}Ts(i,o,l);break;case 21:Ts(i,o,l);break;case 22:l.mode&1?(qr=(f=qr)||l.memoizedState!==null,Ts(i,o,l),qr=f):Ts(i,o,l);break;default:Ts(i,o,l)}}function Iv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new eS),o.forEach(function(f){var v=hS.bind(null,i,f);l.has(f)||(l.add(f),f.then(v,v))})}}function ti(i,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];try{var b=i,M=o,Y=M;e:for(;Y!==null;){switch(Y.tag){case 5:Or=Y.stateNode,ei=!1;break e;case 3:Or=Y.stateNode.containerInfo,ei=!0;break e;case 4:Or=Y.stateNode.containerInfo,ei=!0;break e}Y=Y.return}if(Or===null)throw Error(r(160));Rv(b,M,v),Or=null,ei=!1;var J=v.alternate;J!==null&&(J.return=null),v.return=null}catch(we){ar(v,o,we)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Mv(o,i),o=o.sibling}function Mv(i,o){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ti(o,i),Si(i),f&4){try{Ya(3,i,i.return),Cu(3,i)}catch(rt){ar(i,i.return,rt)}try{Ya(5,i,i.return)}catch(rt){ar(i,i.return,rt)}}break;case 1:ti(o,i),Si(i),f&512&&l!==null&&Ko(l,l.return);break;case 5:if(ti(o,i),Si(i),f&512&&l!==null&&Ko(l,l.return),i.flags&32){var v=i.stateNode;try{Mt(v,"")}catch(rt){ar(i,i.return,rt)}}if(f&4&&(v=i.stateNode,v!=null)){var b=i.memoizedProps,M=l!==null?l.memoizedProps:b,Y=i.type,J=i.updateQueue;if(i.updateQueue=null,J!==null)try{Y==="input"&&b.type==="radio"&&b.name!=null&&tt(v,b),Ct(Y,M);var we=Ct(Y,b);for(M=0;M<J.length;M+=2){var Be=J[M],Le=J[M+1];Be==="style"?Xt(v,Le):Be==="dangerouslySetInnerHTML"?Ln(v,Le):Be==="children"?Mt(v,Le):L(v,Be,Le,we)}switch(Y){case"input":at(v,b);break;case"textarea":on(v,b);break;case"select":var De=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var Xe=b.value;Xe!=null?vr(v,!!b.multiple,Xe,!1):De!==!!b.multiple&&(b.defaultValue!=null?vr(v,!!b.multiple,b.defaultValue,!0):vr(v,!!b.multiple,b.multiple?[]:"",!1))}v[Na]=b}catch(rt){ar(i,i.return,rt)}}break;case 6:if(ti(o,i),Si(i),f&4){if(i.stateNode===null)throw Error(r(162));v=i.stateNode,b=i.memoizedProps;try{v.nodeValue=b}catch(rt){ar(i,i.return,rt)}}break;case 3:if(ti(o,i),Si(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{js(o.containerInfo)}catch(rt){ar(i,i.return,rt)}break;case 4:ti(o,i),Si(i);break;case 13:ti(o,i),Si(i),v=i.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(df=It())),f&4&&Iv(i);break;case 22:if(Be=l!==null&&l.memoizedState!==null,i.mode&1?(qr=(we=qr)||Be,ti(o,i),qr=we):ti(o,i),Si(i),f&8192){if(we=i.memoizedState!==null,(i.stateNode.isHidden=we)&&!Be&&i.mode&1)for(Ze=i,Be=i.child;Be!==null;){for(Le=Ze=Be;Ze!==null;){switch(De=Ze,Xe=De.child,De.tag){case 0:case 11:case 14:case 15:Ya(4,De,De.return);break;case 1:Ko(De,De.return);var Qe=De.stateNode;if(typeof Qe.componentWillUnmount=="function"){f=De,l=De.return;try{o=f,Qe.props=o.memoizedProps,Qe.state=o.memoizedState,Qe.componentWillUnmount()}catch(rt){ar(f,l,rt)}}break;case 5:Ko(De,De.return);break;case 22:if(De.memoizedState!==null){Dv(Le);continue}}Xe!==null?(Xe.return=De,Ze=Xe):Dv(Le)}Be=Be.sibling}e:for(Be=null,Le=i;;){if(Le.tag===5){if(Be===null){Be=Le;try{v=Le.stateNode,we?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(Y=Le.stateNode,J=Le.memoizedProps.style,M=J!=null&&J.hasOwnProperty("display")?J.display:null,Y.style.display=kr("display",M))}catch(rt){ar(i,i.return,rt)}}}else if(Le.tag===6){if(Be===null)try{Le.stateNode.nodeValue=we?"":Le.memoizedProps}catch(rt){ar(i,i.return,rt)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===i)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===i)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===i)break e;Be===Le&&(Be=null),Le=Le.return}Be===Le&&(Be=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:ti(o,i),Si(i),f&4&&Iv(i);break;case 21:break;default:ti(o,i),Si(i)}}function Si(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Av(l)){var f=l;break e}l=l.return}throw Error(r(160))}switch(f.tag){case 5:var v=f.stateNode;f.flags&32&&(Mt(v,""),f.flags&=-33);var b=Pv(i);hf(i,b,v);break;case 3:case 4:var M=f.stateNode.containerInfo,Y=Pv(i);uf(i,Y,M);break;default:throw Error(r(161))}}catch(J){ar(i,i.return,J)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function rS(i,o,l){Ze=i,kv(i)}function kv(i,o,l){for(var f=(i.mode&1)!==0;Ze!==null;){var v=Ze,b=v.child;if(v.tag===22&&f){var M=v.memoizedState!==null||Eu;if(!M){var Y=v.alternate,J=Y!==null&&Y.memoizedState!==null||qr;Y=Eu;var we=qr;if(Eu=M,(qr=J)&&!we)for(Ze=v;Ze!==null;)M=Ze,J=M.child,M.tag===22&&M.memoizedState!==null?Bv(v):J!==null?(J.return=M,Ze=J):Bv(v);for(;b!==null;)Ze=b,kv(b),b=b.sibling;Ze=v,Eu=Y,qr=we}Fv(i)}else v.subtreeFlags&8772&&b!==null?(b.return=v,Ze=b):Fv(i)}}function Fv(i){for(;Ze!==null;){var o=Ze;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:qr||Cu(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!qr)if(l===null)f.componentDidMount();else{var v=o.elementType===o.type?l.memoizedProps:Jn(o.type,l.memoizedProps);f.componentDidUpdate(v,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var b=o.updateQueue;b!==null&&Dy(o,b,f);break;case 3:var M=o.updateQueue;if(M!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Dy(o,M,l)}break;case 5:var Y=o.stateNode;if(l===null&&o.flags&4){l=Y;var J=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&l.focus();break;case"img":J.src&&(l.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var we=o.alternate;if(we!==null){var Be=we.memoizedState;if(Be!==null){var Le=Be.dehydrated;Le!==null&&js(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}qr||o.flags&512&&lf(o)}catch(De){ar(o,o.return,De)}}if(o===i){Ze=null;break}if(l=o.sibling,l!==null){l.return=o.return,Ze=l;break}Ze=o.return}}function Dv(i){for(;Ze!==null;){var o=Ze;if(o===i){Ze=null;break}var l=o.sibling;if(l!==null){l.return=o.return,Ze=l;break}Ze=o.return}}function Bv(i){for(;Ze!==null;){var o=Ze;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Cu(4,o)}catch(J){ar(o,l,J)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var v=o.return;try{f.componentDidMount()}catch(J){ar(o,v,J)}}var b=o.return;try{lf(o)}catch(J){ar(o,b,J)}break;case 5:var M=o.return;try{lf(o)}catch(J){ar(o,M,J)}}}catch(J){ar(o,o.return,J)}if(o===i){Ze=null;break}var Y=o.sibling;if(Y!==null){Y.return=o.return,Ze=Y;break}Ze=o.return}}var nS=Math.ceil,Au=X.ReactCurrentDispatcher,cf=X.ReactCurrentOwner,Vn=X.ReactCurrentBatchConfig,Ft=0,Rr=null,gr=null,Lr=0,Mn=0,Zo=vs(0),wr=0,Ka=null,eo=0,Pu=0,ff=0,Za=null,dn=null,df=0,Qo=1/0,qi=null,Ru=!1,pf=null,Ss=null,Iu=!1,Es=null,Mu=0,Qa=0,mf=null,ku=-1,Fu=0;function nn(){return Ft&6?It():ku!==-1?ku:ku=It()}function Cs(i){return i.mode&1?Ft&2&&Lr!==0?Lr&-Lr:GT.transition!==null?(Fu===0&&(Fu=xa()),Fu):(i=Ot,i!==0||(i=window.event,i=i===void 0?16:Xl(i.type)),i):1}function ri(i,o,l,f){if(50<Qa)throw Qa=0,mf=null,Error(r(185));us(i,l,f),(!(Ft&2)||i!==Rr)&&(i===Rr&&(!(Ft&2)&&(Pu|=l),wr===4&&As(i,Lr)),pn(i,f),l===1&&Ft===0&&!(o.mode&1)&&(Qo=It()+500,au&&xs()))}function pn(i,o){var l=i.callbackNode;sc(i,o);var f=Gi(i,i===Rr?Lr:0);if(f===0)l!==null&&Jr(l),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(l!=null&&Jr(l),o===1)i.tag===0?UT(Lv.bind(null,i)):wy(Lv.bind(null,i)),BT(function(){!(Ft&6)&&xs()}),l=null;else{switch(Ao(f)){case 1:l=Ui;break;case 4:l=To;break;case 16:l=So;break;case 536870912:l=wn;break;default:l=So}l=Vv(l,Ov.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Ov(i,o){if(ku=-1,Fu=0,Ft&6)throw Error(r(327));var l=i.callbackNode;if(Jo()&&i.callbackNode!==l)return null;var f=Gi(i,i===Rr?Lr:0);if(f===0)return null;if(f&30||f&i.expiredLanes||o)o=Du(i,f);else{o=f;var v=Ft;Ft|=2;var b=Uv();(Rr!==i||Lr!==o)&&(qi=null,Qo=It()+500,ro(i,o));do try{oS();break}catch(Y){Nv(i,Y)}while(!0);kc(),Au.current=b,Ft=v,gr!==null?o=0:(Rr=null,Lr=0,o=wr)}if(o!==0){if(o===2&&(v=_a(i),v!==0&&(f=v,o=gf(i,v))),o===1)throw l=Ka,ro(i,0),As(i,f),pn(i,It()),l;if(o===6)As(i,f);else{if(v=i.current.alternate,!(f&30)&&!iS(v)&&(o=Du(i,f),o===2&&(b=_a(i),b!==0&&(f=b,o=gf(i,b))),o===1))throw l=Ka,ro(i,0),As(i,f),pn(i,It()),l;switch(i.finishedWork=v,i.finishedLanes=f,o){case 0:case 1:throw Error(r(345));case 2:no(i,dn,qi);break;case 3:if(As(i,f),(f&130023424)===f&&(o=df+500-It(),10<o)){if(Gi(i,0)!==0)break;if(v=i.suspendedLanes,(v&f)!==f){nn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=bc(no.bind(null,i,dn,qi),o);break}no(i,dn,qi);break;case 4:if(As(i,f),(f&4194240)===f)break;for(o=i.eventTimes,v=-1;0<f;){var M=31-Sn(f);b=1<<M,M=o[M],M>v&&(v=M),f&=~b}if(f=v,f=It()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*nS(f/1960))-f,10<f){i.timeoutHandle=bc(no.bind(null,i,dn,qi),f);break}no(i,dn,qi);break;case 5:no(i,dn,qi);break;default:throw Error(r(329))}}}return pn(i,It()),i.callbackNode===l?Ov.bind(null,i):null}function gf(i,o){var l=Za;return i.current.memoizedState.isDehydrated&&(ro(i,o).flags|=256),i=Du(i,o),i!==2&&(o=dn,dn=l,o!==null&&yf(o)),i}function yf(i){dn===null?dn=i:dn.push.apply(dn,i)}function iS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var v=l[f],b=v.getSnapshot;v=v.value;try{if(!Re(b(),v))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function As(i,o){for(o&=~ff,o&=~Pu,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Sn(o),f=1<<l;i[l]=-1,o&=~f}}function Lv(i){if(Ft&6)throw Error(r(327));Jo();var o=Gi(i,0);if(!(o&1))return pn(i,It()),null;var l=Du(i,o);if(i.tag!==0&&l===2){var f=_a(i);f!==0&&(o=f,l=gf(i,f))}if(l===1)throw l=Ka,ro(i,0),As(i,o),pn(i,It()),l;if(l===6)throw Error(r(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,no(i,dn,qi),pn(i,It()),null}function vf(i,o){var l=Ft;Ft|=1;try{return i(o)}finally{Ft=l,Ft===0&&(Qo=It()+500,au&&xs())}}function to(i){Es!==null&&Es.tag===0&&!(Ft&6)&&Jo();var o=Ft;Ft|=1;var l=Vn.transition,f=Ot;try{if(Vn.transition=null,Ot=1,i)return i()}finally{Ot=f,Vn.transition=l,Ft=o,!(Ft&6)&&xs()}}function _f(){Mn=Zo.current,Zt(Zo)}function ro(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,DT(l)),gr!==null)for(l=gr.return;l!==null;){var f=l;switch(Ac(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&su();break;case 3:qo(),Zt(hn),Zt(Vr),Gc();break;case 5:Nc(f);break;case 4:qo();break;case 13:Zt(nr);break;case 19:Zt(nr);break;case 10:Fc(f.type._context);break;case 22:case 23:_f()}l=l.return}if(Rr=i,gr=i=Ps(i.current,null),Lr=Mn=o,wr=0,Ka=null,ff=Pu=eo=0,dn=Za=null,Zs!==null){for(o=0;o<Zs.length;o++)if(l=Zs[o],f=l.interleaved,f!==null){l.interleaved=null;var v=f.next,b=l.pending;if(b!==null){var M=b.next;b.next=v,f.next=M}l.pending=f}Zs=null}return i}function Nv(i,o){do{var l=gr;try{if(kc(),yu.current=bu,vu){for(var f=ir.memoizedState;f!==null;){var v=f.queue;v!==null&&(v.pending=null),f=f.next}vu=!1}if(Js=0,Pr=br=ir=null,$a=!1,Va=0,cf.current=null,l===null||l.return===null){wr=1,Ka=o,gr=null;break}e:{var b=i,M=l.return,Y=l,J=o;if(o=Lr,Y.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var we=J,Be=Y,Le=Be.tag;if(!(Be.mode&1)&&(Le===0||Le===11||Le===15)){var De=Be.alternate;De?(Be.updateQueue=De.updateQueue,Be.memoizedState=De.memoizedState,Be.lanes=De.lanes):(Be.updateQueue=null,Be.memoizedState=null)}var Xe=uv(M);if(Xe!==null){Xe.flags&=-257,hv(Xe,M,Y,b,o),Xe.mode&1&&lv(b,we,o),o=Xe,J=we;var Qe=o.updateQueue;if(Qe===null){var rt=new Set;rt.add(J),o.updateQueue=rt}else Qe.add(J);break e}else{if(!(o&1)){lv(b,we,o),xf();break e}J=Error(r(426))}}else if(Qt&&Y.mode&1){var fr=uv(M);if(fr!==null){!(fr.flags&65536)&&(fr.flags|=256),hv(fr,M,Y,b,o),Ic(Yo(J,Y));break e}}b=J=Yo(J,Y),wr!==4&&(wr=2),Za===null?Za=[b]:Za.push(b),b=M;do{switch(b.tag){case 3:b.flags|=65536,o&=-o,b.lanes|=o;var ce=ov(b,J,o);Fy(b,ce);break e;case 1:Y=J;var ne=b.type,pe=b.stateNode;if(!(b.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Ss===null||!Ss.has(pe)))){b.flags|=65536,o&=-o,b.lanes|=o;var Ge=av(b,Y,o);Fy(b,Ge);break e}}b=b.return}while(b!==null)}Hv(l)}catch(it){o=it,gr===l&&l!==null&&(gr=l=l.return);continue}break}while(!0)}function Uv(){var i=Au.current;return Au.current=bu,i===null?bu:i}function xf(){(wr===0||wr===3||wr===2)&&(wr=4),Rr===null||!(eo&268435455)&&!(Pu&268435455)||As(Rr,Lr)}function Du(i,o){var l=Ft;Ft|=2;var f=Uv();(Rr!==i||Lr!==o)&&(qi=null,ro(i,o));do try{sS();break}catch(v){Nv(i,v)}while(!0);if(kc(),Ft=l,Au.current=f,gr!==null)throw Error(r(261));return Rr=null,Lr=0,wr}function sS(){for(;gr!==null;)Gv(gr)}function oS(){for(;gr!==null&&!va();)Gv(gr)}function Gv(i){var o=$v(i.alternate,i,Mn);i.memoizedProps=i.pendingProps,o===null?Hv(i):gr=o,cf.current=null}function Hv(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=JT(l,o),l!==null){l.flags&=32767,gr=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{wr=6,gr=null;return}}else if(l=QT(l,o,Mn),l!==null){gr=l;return}if(o=o.sibling,o!==null){gr=o;return}gr=o=i}while(o!==null);wr===0&&(wr=5)}function no(i,o,l){var f=Ot,v=Vn.transition;try{Vn.transition=null,Ot=1,aS(i,o,l,f)}finally{Vn.transition=v,Ot=f}return null}function aS(i,o,l,f){do Jo();while(Es!==null);if(Ft&6)throw Error(r(327));l=i.finishedWork;var v=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0;var b=l.lanes|l.childLanes;if(jl(i,b),i===Rr&&(gr=Rr=null,Lr=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Iu||(Iu=!0,Vv(So,function(){return Jo(),null})),b=(l.flags&15990)!==0,l.subtreeFlags&15990||b){b=Vn.transition,Vn.transition=null;var M=Ot;Ot=1;var Y=Ft;Ft|=4,cf.current=null,tS(i,l),Mv(l,i),AT(_c),Ro=!!vc,_c=vc=null,i.current=l,rS(l),un(),Ft=Y,Ot=M,Vn.transition=b}else i.current=l;if(Iu&&(Iu=!1,Es=i,Mu=v),b=i.pendingLanes,b===0&&(Ss=null),tc(l.stateNode),pn(i,It()),o!==null)for(f=i.onRecoverableError,l=0;l<o.length;l++)v=o[l],f(v.value,{componentStack:v.stack,digest:v.digest});if(Ru)throw Ru=!1,i=pf,pf=null,i;return Mu&1&&i.tag!==0&&Jo(),b=i.pendingLanes,b&1?i===mf?Qa++:(Qa=0,mf=i):Qa=0,xs(),null}function Jo(){if(Es!==null){var i=Ao(Mu),o=Vn.transition,l=Ot;try{if(Vn.transition=null,Ot=16>i?16:i,Es===null)var f=!1;else{if(i=Es,Es=null,Mu=0,Ft&6)throw Error(r(331));var v=Ft;for(Ft|=4,Ze=i.current;Ze!==null;){var b=Ze,M=b.child;if(Ze.flags&16){var Y=b.deletions;if(Y!==null){for(var J=0;J<Y.length;J++){var we=Y[J];for(Ze=we;Ze!==null;){var Be=Ze;switch(Be.tag){case 0:case 11:case 15:Ya(8,Be,b)}var Le=Be.child;if(Le!==null)Le.return=Be,Ze=Le;else for(;Ze!==null;){Be=Ze;var De=Be.sibling,Xe=Be.return;if(Cv(Be),Be===we){Ze=null;break}if(De!==null){De.return=Xe,Ze=De;break}Ze=Xe}}}var Qe=b.alternate;if(Qe!==null){var rt=Qe.child;if(rt!==null){Qe.child=null;do{var fr=rt.sibling;rt.sibling=null,rt=fr}while(rt!==null)}}Ze=b}}if(b.subtreeFlags&2064&&M!==null)M.return=b,Ze=M;else e:for(;Ze!==null;){if(b=Ze,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Ya(9,b,b.return)}var ce=b.sibling;if(ce!==null){ce.return=b.return,Ze=ce;break e}Ze=b.return}}var ne=i.current;for(Ze=ne;Ze!==null;){M=Ze;var pe=M.child;if(M.subtreeFlags&2064&&pe!==null)pe.return=M,Ze=pe;else e:for(M=ne;Ze!==null;){if(Y=Ze,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:Cu(9,Y)}}catch(it){ar(Y,Y.return,it)}if(Y===M){Ze=null;break e}var Ge=Y.sibling;if(Ge!==null){Ge.return=Y.return,Ze=Ge;break e}Ze=Y.return}}if(Ft=v,xs(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Dr,i)}catch{}f=!0}return f}finally{Ot=l,Vn.transition=o}}return!1}function jv(i,o,l){o=Yo(l,o),o=ov(i,o,1),i=ws(i,o,1),o=nn(),i!==null&&(us(i,1,o),pn(i,o))}function ar(i,o,l){if(i.tag===3)jv(i,i,l);else for(;o!==null;){if(o.tag===3){jv(o,i,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ss===null||!Ss.has(f))){i=Yo(l,i),i=av(o,i,1),o=ws(o,i,1),i=nn(),o!==null&&(us(o,1,i),pn(o,i));break}}o=o.return}}function lS(i,o,l){var f=i.pingCache;f!==null&&f.delete(o),o=nn(),i.pingedLanes|=i.suspendedLanes&l,Rr===i&&(Lr&l)===l&&(wr===4||wr===3&&(Lr&130023424)===Lr&&500>It()-df?ro(i,0):ff|=l),pn(i,o)}function zv(i,o){o===0&&(i.mode&1?(o=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):o=1);var l=nn();i=Vi(i,o),i!==null&&(us(i,o,l),pn(i,l))}function uS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),zv(i,l)}function hS(i,o){var l=0;switch(i.tag){case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(o),zv(i,l)}var $v;$v=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||hn.current)fn=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return fn=!1,ZT(i,o,l);fn=!!(i.flags&131072)}else fn=!1,Qt&&o.flags&1048576&&Ty(o,uu,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Su(i,o),i=o.pendingProps;var v=Ho(o,Vr.current);Xo(o,l),v=zc(null,o,f,i,v,l);var b=$c();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,cn(f)?(b=!0,ou(o)):b=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Oc(o),v.updater=wu,o.stateNode=v,v._reactInternals=o,Kc(o,f,i,l),o=ef(null,o,f,!0,b,l)):(o.tag=0,Qt&&b&&Cc(o),rn(null,o,v,l),o=o.child),o;case 16:f=o.elementType;e:{switch(Su(i,o),i=o.pendingProps,v=f._init,f=v(f._payload),o.type=f,v=o.tag=fS(f),i=Jn(f,i),v){case 0:o=Jc(null,o,f,i,l);break e;case 1:o=gv(null,o,f,i,l);break e;case 11:o=cv(null,o,f,i,l);break e;case 14:o=fv(null,o,f,Jn(f.type,i),l);break e}throw Error(r(306,f,""))}return o;case 0:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Jn(f,v),Jc(i,o,f,v,l);case 1:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Jn(f,v),gv(i,o,f,v,l);case 3:e:{if(yv(o),i===null)throw Error(r(387));f=o.pendingProps,b=o.memoizedState,v=b.element,ky(i,o),mu(o,f,null,l);var M=o.memoizedState;if(f=M.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){v=Yo(Error(r(423)),o),o=vv(i,o,f,l,v);break e}else if(f!==v){v=Yo(Error(r(424)),o),o=vv(i,o,f,l,v);break e}else for(In=ys(o.stateNode.containerInfo.firstChild),Rn=o,Qt=!0,Qn=null,l=Iy(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if($o(),f===v){o=Xi(i,o,l);break e}rn(i,o,f,l)}o=o.child}return o;case 5:return By(o),i===null&&Rc(o),f=o.type,v=o.pendingProps,b=i!==null?i.memoizedProps:null,M=v.children,xc(f,v)?M=null:b!==null&&xc(f,b)&&(o.flags|=32),mv(i,o),rn(i,o,M,l),o.child;case 6:return i===null&&Rc(o),null;case 13:return _v(i,o,l);case 4:return Lc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Vo(o,null,f,l):rn(i,o,f,l),o.child;case 11:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Jn(f,v),cv(i,o,f,v,l);case 7:return rn(i,o,o.pendingProps,l),o.child;case 8:return rn(i,o,o.pendingProps.children,l),o.child;case 12:return rn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,v=o.pendingProps,b=o.memoizedProps,M=v.value,Yt(fu,f._currentValue),f._currentValue=M,b!==null)if(Re(b.value,M)){if(b.children===v.children&&!hn.current){o=Xi(i,o,l);break e}}else for(b=o.child,b!==null&&(b.return=o);b!==null;){var Y=b.dependencies;if(Y!==null){M=b.child;for(var J=Y.firstContext;J!==null;){if(J.context===f){if(b.tag===1){J=Wi(-1,l&-l),J.tag=2;var we=b.updateQueue;if(we!==null){we=we.shared;var Be=we.pending;Be===null?J.next=J:(J.next=Be.next,Be.next=J),we.pending=J}}b.lanes|=l,J=b.alternate,J!==null&&(J.lanes|=l),Dc(b.return,l,o),Y.lanes|=l;break}J=J.next}}else if(b.tag===10)M=b.type===o.type?null:b.child;else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=l,Y=M.alternate,Y!==null&&(Y.lanes|=l),Dc(M,l,o),M=b.sibling}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===o){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}rn(i,o,v.children,l),o=o.child}return o;case 9:return v=o.type,f=o.pendingProps.children,Xo(o,l),v=zn(v),f=f(v),o.flags|=1,rn(i,o,f,l),o.child;case 14:return f=o.type,v=Jn(f,o.pendingProps),v=Jn(f.type,v),fv(i,o,f,v,l);case 15:return dv(i,o,o.type,o.pendingProps,l);case 17:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:Jn(f,v),Su(i,o),o.tag=1,cn(f)?(i=!0,ou(o)):i=!1,Xo(o,l),iv(o,f,v),Kc(o,f,v,l),ef(null,o,f,!0,i,l);case 19:return bv(i,o,l);case 22:return pv(i,o,l)}throw Error(r(156,o.tag))};function Vv(i,o){return ls(i,o)}function cS(i,o,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(i,o,l,f){return new cS(i,o,l,f)}function bf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fS(i){if(typeof i=="function")return bf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ee)return 11;if(i===Ae)return 14}return 2}function Ps(i,o){var l=i.alternate;return l===null?(l=Wn(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Bu(i,o,l,f,v,b){var M=2;if(f=i,typeof i=="function")bf(i)&&(M=1);else if(typeof i=="string")M=5;else e:switch(i){case G:return io(l.children,v,b,o);case ie:M=8,v|=8;break;case re:return i=Wn(12,l,o,v|2),i.elementType=re,i.lanes=b,i;case me:return i=Wn(13,l,o,v),i.elementType=me,i.lanes=b,i;case ue:return i=Wn(19,l,o,v),i.elementType=ue,i.lanes=b,i;case j:return Ou(l,v,b,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _e:M=10;break e;case oe:M=9;break e;case ee:M=11;break e;case Ae:M=14;break e;case H:M=16,f=null;break e}throw Error(r(130,i==null?i:typeof i,""))}return o=Wn(M,l,o,v),o.elementType=i,o.type=f,o.lanes=b,o}function io(i,o,l,f){return i=Wn(7,i,f,o),i.lanes=l,i}function Ou(i,o,l,f){return i=Wn(22,i,f,o),i.elementType=j,i.lanes=l,i.stateNode={isHidden:!1},i}function wf(i,o,l){return i=Wn(6,i,null,o),i.lanes=l,i}function Tf(i,o,l){return o=Wn(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function dS(i,o,l,f,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ba(0),this.expirationTimes=ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.identifierPrefix=f,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Sf(i,o,l,f,v,b,M,Y,J){return i=new dS(i,o,l,Y,J),o===1?(o=1,b===!0&&(o|=8)):o=0,b=Wn(3,null,null,o),i.current=b,b.stateNode=i,b.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(b),i}function pS(i,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:f==null?null:""+f,children:i,containerInfo:o,implementation:l}}function Wv(i){if(!i)return _s;i=i._reactInternals;e:{if(Vt(i)!==i||i.tag!==1)throw Error(r(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(cn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(i.tag===1){var l=i.type;if(cn(l))return xy(i,l,o)}return o}function Xv(i,o,l,f,v,b,M,Y,J){return i=Sf(l,f,!0,i,v,b,M,Y,J),i.context=Wv(null),l=i.current,f=nn(),v=Cs(l),b=Wi(f,v),b.callback=o??null,ws(l,b,v),i.current.lanes=v,us(i,v,f),pn(i,f),i}function Lu(i,o,l,f){var v=o.current,b=nn(),M=Cs(v);return l=Wv(l),o.context===null?o.context=l:o.pendingContext=l,o=Wi(b,M),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=ws(v,o,M),i!==null&&(ri(i,v,M,b),pu(i,v,M)),M}function Nu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function qv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Ef(i,o){qv(i,o),(i=i.alternate)&&qv(i,o)}function mS(){return null}var Yv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Cf(i){this._internalRoot=i}Uu.prototype.render=Cf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));Lu(i,o,null,null)},Uu.prototype.unmount=Cf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;to(function(){Lu(null,i,null,null)}),o[Hi]=null}};function Uu(i){this._internalRoot=i}Uu.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ta();i={blockedOn:null,target:i,priority:o};for(var l=0;l<qt.length&&o!==0&&o<qt[l].priority;l++);qt.splice(l,0,i),l===0&&Vl(i)}};function Af(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Gu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Kv(){}function gS(i,o,l,f,v){if(v){if(typeof f=="function"){var b=f;f=function(){var we=Nu(M);b.call(we)}}var M=Xv(o,f,i,0,null,!1,!1,"",Kv);return i._reactRootContainer=M,i[Hi]=M.current,Oa(i.nodeType===8?i.parentNode:i),to(),M}for(;v=i.lastChild;)i.removeChild(v);if(typeof f=="function"){var Y=f;f=function(){var we=Nu(J);Y.call(we)}}var J=Sf(i,0,!1,null,null,!1,!1,"",Kv);return i._reactRootContainer=J,i[Hi]=J.current,Oa(i.nodeType===8?i.parentNode:i),to(function(){Lu(o,J,l,f)}),J}function Hu(i,o,l,f,v){var b=l._reactRootContainer;if(b){var M=b;if(typeof v=="function"){var Y=v;v=function(){var J=Nu(M);Y.call(J)}}Lu(o,M,i,v)}else M=gS(l,o,i,v,f);return Nu(M)}zl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=_i(o.pendingLanes);l!==0&&(Ns(o,l|1),pn(o,It()),!(Ft&6)&&(Qo=It()+500,xs()))}break;case 13:to(function(){var f=Vi(i,1);if(f!==null){var v=nn();ri(f,i,1,v)}}),Ef(i,1)}},hs=function(i){if(i.tag===13){var o=Vi(i,134217728);if(o!==null){var l=nn();ri(o,i,134217728,l)}Ef(i,134217728)}},wa=function(i){if(i.tag===13){var o=Cs(i),l=Vi(i,o);if(l!==null){var f=nn();ri(l,i,o,f)}Ef(i,o)}},Ta=function(){return Ot},$l=function(i,o){var l=Ot;try{return Ot=i,o()}finally{Ot=l}},mt=function(i,o,l){switch(o){case"input":if(at(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==i&&f.form===i.form){var v=iu(f);if(!v)throw Error(r(90));ft(f),at(f,v)}}}break;case"textarea":on(i,l);break;case"select":o=l.value,o!=null&&vr(i,!!l.multiple,o,!1)}},an=vf,pr=to;var yS={usingClientEntryPoint:!1,Events:[Ua,Uo,iu,Fr,is,vf]},Ja={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vS={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Un(i),i===null?null:i.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||mS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Dr=ju.inject(vS),Tn=ju}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS,mn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(o))throw Error(r(200));return pS(i,o,null,l)},mn.createRoot=function(i,o){if(!Af(i))throw Error(r(299));var l=!1,f="",v=Yv;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=Sf(i,1,!1,null,null,l,!1,f,v),i[Hi]=o.current,Oa(i.nodeType===8?i.parentNode:i),new Cf(o)},mn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=Un(o),i=i===null?null:i.stateNode,i},mn.flushSync=function(i){return to(i)},mn.hydrate=function(i,o,l){if(!Gu(o))throw Error(r(200));return Hu(null,i,o,!0,l)},mn.hydrateRoot=function(i,o,l){if(!Af(i))throw Error(r(405));var f=l!=null&&l.hydratedSources||null,v=!1,b="",M=Yv;if(l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(M=l.onRecoverableError)),o=Xv(o,null,i,1,l??null,v,!1,b,M),i[Hi]=o.current,Oa(i),f)for(i=0;i<f.length;i++)l=f[i],v=l._getVersion,v=v(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,v]:o.mutableSourceEagerHydrationData.push(l,v);return new Uu(o)},mn.render=function(i,o,l){if(!Gu(o))throw Error(r(200));return Hu(null,i,o,!1,l)},mn.unmountComponentAtNode=function(i){if(!Gu(i))throw Error(r(40));return i._reactRootContainer?(to(function(){Hu(null,null,i,!1,function(){i._reactRootContainer=null,i[Hi]=null})}),!0):!1},mn.unstable_batchedUpdates=vf,mn.unstable_renderSubtreeIntoContainer=function(i,o,l,f){if(!Gu(l))throw Error(r(200));if(i==null||i._reactInternals===void 0)throw Error(r(38));return Hu(i,o,l,!1,f)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var i0;function RS(){if(i0)return If.exports;i0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),If.exports=PS(),If.exports}var s0;function IS(){if(s0)return zu;s0=1;var t=RS();return zu.createRoot=t.createRoot,zu.hydrateRoot=t.hydrateRoot,zu}var MS=IS(),ch=Mg(),_o=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(_o||{}),kg=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(kg||{}),Qm=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Qm||{}),Fe=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Fe||{}),fi=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(fi||{}),ze=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(ze||{}),ua=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(ua||{}),ht=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ht||{}),Jm=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Jm||{}),di=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(di||{}),Ji=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ji||{}),Mi=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Mi||{}),yi=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(yi||{}),Ai=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Ai||{}),Fg=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Fg||{}),qn=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(qn||{}),Tr=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Tr||{}),yr=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(yr||{}),Ri=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Ri||{});const kS={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},We={ADAPTER:kS,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Ff=/iPhone/i,o0=/iPod/i,a0=/iPad/i,l0=/\biOS-universal(?:.+)Mac\b/i,Df=/\bAndroid(?:.+)Mobile\b/i,u0=/Android/i,ea=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,$u=/Silk/i,Yi=/Windows Phone/i,h0=/\bWindows(?:.+)ARM\b/i,c0=/BlackBerry/i,f0=/BB10/i,d0=/Opera Mini/i,p0=/\b(CriOS|Chrome)(?:.+)Mobile/i,m0=/Mobile(?:.+)Firefox\b/i,g0=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function FS(t){return function(e){return e.test(t)}}function y0(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var s=FS(r),a={apple:{phone:s(Ff)&&!s(Yi),ipod:s(o0),tablet:!s(Ff)&&(s(a0)||g0(e))&&!s(Yi),universal:s(l0),device:(s(Ff)||s(o0)||s(a0)||s(l0)||g0(e))&&!s(Yi)},amazon:{phone:s(ea),tablet:!s(ea)&&s($u),device:s(ea)||s($u)},android:{phone:!s(Yi)&&s(ea)||!s(Yi)&&s(Df),tablet:!s(Yi)&&!s(ea)&&!s(Df)&&(s($u)||s(u0)),device:!s(Yi)&&(s(ea)||s($u)||s(Df)||s(u0))||s(/\bokhttp\b/i)},windows:{phone:s(Yi),tablet:s(h0),device:s(Yi)||s(h0)},other:{blackberry:s(c0),blackberry10:s(f0),opera:s(d0),firefox:s(m0),chrome:s(p0),device:s(c0)||s(f0)||s(d0)||s(m0)||s(p0)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const DS=y0.default??y0,Pi=DS(globalThis.navigator);We.RETINA_PREFIX=/@([0-9\.]+)x/;We.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Bf={exports:{}},v0;function BS(){return v0||(v0=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,p,m){this.fn=d,this.context=p,this.once=m||!1}function a(d,p,m,_,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var S=new s(m,_||d,x),E=r?r+p:p;return d._events[E]?d._events[E].fn?d._events[E]=[d._events[E],S]:d._events[E].push(S):(d._events[E]=S,d._eventsCount++),d}function u(d,p){--d._eventsCount===0?d._events=new n:delete d._events[p]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],m,_;if(this._eventsCount===0)return p;for(_ in m=this._events)e.call(m,_)&&p.push(r?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},c.prototype.listeners=function(p){var m=r?r+p:p,_=this._events[m];if(!_)return[];if(_.fn)return[_.fn];for(var x=0,S=_.length,E=new Array(S);x<S;x++)E[x]=_[x].fn;return E},c.prototype.listenerCount=function(p){var m=r?r+p:p,_=this._events[m];return _?_.fn?1:_.length:0},c.prototype.emit=function(p,m,_,x,S,E){var I=r?r+p:p;if(!this._events[I])return!1;var A=this._events[I],R=arguments.length,O,L;if(A.fn){switch(A.once&&this.removeListener(p,A.fn,void 0,!0),R){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,m),!0;case 3:return A.fn.call(A.context,m,_),!0;case 4:return A.fn.call(A.context,m,_,x),!0;case 5:return A.fn.call(A.context,m,_,x,S),!0;case 6:return A.fn.call(A.context,m,_,x,S,E),!0}for(L=1,O=new Array(R-1);L<R;L++)O[L-1]=arguments[L];A.fn.apply(A.context,O)}else{var X=A.length,N;for(L=0;L<X;L++)switch(A[L].once&&this.removeListener(p,A[L].fn,void 0,!0),R){case 1:A[L].fn.call(A[L].context);break;case 2:A[L].fn.call(A[L].context,m);break;case 3:A[L].fn.call(A[L].context,m,_);break;case 4:A[L].fn.call(A[L].context,m,_,x);break;default:if(!O)for(N=1,O=new Array(R-1);N<R;N++)O[N-1]=arguments[N];A[L].fn.apply(A[L].context,O)}}return!0},c.prototype.on=function(p,m,_){return a(this,p,m,_,!1)},c.prototype.once=function(p,m,_){return a(this,p,m,_,!0)},c.prototype.removeListener=function(p,m,_,x){var S=r?r+p:p;if(!this._events[S])return this;if(!m)return u(this,S),this;var E=this._events[S];if(E.fn)E.fn===m&&(!x||E.once)&&(!_||E.context===_)&&u(this,S);else{for(var I=0,A=[],R=E.length;I<R;I++)(E[I].fn!==m||x&&!E[I].once||_&&E[I].context!==_)&&A.push(E[I]);A.length?this._events[S]=A.length===1?A[0]:A:u(this,S)}return this},c.prototype.removeAllListeners=function(p){var m;return p?(m=r?r+p:p,this._events[m]&&u(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c}(Bf)),Bf.exports}var OS=BS();const ma=Il(OS);var Vu={exports:{}},_0;function LS(){if(_0)return Vu.exports;_0=1,Vu.exports=t,Vu.exports.default=t;function t(H,j,F){F=F||2;var K=j&&j.length,U=K?j[0]*F:H.length,B=e(H,0,U,F,!0),z=[];if(!B||B.next===B.prev)return z;var te,he,xe,Ce,Me,ke,Ne;if(K&&(B=d(H,j,B,F)),H.length>80*F){te=xe=H[0],he=Ce=H[1];for(var Oe=F;Oe<U;Oe+=F)Me=H[Oe],ke=H[Oe+1],Me<te&&(te=Me),ke<he&&(he=ke),Me>xe&&(xe=Me),ke>Ce&&(Ce=ke);Ne=Math.max(xe-te,Ce-he),Ne=Ne!==0?32767/Ne:0}return n(B,z,F,te,he,Ne,0),z}function e(H,j,F,K,U){var B,z;if(U===Ae(H,j,F,K)>0)for(B=j;B<F;B+=K)z=ee(B,H[B],H[B+1],z);else for(B=F-K;B>=j;B-=K)z=ee(B,H[B],H[B+1],z);return z&&X(z,z.next)&&(me(z),z=z.next),z}function r(H,j){if(!H)return H;j||(j=H);var F=H,K;do if(K=!1,!F.steiner&&(X(F,F.next)||L(F.prev,F,F.next)===0)){if(me(F),F=j=F.prev,F===F.next)break;K=!0}else F=F.next;while(K||F!==j);return j}function n(H,j,F,K,U,B,z){if(H){!z&&B&&S(H,K,U,B);for(var te=H,he,xe;H.prev!==H.next;){if(he=H.prev,xe=H.next,B?a(H,K,U,B):s(H)){j.push(he.i/F|0),j.push(H.i/F|0),j.push(xe.i/F|0),me(H),H=xe.next,te=xe.next;continue}if(H=xe,H===te){z?z===1?(H=u(r(H),j,F),n(H,j,F,K,U,B,2)):z===2&&c(H,j,F,K,U,B):n(r(H),j,F,K,U,B,1);break}}}}function s(H){var j=H.prev,F=H,K=H.next;if(L(j,F,K)>=0)return!1;for(var U=j.x,B=F.x,z=K.x,te=j.y,he=F.y,xe=K.y,Ce=U<B?U<z?U:z:B<z?B:z,Me=te<he?te<xe?te:xe:he<xe?he:xe,ke=U>B?U>z?U:z:B>z?B:z,Ne=te>he?te>xe?te:xe:he>xe?he:xe,Oe=K.next;Oe!==j;){if(Oe.x>=Ce&&Oe.x<=ke&&Oe.y>=Me&&Oe.y<=Ne&&R(U,te,B,he,z,xe,Oe.x,Oe.y)&&L(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.next}return!0}function a(H,j,F,K){var U=H.prev,B=H,z=H.next;if(L(U,B,z)>=0)return!1;for(var te=U.x,he=B.x,xe=z.x,Ce=U.y,Me=B.y,ke=z.y,Ne=te<he?te<xe?te:xe:he<xe?he:xe,Oe=Ce<Me?Ce<ke?Ce:ke:Me<ke?Me:ke,ot=te>he?te>xe?te:xe:he>xe?he:xe,ft=Ce>Me?Ce>ke?Ce:ke:Me>ke?Me:ke,St=I(Ne,Oe,j,F,K),Dt=I(ot,ft,j,F,K),je=H.prevZ,tt=H.nextZ;je&&je.z>=St&&tt&&tt.z<=Dt;){if(je.x>=Ne&&je.x<=ot&&je.y>=Oe&&je.y<=ft&&je!==U&&je!==z&&R(te,Ce,he,Me,xe,ke,je.x,je.y)&&L(je.prev,je,je.next)>=0||(je=je.prevZ,tt.x>=Ne&&tt.x<=ot&&tt.y>=Oe&&tt.y<=ft&&tt!==U&&tt!==z&&R(te,Ce,he,Me,xe,ke,tt.x,tt.y)&&L(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;je&&je.z>=St;){if(je.x>=Ne&&je.x<=ot&&je.y>=Oe&&je.y<=ft&&je!==U&&je!==z&&R(te,Ce,he,Me,xe,ke,je.x,je.y)&&L(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;tt&&tt.z<=Dt;){if(tt.x>=Ne&&tt.x<=ot&&tt.y>=Oe&&tt.y<=ft&&tt!==U&&tt!==z&&R(te,Ce,he,Me,xe,ke,tt.x,tt.y)&&L(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function u(H,j,F){var K=H;do{var U=K.prev,B=K.next.next;!X(U,B)&&N(U,K,K.next,B)&&re(U,B)&&re(B,U)&&(j.push(U.i/F|0),j.push(K.i/F|0),j.push(B.i/F|0),me(K),me(K.next),K=H=B),K=K.next}while(K!==H);return r(K)}function c(H,j,F,K,U,B){var z=H;do{for(var te=z.next.next;te!==z.prev;){if(z.i!==te.i&&O(z,te)){var he=oe(z,te);z=r(z,z.next),he=r(he,he.next),n(z,j,F,K,U,B,0),n(he,j,F,K,U,B,0);return}te=te.next}z=z.next}while(z!==H)}function d(H,j,F,K){var U=[],B,z,te,he,xe;for(B=0,z=j.length;B<z;B++)te=j[B]*K,he=B<z-1?j[B+1]*K:H.length,xe=e(H,te,he,K,!1),xe===xe.next&&(xe.steiner=!0),U.push(A(xe));for(U.sort(p),B=0;B<U.length;B++)F=m(U[B],F);return F}function p(H,j){return H.x-j.x}function m(H,j){var F=_(H,j);if(!F)return j;var K=oe(F,H);return r(K,K.next),r(F,F.next)}function _(H,j){var F=j,K=H.x,U=H.y,B=-1/0,z;do{if(U<=F.y&&U>=F.next.y&&F.next.y!==F.y){var te=F.x+(U-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(te<=K&&te>B&&(B=te,z=F.x<F.next.x?F:F.next,te===K))return z}F=F.next}while(F!==j);if(!z)return null;var he=z,xe=z.x,Ce=z.y,Me=1/0,ke;F=z;do K>=F.x&&F.x>=xe&&K!==F.x&&R(U<Ce?K:B,U,xe,Ce,U<Ce?B:K,U,F.x,F.y)&&(ke=Math.abs(U-F.y)/(K-F.x),re(F,H)&&(ke<Me||ke===Me&&(F.x>z.x||F.x===z.x&&x(z,F)))&&(z=F,Me=ke)),F=F.next;while(F!==he);return z}function x(H,j){return L(H.prev,H,j.prev)<0&&L(j.next,H,H.next)<0}function S(H,j,F,K){var U=H;do U.z===0&&(U.z=I(U.x,U.y,j,F,K)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==H);U.prevZ.nextZ=null,U.prevZ=null,E(U)}function E(H){var j,F,K,U,B,z,te,he,xe=1;do{for(F=H,H=null,B=null,z=0;F;){for(z++,K=F,te=0,j=0;j<xe&&(te++,K=K.nextZ,!!K);j++);for(he=xe;te>0||he>0&&K;)te!==0&&(he===0||!K||F.z<=K.z)?(U=F,F=F.nextZ,te--):(U=K,K=K.nextZ,he--),B?B.nextZ=U:H=U,U.prevZ=B,B=U;F=K}B.nextZ=null,xe*=2}while(z>1);return H}function I(H,j,F,K,U){return H=(H-F)*U|0,j=(j-K)*U|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,j=(j|j<<8)&16711935,j=(j|j<<4)&252645135,j=(j|j<<2)&858993459,j=(j|j<<1)&1431655765,H|j<<1}function A(H){var j=H,F=H;do(j.x<F.x||j.x===F.x&&j.y<F.y)&&(F=j),j=j.next;while(j!==H);return F}function R(H,j,F,K,U,B,z,te){return(U-z)*(j-te)>=(H-z)*(B-te)&&(H-z)*(K-te)>=(F-z)*(j-te)&&(F-z)*(B-te)>=(U-z)*(K-te)}function O(H,j){return H.next.i!==j.i&&H.prev.i!==j.i&&!ie(H,j)&&(re(H,j)&&re(j,H)&&_e(H,j)&&(L(H.prev,H,j.prev)||L(H,j.prev,j))||X(H,j)&&L(H.prev,H,H.next)>0&&L(j.prev,j,j.next)>0)}function L(H,j,F){return(j.y-H.y)*(F.x-j.x)-(j.x-H.x)*(F.y-j.y)}function X(H,j){return H.x===j.x&&H.y===j.y}function N(H,j,F,K){var U=G(L(H,j,F)),B=G(L(H,j,K)),z=G(L(F,K,H)),te=G(L(F,K,j));return!!(U!==B&&z!==te||U===0&&Z(H,F,j)||B===0&&Z(H,K,j)||z===0&&Z(F,H,K)||te===0&&Z(F,j,K))}function Z(H,j,F){return j.x<=Math.max(H.x,F.x)&&j.x>=Math.min(H.x,F.x)&&j.y<=Math.max(H.y,F.y)&&j.y>=Math.min(H.y,F.y)}function G(H){return H>0?1:H<0?-1:0}function ie(H,j){var F=H;do{if(F.i!==H.i&&F.next.i!==H.i&&F.i!==j.i&&F.next.i!==j.i&&N(F,F.next,H,j))return!0;F=F.next}while(F!==H);return!1}function re(H,j){return L(H.prev,H,H.next)<0?L(H,j,H.next)>=0&&L(H,H.prev,j)>=0:L(H,j,H.prev)<0||L(H,H.next,j)<0}function _e(H,j){var F=H,K=!1,U=(H.x+j.x)/2,B=(H.y+j.y)/2;do F.y>B!=F.next.y>B&&F.next.y!==F.y&&U<(F.next.x-F.x)*(B-F.y)/(F.next.y-F.y)+F.x&&(K=!K),F=F.next;while(F!==H);return K}function oe(H,j){var F=new ue(H.i,H.x,H.y),K=new ue(j.i,j.x,j.y),U=H.next,B=j.prev;return H.next=j,j.prev=H,F.next=U,U.prev=F,K.next=F,F.prev=K,B.next=K,K.prev=B,K}function ee(H,j,F,K){var U=new ue(H,j,F);return K?(U.next=K.next,U.prev=K,K.next.prev=U,K.next=U):(U.prev=U,U.next=U),U}function me(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function ue(H,j,F){this.i=H,this.x=j,this.y=F,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(H,j,F,K){var U=j&&j.length,B=U?j[0]*F:H.length,z=Math.abs(Ae(H,0,B,F));if(U)for(var te=0,he=j.length;te<he;te++){var xe=j[te]*F,Ce=te<he-1?j[te+1]*F:H.length;z-=Math.abs(Ae(H,xe,Ce,F))}var Me=0;for(te=0;te<K.length;te+=3){var ke=K[te]*F,Ne=K[te+1]*F,Oe=K[te+2]*F;Me+=Math.abs((H[ke]-H[Oe])*(H[Ne+1]-H[ke+1])-(H[ke]-H[Ne])*(H[Oe+1]-H[ke+1]))}return z===0&&Me===0?0:Math.abs((Me-z)/z)};function Ae(H,j,F,K){for(var U=0,B=j,z=F-K;B<F;B+=K)U+=(H[z]-H[B])*(H[B+1]+H[z+1]),z=B;return U}return t.flatten=function(H){for(var j=H[0][0].length,F={vertices:[],holes:[],dimensions:j},K=0,U=0;U<H.length;U++){for(var B=0;B<H[U].length;B++)for(var z=0;z<j;z++)F.vertices.push(H[U][B][z]);U>0&&(K+=H[U-1].length,F.holes.push(K))}return F},Vu.exports}var NS=LS();const ub=Il(NS);var so={},cl={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var US=cl.exports,x0;function GS(){return x0||(x0=1,function(t,e){(function(r){var n=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,a=typeof ci=="object"&&ci;(a.global===a||a.window===a||a.self===a)&&(r=a);var u,c=2147483647,d=36,p=1,m=26,_=38,x=700,S=72,E=128,I="-",A=/^xn--/,R=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=d-p,N=Math.floor,Z=String.fromCharCode,G;function ie(U){throw new RangeError(L[U])}function re(U,B){for(var z=U.length,te=[];z--;)te[z]=B(U[z]);return te}function _e(U,B){var z=U.split("@"),te="";z.length>1&&(te=z[0]+"@",U=z[1]),U=U.replace(O,".");var he=U.split("."),xe=re(he,B).join(".");return te+xe}function oe(U){for(var B=[],z=0,te=U.length,he,xe;z<te;)he=U.charCodeAt(z++),he>=55296&&he<=56319&&z<te?(xe=U.charCodeAt(z++),(xe&64512)==56320?B.push(((he&1023)<<10)+(xe&1023)+65536):(B.push(he),z--)):B.push(he);return B}function ee(U){return re(U,function(B){var z="";return B>65535&&(B-=65536,z+=Z(B>>>10&1023|55296),B=56320|B&1023),z+=Z(B),z}).join("")}function me(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:d}function ue(U,B){return U+22+75*(U<26)-((B!=0)<<5)}function Ae(U,B,z){var te=0;for(U=z?N(U/x):U>>1,U+=N(U/B);U>X*m>>1;te+=d)U=N(U/X);return N(te+(X+1)*U/(U+_))}function H(U){var B=[],z=U.length,te,he=0,xe=E,Ce=S,Me,ke,Ne,Oe,ot,ft,St,Dt,je;for(Me=U.lastIndexOf(I),Me<0&&(Me=0),ke=0;ke<Me;++ke)U.charCodeAt(ke)>=128&&ie("not-basic"),B.push(U.charCodeAt(ke));for(Ne=Me>0?Me+1:0;Ne<z;){for(Oe=he,ot=1,ft=d;Ne>=z&&ie("invalid-input"),St=me(U.charCodeAt(Ne++)),(St>=d||St>N((c-he)/ot))&&ie("overflow"),he+=St*ot,Dt=ft<=Ce?p:ft>=Ce+m?m:ft-Ce,!(St<Dt);ft+=d)je=d-Dt,ot>N(c/je)&&ie("overflow"),ot*=je;te=B.length+1,Ce=Ae(he-Oe,te,Oe==0),N(he/te)>c-xe&&ie("overflow"),xe+=N(he/te),he%=te,B.splice(he++,0,xe)}return ee(B)}function j(U){var B,z,te,he,xe,Ce,Me,ke,Ne,Oe,ot,ft=[],St,Dt,je,tt;for(U=oe(U),St=U.length,B=E,z=0,xe=S,Ce=0;Ce<St;++Ce)ot=U[Ce],ot<128&&ft.push(Z(ot));for(te=he=ft.length,he&&ft.push(I);te<St;){for(Me=c,Ce=0;Ce<St;++Ce)ot=U[Ce],ot>=B&&ot<Me&&(Me=ot);for(Dt=te+1,Me-B>N((c-z)/Dt)&&ie("overflow"),z+=(Me-B)*Dt,B=Me,Ce=0;Ce<St;++Ce)if(ot=U[Ce],ot<B&&++z>c&&ie("overflow"),ot==B){for(ke=z,Ne=d;Oe=Ne<=xe?p:Ne>=xe+m?m:Ne-xe,!(ke<Oe);Ne+=d)tt=ke-Oe,je=d-Oe,ft.push(Z(ue(Oe+tt%je,0))),ke=N(tt/je);ft.push(Z(ue(ke,0))),xe=Ae(z,Dt,te==he),z=0,++te}++z,++B}return ft.join("")}function F(U){return _e(U,function(B){return A.test(B)?H(B.slice(4).toLowerCase()):B})}function K(U){return _e(U,function(B){return R.test(B)?"xn--"+j(B):B})}if(u={version:"1.4.1",ucs2:{decode:oe,encode:ee},decode:H,encode:j,toASCII:K,toUnicode:F},n&&s)if(t.exports==n)s.exports=u;else for(G in u)u.hasOwnProperty(G)&&(n[G]=u[G]);else r.punycode=u})(US)}(cl,cl.exports)),cl.exports}var Of,b0;function HS(){return b0||(b0=1,Of=Error),Of}var Lf,w0;function jS(){return w0||(w0=1,Lf=EvalError),Lf}var Nf,T0;function zS(){return T0||(T0=1,Nf=RangeError),Nf}var Uf,S0;function $S(){return S0||(S0=1,Uf=ReferenceError),Uf}var Gf,E0;function hb(){return E0||(E0=1,Gf=SyntaxError),Gf}var Hf,C0;function Ml(){return C0||(C0=1,Hf=TypeError),Hf}var jf,A0;function VS(){return A0||(A0=1,jf=URIError),jf}var zf,P0;function WS(){return P0||(P0=1,zf=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==s||c.enumerable!==!0)return!1}return!0}),zf}var $f,R0;function XS(){if(R0)return $f;R0=1;var t=typeof Symbol<"u"&&Symbol,e=WS();return $f=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},$f}var Vf,I0;function qS(){if(I0)return Vf;I0=1;var t={__proto__:null,foo:{}},e={__proto__:t}.foo===t.foo&&!(t instanceof Object);return Vf=function(){return e},Vf}var Wf,M0;function YS(){if(M0)return Wf;M0=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",s=function(d,p){for(var m=[],_=0;_<d.length;_+=1)m[_]=d[_];for(var x=0;x<p.length;x+=1)m[x+d.length]=p[x];return m},a=function(d,p){for(var m=[],_=p,x=0;_<d.length;_+=1,x+=1)m[x]=d[_];return m},u=function(c,d){for(var p="",m=0;m<c.length;m+=1)p+=c[m],m+1<c.length&&(p+=d);return p};return Wf=function(d){var p=this;if(typeof p!="function"||e.apply(p)!==n)throw new TypeError(t+p);for(var m=a(arguments,1),_,x=function(){if(this instanceof _){var R=p.apply(this,s(m,arguments));return Object(R)===R?R:this}return p.apply(d,s(m,arguments))},S=r(0,p.length-m.length),E=[],I=0;I<S;I++)E[I]="$"+I;if(_=Function("binder","return function ("+u(E,",")+"){ return binder.apply(this,arguments); }")(x),p.prototype){var A=function(){};A.prototype=p.prototype,_.prototype=new A,A.prototype=null}return _},Wf}var Xf,k0;function kl(){if(k0)return Xf;k0=1;var t=YS();return Xf=Function.prototype.bind||t,Xf}var qf,F0;function KS(){if(F0)return qf;F0=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=kl();return qf=r.call(t,e),qf}var Yf,D0;function Ah(){if(D0)return Yf;D0=1;var t,e=HS(),r=jS(),n=zS(),s=$S(),a=hb(),u=Ml(),c=VS(),d=Function,p=function(j){try{return d('"use strict"; return ('+j+").constructor;")()}catch{}},m=Object.getOwnPropertyDescriptor;if(m)try{m({},"")}catch{m=null}var _=function(){throw new u},x=m?function(){try{return arguments.callee,_}catch{try{return m(arguments,"callee").get}catch{return _}}}():_,S=XS()(),E=qS()(),I=Object.getPrototypeOf||(E?function(j){return j.__proto__}:null),A={},R=typeof Uint8Array>"u"||!I?t:I(Uint8Array),O={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":S&&I?I([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&I?I(I([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!I?t:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":n,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!I?t:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&I?I(""[Symbol.iterator]()):t,"%Symbol%":S?Symbol:t,"%SyntaxError%":a,"%ThrowTypeError%":x,"%TypedArray%":R,"%TypeError%":u,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet};if(I)try{null.error}catch(j){var L=I(I(j));O["%Error.prototype%"]=L}var X=function j(F){var K;if(F==="%AsyncFunction%")K=p("async function () {}");else if(F==="%GeneratorFunction%")K=p("function* () {}");else if(F==="%AsyncGeneratorFunction%")K=p("async function* () {}");else if(F==="%AsyncGenerator%"){var U=j("%AsyncGeneratorFunction%");U&&(K=U.prototype)}else if(F==="%AsyncIteratorPrototype%"){var B=j("%AsyncGenerator%");B&&I&&(K=I(B.prototype))}return O[F]=K,K},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=kl(),G=KS(),ie=Z.call(Function.call,Array.prototype.concat),re=Z.call(Function.apply,Array.prototype.splice),_e=Z.call(Function.call,String.prototype.replace),oe=Z.call(Function.call,String.prototype.slice),ee=Z.call(Function.call,RegExp.prototype.exec),me=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ue=/\\(\\)?/g,Ae=function(F){var K=oe(F,0,1),U=oe(F,-1);if(K==="%"&&U!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(U==="%"&&K!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var B=[];return _e(F,me,function(z,te,he,xe){B[B.length]=he?_e(xe,ue,"$1"):te||z}),B},H=function(F,K){var U=F,B;if(G(N,U)&&(B=N[U],U="%"+B[0]+"%"),G(O,U)){var z=O[U];if(z===A&&(z=X(U)),typeof z>"u"&&!K)throw new u("intrinsic "+F+" exists, but is not available. Please file an issue!");return{alias:B,name:U,value:z}}throw new a("intrinsic "+F+" does not exist!")};return Yf=function(F,K){if(typeof F!="string"||F.length===0)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof K!="boolean")throw new u('"allowMissing" argument must be a boolean');if(ee(/^%?[^%]*%?$/,F)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var U=Ae(F),B=U.length>0?U[0]:"",z=H("%"+B+"%",K),te=z.name,he=z.value,xe=!1,Ce=z.alias;Ce&&(B=Ce[0],re(U,ie([0,1],Ce)));for(var Me=1,ke=!0;Me<U.length;Me+=1){var Ne=U[Me],Oe=oe(Ne,0,1),ot=oe(Ne,-1);if((Oe==='"'||Oe==="'"||Oe==="`"||ot==='"'||ot==="'"||ot==="`")&&Oe!==ot)throw new a("property names with quotes must have matching quotes");if((Ne==="constructor"||!ke)&&(xe=!0),B+="."+Ne,te="%"+B+"%",G(O,te))he=O[te];else if(he!=null){if(!(Ne in he)){if(!K)throw new u("base intrinsic for "+F+" exists, but the property is not available.");return}if(m&&Me+1>=U.length){var ft=m(he,Ne);ke=!!ft,ke&&"get"in ft&&!("originalValue"in ft.get)?he=ft.get:he=he[Ne]}else ke=G(he,Ne),he=he[Ne];ke&&!xe&&(O[te]=he)}}return he},Yf}var Kf={exports:{}},Zf,B0;function Dg(){if(B0)return Zf;B0=1;var t=Ah(),e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Zf=e,Zf}var Qf,O0;function ZS(){return O0||(O0=1,Qf=Object.getOwnPropertyDescriptor),Qf}var Jf,L0;function cb(){if(L0)return Jf;L0=1;var t=ZS();if(t)try{t([],"length")}catch{t=null}return Jf=t,Jf}var ed,N0;function QS(){if(N0)return ed;N0=1;var t=Dg(),e=hb(),r=Ml(),n=cb();return ed=function(a,u,c){if(!a||typeof a!="object"&&typeof a!="function")throw new r("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var d=arguments.length>3?arguments[3]:null,p=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,_=arguments.length>6?arguments[6]:!1,x=!!n&&n(a,u);if(t)t(a,u,{configurable:m===null&&x?x.configurable:!m,enumerable:d===null&&x?x.enumerable:!d,value:c,writable:p===null&&x?x.writable:!p});else if(_||!d&&!p&&!m)a[u]=c;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ed}var td,U0;function JS(){if(U0)return td;U0=1;var t=Dg(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},td=e,td}var rd,G0;function eE(){if(G0)return rd;G0=1;var t=Ah(),e=QS(),r=JS()(),n=cb(),s=Ml(),a=t("%Math.floor%");return rd=function(c,d){if(typeof c!="function")throw new s("`fn` is not a function");if(typeof d!="number"||d<0||d>4294967295||a(d)!==d)throw new s("`length` must be a positive 32-bit integer");var p=arguments.length>2&&!!arguments[2],m=!0,_=!0;if("length"in c&&n){var x=n(c,"length");x&&!x.configurable&&(m=!1),x&&!x.writable&&(_=!1)}return(m||_||!p)&&(r?e(c,"length",d,!0,!0):e(c,"length",d)),c},rd}var nd,H0;function fb(){return H0||(H0=1,nd=Function.prototype.call),nd}var id,j0;function db(){return j0||(j0=1,id=Function.prototype.apply),id}var sd,z0;function tE(){return z0||(z0=1,sd=typeof Reflect=="function"&&Reflect.apply),sd}var od,$0;function pb(){if($0)return od;$0=1;var t=kl(),e=db(),r=fb(),n=tE();return od=n||t.call(r,e),od}var ad,V0;function rE(){if(V0)return ad;V0=1;var t=kl(),e=Ml(),r=fb(),n=pb();return ad=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return n(t,r,a)},ad}var ld,W0;function nE(){if(W0)return ld;W0=1;var t=kl(),e=db(),r=pb();return ld=function(){return r(t,e,arguments)},ld}var X0;function iE(){return X0||(X0=1,function(t){var e=eE(),r=Dg(),n=rE(),s=nE();t.exports=function(u){var c=n(arguments),d=u.length-(arguments.length-1);return e(c,1+(d>0?d:0),!0)},r?r(t.exports,"apply",{value:s}):t.exports.apply=s}(Kf)),Kf.exports}var ud,q0;function sE(){if(q0)return ud;q0=1;var t=Ah(),e=iE(),r=e(t("String.prototype.indexOf"));return ud=function(s,a){var u=t(s,!!a);return typeof u=="function"&&r(s,".prototype.")>-1?e(u):u},ud}const oE={},aE=Object.freeze(Object.defineProperty({__proto__:null,default:oE},Symbol.toStringTag,{value:"Module"})),eg=wS(aE);var hd,Y0;function lE(){if(Y0)return hd;Y0=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&a&&typeof a.get=="function"?a.get:null,c=s&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,p=d?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,_=m?WeakSet.prototype.has:null,x=typeof WeakRef=="function"&&WeakRef.prototype,S=x?WeakRef.prototype.deref:null,E=Boolean.prototype.valueOf,I=Object.prototype.toString,A=Function.prototype.toString,R=String.prototype.match,O=String.prototype.slice,L=String.prototype.replace,X=String.prototype.toUpperCase,N=String.prototype.toLowerCase,Z=RegExp.prototype.test,G=Array.prototype.concat,ie=Array.prototype.join,re=Array.prototype.slice,_e=Math.floor,oe=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ee=Object.getOwnPropertySymbols,me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ue=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ae=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ue||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,j=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(fe){return fe.__proto__}:null);function F(fe,ge){if(fe===1/0||fe===-1/0||fe!==fe||fe&&fe>-1e3&&fe<1e3||Z.call(/e/,ge))return ge;var Ct=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof fe=="number"){var kt=fe<0?-_e(-fe):_e(fe);if(kt!==fe){var Bt=String(kt),mt=O.call(ge,Bt.length+1);return L.call(Bt,Ct,"$&_")+"."+L.call(L.call(mt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return L.call(ge,Ct,"$&_")}var K=eg,U=K.custom,B=St(U)?U:null,z={__proto__:null,double:'"',single:"'"},te={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};hd=function fe(ge,Ct,kt,Bt){var mt=Ct||{};if(tt(mt,"quoteStyle")&&!tt(z,mt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(tt(mt,"maxStringLength")&&(typeof mt.maxStringLength=="number"?mt.maxStringLength<0&&mt.maxStringLength!==1/0:mt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var hr=tt(mt,"customInspect")?mt.customInspect:!0;if(typeof hr!="boolean"&&hr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(tt(mt,"indent")&&mt.indent!==null&&mt.indent!=="	"&&!(parseInt(mt.indent,10)===mt.indent&&mt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(tt(mt,"numericSeparator")&&typeof mt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ar=mt.numericSeparator;if(typeof ge>"u")return"undefined";if(ge===null)return"null";if(typeof ge=="boolean")return ge?"true":"false";if(typeof ge=="string")return On(ge,mt);if(typeof ge=="number"){if(ge===0)return 1/0/ge>0?"0":"-0";var or=String(ge);return Ar?F(ge,or):or}if(typeof ge=="bigint"){var Fr=String(ge)+"n";return Ar?F(ge,Fr):Fr}var is=typeof mt.depth>"u"?5:mt.depth;if(typeof kt>"u"&&(kt=0),kt>=is&&is>0&&typeof ge=="object")return Ce(ge)?"[Array]":"[Object]";var an=Et(mt,kt);if(typeof Bt>"u")Bt=[];else if(Cr(Bt,ge)>=0)return"[Circular]";function pr(ln,Un,Ni){if(Un&&(Bt=re.call(Bt),Bt.push(Un)),Ni){var ls={depth:mt.depth};return tt(mt,"quoteStyle")&&(ls.quoteStyle=mt.quoteStyle),fe(ln,ls,kt+1,Bt)}return fe(ln,mt,kt+1,Bt)}if(typeof ge=="function"&&!ke(ge)){var Qr=tr(ge),ss=Xt(ge,pr);return"[Function"+(Qr?": "+Qr:" (anonymous)")+"]"+(ss.length>0?" { "+ie.call(ss,", ")+" }":"")}if(St(ge)){var Nn=ue?L.call(String(ge),/^(Symbol\(.*\))_[^)]*$/,"$1"):me.call(ge);return typeof ge=="object"&&!ue?sr(Nn):Nn}if(Bn(ge)){for(var _n="<"+N.call(String(ge.nodeName)),xn=ge.attributes||[],os=0;os<xn.length;os++)_n+=" "+xn[os].name+"="+he(xe(xn[os].value),"double",mt);return _n+=">",ge.childNodes&&ge.childNodes.length&&(_n+="..."),_n+="</"+N.call(String(ge.nodeName))+">",_n}if(Ce(ge)){if(ge.length===0)return"[]";var bn=Xt(ge,pr);return an&&!Hr(bn)?"["+kr(bn,an)+"]":"[ "+ie.call(bn,", ")+" ]"}if(Ne(ge)){var vi=Xt(ge,pr);return!("cause"in Error.prototype)&&"cause"in ge&&!H.call(ge,"cause")?"{ ["+String(ge)+"] "+ie.call(G.call("[cause]: "+pr(ge.cause),vi),", ")+" }":vi.length===0?"["+String(ge)+"]":"{ ["+String(ge)+"] "+ie.call(vi,", ")+" }"}if(typeof ge=="object"&&hr){if(B&&typeof ge[B]=="function"&&K)return K(ge,{depth:is-kt});if(hr!=="symbol"&&typeof ge.inspect=="function")return ge.inspect()}if(vn(ge)){var Oi=[];return n&&n.call(ge,function(ln,Un){Oi.push(pr(Un,ge,!0)+" => "+pr(ln,ge))}),Mt("Map",r.call(ge),Oi,an)}if($t(ge)){var as=[];return c&&c.call(ge,function(ln){as.push(pr(ln,ge))}),Mt("Set",u.call(ge),as,an)}if(vr(ge))return Ln("WeakMap");if(on(ge))return Ln("WeakSet");if(ur(ge))return Ln("WeakRef");if(ot(ge))return sr(pr(Number(ge)));if(Dt(ge))return sr(pr(oe.call(ge)));if(ft(ge))return sr(E.call(ge));if(Oe(ge))return sr(pr(String(ge)));if(typeof window<"u"&&ge===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ge===globalThis||typeof ci<"u"&&ge===ci)return"{ [object globalThis] }";if(!Me(ge)&&!ke(ge)){var jr=Xt(ge,pr),Bs=j?j(ge)===Object.prototype:ge instanceof Object||ge.constructor===Object,Os=ge instanceof Object?"":"null prototype",Vt=!Bs&&Ae&&Object(ge)===ge&&Ae in ge?O.call(at(ge),8,-1):Os?"Object":"",Ls=Bs||typeof ge.constructor!="function"?"":ge.constructor.name?ge.constructor.name+" ":"",Li=Ls+(Vt||Os?"["+ie.call(G.call([],Vt||[],Os||[]),": ")+"] ":"");return jr.length===0?Li+"{}":an?Li+"{"+kr(jr,an)+"}":Li+"{ "+ie.call(jr,", ")+" }"}return String(ge)};function he(fe,ge,Ct){var kt=Ct.quoteStyle||ge,Bt=z[kt];return Bt+fe+Bt}function xe(fe){return L.call(String(fe),/"/g,"&quot;")}function Ce(fe){return at(fe)==="[object Array]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function Me(fe){return at(fe)==="[object Date]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function ke(fe){return at(fe)==="[object RegExp]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function Ne(fe){return at(fe)==="[object Error]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function Oe(fe){return at(fe)==="[object String]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function ot(fe){return at(fe)==="[object Number]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function ft(fe){return at(fe)==="[object Boolean]"&&(!Ae||!(typeof fe=="object"&&Ae in fe))}function St(fe){if(ue)return fe&&typeof fe=="object"&&fe instanceof Symbol;if(typeof fe=="symbol")return!0;if(!fe||typeof fe!="object"||!me)return!1;try{return me.call(fe),!0}catch{}return!1}function Dt(fe){if(!fe||typeof fe!="object"||!oe)return!1;try{return oe.call(fe),!0}catch{}return!1}var je=Object.prototype.hasOwnProperty||function(fe){return fe in this};function tt(fe,ge){return je.call(fe,ge)}function at(fe){return I.call(fe)}function tr(fe){if(fe.name)return fe.name;var ge=R.call(A.call(fe),/^function\s*([\w$]+)/);return ge?ge[1]:null}function Cr(fe,ge){if(fe.indexOf)return fe.indexOf(ge);for(var Ct=0,kt=fe.length;Ct<kt;Ct++)if(fe[Ct]===ge)return Ct;return-1}function vn(fe){if(!r||!fe||typeof fe!="object")return!1;try{r.call(fe);try{u.call(fe)}catch{return!0}return fe instanceof Map}catch{}return!1}function vr(fe){if(!p||!fe||typeof fe!="object")return!1;try{p.call(fe,p);try{_.call(fe,_)}catch{return!0}return fe instanceof WeakMap}catch{}return!1}function ur(fe){if(!S||!fe||typeof fe!="object")return!1;try{return S.call(fe),!0}catch{}return!1}function $t(fe){if(!u||!fe||typeof fe!="object")return!1;try{u.call(fe);try{r.call(fe)}catch{return!0}return fe instanceof Set}catch{}return!1}function on(fe){if(!_||!fe||typeof fe!="object")return!1;try{_.call(fe,_);try{p.call(fe,p)}catch{return!0}return fe instanceof WeakSet}catch{}return!1}function Bn(fe){return!fe||typeof fe!="object"?!1:typeof HTMLElement<"u"&&fe instanceof HTMLElement?!0:typeof fe.nodeName=="string"&&typeof fe.getAttribute=="function"}function On(fe,ge){if(fe.length>ge.maxStringLength){var Ct=fe.length-ge.maxStringLength,kt="... "+Ct+" more character"+(Ct>1?"s":"");return On(O.call(fe,0,ge.maxStringLength),ge)+kt}var Bt=te[ge.quoteStyle||"single"];Bt.lastIndex=0;var mt=L.call(L.call(fe,Bt,"\\$1"),/[\x00-\x1f]/g,dr);return he(mt,"single",ge)}function dr(fe){var ge=fe.charCodeAt(0),Ct={8:"b",9:"t",10:"n",12:"f",13:"r"}[ge];return Ct?"\\"+Ct:"\\x"+(ge<16?"0":"")+X.call(ge.toString(16))}function sr(fe){return"Object("+fe+")"}function Ln(fe){return fe+" { ? }"}function Mt(fe,ge,Ct,kt){var Bt=kt?kr(Ct,kt):ie.call(Ct,", ");return fe+" ("+ge+") {"+Bt+"}"}function Hr(fe){for(var ge=0;ge<fe.length;ge++)if(Cr(fe[ge],`
`)>=0)return!1;return!0}function Et(fe,ge){var Ct;if(fe.indent==="	")Ct="	";else if(typeof fe.indent=="number"&&fe.indent>0)Ct=ie.call(Array(fe.indent+1)," ");else return null;return{base:Ct,prev:ie.call(Array(ge+1),Ct)}}function kr(fe,ge){if(fe.length===0)return"";var Ct=`
`+ge.prev+ge.base;return Ct+ie.call(fe,","+Ct)+`
`+ge.prev}function Xt(fe,ge){var Ct=Ce(fe),kt=[];if(Ct){kt.length=fe.length;for(var Bt=0;Bt<fe.length;Bt++)kt[Bt]=tt(fe,Bt)?ge(fe[Bt],fe):""}var mt=typeof ee=="function"?ee(fe):[],hr;if(ue){hr={};for(var Ar=0;Ar<mt.length;Ar++)hr["$"+mt[Ar]]=mt[Ar]}for(var or in fe)tt(fe,or)&&(Ct&&String(Number(or))===or&&or<fe.length||ue&&hr["$"+or]instanceof Symbol||(Z.call(/[^\w$]/,or)?kt.push(ge(or,fe)+": "+ge(fe[or],fe)):kt.push(or+": "+ge(fe[or],fe))));if(typeof ee=="function")for(var Fr=0;Fr<mt.length;Fr++)H.call(fe,mt[Fr])&&kt.push("["+ge(mt[Fr])+"]: "+ge(fe[mt[Fr]],fe));return kt}return hd}var cd,K0;function uE(){if(K0)return cd;K0=1;var t=Ah(),e=sE(),r=lE(),n=Ml(),s=t("%WeakMap%",!0),a=t("%Map%",!0),u=e("WeakMap.prototype.get",!0),c=e("WeakMap.prototype.set",!0),d=e("WeakMap.prototype.has",!0),p=e("Map.prototype.get",!0),m=e("Map.prototype.set",!0),_=e("Map.prototype.has",!0),x=function(A,R){for(var O=A,L;(L=O.next)!==null;O=L)if(L.key===R)return O.next=L.next,L.next=A.next,A.next=L,L},S=function(A,R){var O=x(A,R);return O&&O.value},E=function(A,R,O){var L=x(A,R);L?L.value=O:A.next={key:R,next:A.next,value:O}},I=function(A,R){return!!x(A,R)};return cd=function(){var R,O,L,X={assert:function(N){if(!X.has(N))throw new n("Side channel does not contain "+r(N))},get:function(N){if(s&&N&&(typeof N=="object"||typeof N=="function")){if(R)return u(R,N)}else if(a){if(O)return p(O,N)}else if(L)return S(L,N)},has:function(N){if(s&&N&&(typeof N=="object"||typeof N=="function")){if(R)return d(R,N)}else if(a){if(O)return _(O,N)}else if(L)return I(L,N);return!1},set:function(N,Z){s&&N&&(typeof N=="object"||typeof N=="function")?(R||(R=new s),c(R,N,Z)):a?(O||(O=new a),m(O,N,Z)):(L||(L={key:{},next:null}),E(L,N,Z))}};return X},cd}var fd,Z0;function Bg(){if(Z0)return fd;Z0=1;var t=String.prototype.replace,e=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return fd={default:r.RFC3986,formatters:{RFC1738:function(n){return t.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},fd}var dd,Q0;function mb(){if(Q0)return dd;Q0=1;var t=Bg(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var A=[],R=0;R<256;++R)A.push("%"+((R<16?"0":"")+R.toString(16)).toUpperCase());return A}(),s=function(R){for(;R.length>1;){var O=R.pop(),L=O.obj[O.prop];if(r(L)){for(var X=[],N=0;N<L.length;++N)typeof L[N]<"u"&&X.push(L[N]);O.obj[O.prop]=X}}},a=function(R,O){for(var L=O&&O.plainObjects?{__proto__:null}:{},X=0;X<R.length;++X)typeof R[X]<"u"&&(L[X]=R[X]);return L},u=function A(R,O,L){if(!O)return R;if(typeof O!="object"&&typeof O!="function"){if(r(R))R.push(O);else if(R&&typeof R=="object")(L&&(L.plainObjects||L.allowPrototypes)||!e.call(Object.prototype,O))&&(R[O]=!0);else return[R,O];return R}if(!R||typeof R!="object")return[R].concat(O);var X=R;return r(R)&&!r(O)&&(X=a(R,L)),r(R)&&r(O)?(O.forEach(function(N,Z){if(e.call(R,Z)){var G=R[Z];G&&typeof G=="object"&&N&&typeof N=="object"?R[Z]=A(G,N,L):R.push(N)}else R[Z]=N}),R):Object.keys(O).reduce(function(N,Z){var G=O[Z];return e.call(N,Z)?N[Z]=A(N[Z],G,L):N[Z]=G,N},X)},c=function(R,O){return Object.keys(O).reduce(function(L,X){return L[X]=O[X],L},R)},d=function(A,R,O){var L=A.replace(/\+/g," ");if(O==="iso-8859-1")return L.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(L)}catch{return L}},p=1024,m=function(R,O,L,X,N){if(R.length===0)return R;var Z=R;if(typeof R=="symbol"?Z=Symbol.prototype.toString.call(R):typeof R!="string"&&(Z=String(R)),L==="iso-8859-1")return escape(Z).replace(/%u[0-9a-f]{4}/gi,function(me){return"%26%23"+parseInt(me.slice(2),16)+"%3B"});for(var G="",ie=0;ie<Z.length;ie+=p){for(var re=Z.length>=p?Z.slice(ie,ie+p):Z,_e=[],oe=0;oe<re.length;++oe){var ee=re.charCodeAt(oe);if(ee===45||ee===46||ee===95||ee===126||ee>=48&&ee<=57||ee>=65&&ee<=90||ee>=97&&ee<=122||N===t.RFC1738&&(ee===40||ee===41)){_e[_e.length]=re.charAt(oe);continue}if(ee<128){_e[_e.length]=n[ee];continue}if(ee<2048){_e[_e.length]=n[192|ee>>6]+n[128|ee&63];continue}if(ee<55296||ee>=57344){_e[_e.length]=n[224|ee>>12]+n[128|ee>>6&63]+n[128|ee&63];continue}oe+=1,ee=65536+((ee&1023)<<10|re.charCodeAt(oe)&1023),_e[_e.length]=n[240|ee>>18]+n[128|ee>>12&63]+n[128|ee>>6&63]+n[128|ee&63]}G+=_e.join("")}return G},_=function(R){for(var O=[{obj:{o:R},prop:"o"}],L=[],X=0;X<O.length;++X)for(var N=O[X],Z=N.obj[N.prop],G=Object.keys(Z),ie=0;ie<G.length;++ie){var re=G[ie],_e=Z[re];typeof _e=="object"&&_e!==null&&L.indexOf(_e)===-1&&(O.push({obj:Z,prop:re}),L.push(_e))}return s(O),R},x=function(R){return Object.prototype.toString.call(R)==="[object RegExp]"},S=function(R){return!R||typeof R!="object"?!1:!!(R.constructor&&R.constructor.isBuffer&&R.constructor.isBuffer(R))},E=function(R,O){return[].concat(R,O)},I=function(R,O){if(r(R)){for(var L=[],X=0;X<R.length;X+=1)L.push(O(R[X]));return L}return O(R)};return dd={arrayToObject:a,assign:c,combine:E,compact:_,decode:d,encode:m,isBuffer:S,isRegExp:x,maybeMap:I,merge:u},dd}var pd,J0;function hE(){if(J0)return pd;J0=1;var t=uE(),e=mb(),r=Bg(),n=Object.prototype.hasOwnProperty,s={brackets:function(A){return A+"[]"},comma:"comma",indices:function(A,R){return A+"["+R+"]"},repeat:function(A){return A}},a=Array.isArray,u=Array.prototype.push,c=function(I,A){u.apply(I,a(A)?A:[A])},d=Date.prototype.toISOString,p=r.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:p,formatter:r.formatters[p],indices:!1,serializeDate:function(A){return d.call(A)},skipNulls:!1,strictNullHandling:!1},_=function(A){return typeof A=="string"||typeof A=="number"||typeof A=="boolean"||typeof A=="symbol"||typeof A=="bigint"},x={},S=function I(A,R,O,L,X,N,Z,G,ie,re,_e,oe,ee,me,ue,Ae,H,j){for(var F=A,K=j,U=0,B=!1;(K=K.get(x))!==void 0&&!B;){var z=K.get(A);if(U+=1,typeof z<"u"){if(z===U)throw new RangeError("Cyclic object value");B=!0}typeof K.get(x)>"u"&&(U=0)}if(typeof re=="function"?F=re(R,F):F instanceof Date?F=ee(F):O==="comma"&&a(F)&&(F=e.maybeMap(F,function(je){return je instanceof Date?ee(je):je})),F===null){if(N)return ie&&!Ae?ie(R,m.encoder,H,"key",me):R;F=""}if(_(F)||e.isBuffer(F)){if(ie){var te=Ae?R:ie(R,m.encoder,H,"key",me);return[ue(te)+"="+ue(ie(F,m.encoder,H,"value",me))]}return[ue(R)+"="+ue(String(F))]}var he=[];if(typeof F>"u")return he;var xe;if(O==="comma"&&a(F))Ae&&ie&&(F=e.maybeMap(F,ie)),xe=[{value:F.length>0?F.join(",")||null:void 0}];else if(a(re))xe=re;else{var Ce=Object.keys(F);xe=_e?Ce.sort(_e):Ce}var Me=G?String(R).replace(/\./g,"%2E"):String(R),ke=L&&a(F)&&F.length===1?Me+"[]":Me;if(X&&a(F)&&F.length===0)return ke+"[]";for(var Ne=0;Ne<xe.length;++Ne){var Oe=xe[Ne],ot=typeof Oe=="object"&&Oe&&typeof Oe.value<"u"?Oe.value:F[Oe];if(!(Z&&ot===null)){var ft=oe&&G?String(Oe).replace(/\./g,"%2E"):String(Oe),St=a(F)?typeof O=="function"?O(ke,ft):ke:ke+(oe?"."+ft:"["+ft+"]");j.set(A,U);var Dt=t();Dt.set(x,j),c(he,I(ot,St,O,L,X,N,Z,G,O==="comma"&&Ae&&a(F)?null:ie,re,_e,oe,ee,me,ue,Ae,H,Dt))}}return he},E=function(A){if(!A)return m;if(typeof A.allowEmptyArrays<"u"&&typeof A.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof A.encodeDotInKeys<"u"&&typeof A.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(A.encoder!==null&&typeof A.encoder<"u"&&typeof A.encoder!="function")throw new TypeError("Encoder has to be a function.");var R=A.charset||m.charset;if(typeof A.charset<"u"&&A.charset!=="utf-8"&&A.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var O=r.default;if(typeof A.format<"u"){if(!n.call(r.formatters,A.format))throw new TypeError("Unknown format option provided.");O=A.format}var L=r.formatters[O],X=m.filter;(typeof A.filter=="function"||a(A.filter))&&(X=A.filter);var N;if(A.arrayFormat in s?N=A.arrayFormat:"indices"in A?N=A.indices?"indices":"repeat":N=m.arrayFormat,"commaRoundTrip"in A&&typeof A.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Z=typeof A.allowDots>"u"?A.encodeDotInKeys===!0?!0:m.allowDots:!!A.allowDots;return{addQueryPrefix:typeof A.addQueryPrefix=="boolean"?A.addQueryPrefix:m.addQueryPrefix,allowDots:Z,allowEmptyArrays:typeof A.allowEmptyArrays=="boolean"?!!A.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:N,charset:R,charsetSentinel:typeof A.charsetSentinel=="boolean"?A.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!A.commaRoundTrip,delimiter:typeof A.delimiter>"u"?m.delimiter:A.delimiter,encode:typeof A.encode=="boolean"?A.encode:m.encode,encodeDotInKeys:typeof A.encodeDotInKeys=="boolean"?A.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof A.encoder=="function"?A.encoder:m.encoder,encodeValuesOnly:typeof A.encodeValuesOnly=="boolean"?A.encodeValuesOnly:m.encodeValuesOnly,filter:X,format:O,formatter:L,serializeDate:typeof A.serializeDate=="function"?A.serializeDate:m.serializeDate,skipNulls:typeof A.skipNulls=="boolean"?A.skipNulls:m.skipNulls,sort:typeof A.sort=="function"?A.sort:null,strictNullHandling:typeof A.strictNullHandling=="boolean"?A.strictNullHandling:m.strictNullHandling}};return pd=function(I,A){var R=I,O=E(A),L,X;typeof O.filter=="function"?(X=O.filter,R=X("",R)):a(O.filter)&&(X=O.filter,L=X);var N=[];if(typeof R!="object"||R===null)return"";var Z=s[O.arrayFormat],G=Z==="comma"&&O.commaRoundTrip;L||(L=Object.keys(R)),O.sort&&L.sort(O.sort);for(var ie=t(),re=0;re<L.length;++re){var _e=L[re],oe=R[_e];O.skipNulls&&oe===null||c(N,S(oe,_e,Z,G,O.allowEmptyArrays,O.strictNullHandling,O.skipNulls,O.encodeDotInKeys,O.encode?O.encoder:null,O.filter,O.sort,O.allowDots,O.serializeDate,O.format,O.formatter,O.encodeValuesOnly,O.charset,ie))}var ee=N.join(O.delimiter),me=O.addQueryPrefix===!0?"?":"";return O.charsetSentinel&&(O.charset==="iso-8859-1"?me+="utf8=%26%2310003%3B&":me+="utf8=%E2%9C%93&"),ee.length>0?me+ee:""},pd}var md,e_;function cE(){if(e_)return md;e_=1;var t=mb(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},s=function(x){return x.replace(/&#(\d+);/g,function(S,E){return String.fromCharCode(parseInt(E,10))})},a=function(x,S){return x&&typeof x=="string"&&S.comma&&x.indexOf(",")>-1?x.split(","):x},u="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",d=function(S,E){var I={__proto__:null},A=E.ignoreQueryPrefix?S.replace(/^\?/,""):S;A=A.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var R=E.parameterLimit===1/0?void 0:E.parameterLimit,O=A.split(E.delimiter,R),L=-1,X,N=E.charset;if(E.charsetSentinel)for(X=0;X<O.length;++X)O[X].indexOf("utf8=")===0&&(O[X]===c?N="utf-8":O[X]===u&&(N="iso-8859-1"),L=X,X=O.length);for(X=0;X<O.length;++X)if(X!==L){var Z=O[X],G=Z.indexOf("]="),ie=G===-1?Z.indexOf("="):G+1,re,_e;ie===-1?(re=E.decoder(Z,n.decoder,N,"key"),_e=E.strictNullHandling?null:""):(re=E.decoder(Z.slice(0,ie),n.decoder,N,"key"),_e=t.maybeMap(a(Z.slice(ie+1),E),function(ee){return E.decoder(ee,n.decoder,N,"value")})),_e&&E.interpretNumericEntities&&N==="iso-8859-1"&&(_e=s(String(_e))),Z.indexOf("[]=")>-1&&(_e=r(_e)?[_e]:_e);var oe=e.call(I,re);oe&&E.duplicates==="combine"?I[re]=t.combine(I[re],_e):(!oe||E.duplicates==="last")&&(I[re]=_e)}return I},p=function(x,S,E,I){for(var A=I?S:a(S,E),R=x.length-1;R>=0;--R){var O,L=x[R];if(L==="[]"&&E.parseArrays)O=E.allowEmptyArrays&&(A===""||E.strictNullHandling&&A===null)?[]:[].concat(A);else{O=E.plainObjects?{__proto__:null}:{};var X=L.charAt(0)==="["&&L.charAt(L.length-1)==="]"?L.slice(1,-1):L,N=E.decodeDotInKeys?X.replace(/%2E/g,"."):X,Z=parseInt(N,10);!E.parseArrays&&N===""?O={0:A}:!isNaN(Z)&&L!==N&&String(Z)===N&&Z>=0&&E.parseArrays&&Z<=E.arrayLimit?(O=[],O[Z]=A):N!=="__proto__"&&(O[N]=A)}A=O}return A},m=function(S,E,I,A){if(S){var R=I.allowDots?S.replace(/\.([^.[]+)/g,"[$1]"):S,O=/(\[[^[\]]*])/,L=/(\[[^[\]]*])/g,X=I.depth>0&&O.exec(R),N=X?R.slice(0,X.index):R,Z=[];if(N){if(!I.plainObjects&&e.call(Object.prototype,N)&&!I.allowPrototypes)return;Z.push(N)}for(var G=0;I.depth>0&&(X=L.exec(R))!==null&&G<I.depth;){if(G+=1,!I.plainObjects&&e.call(Object.prototype,X[1].slice(1,-1))&&!I.allowPrototypes)return;Z.push(X[1])}if(X){if(I.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+I.depth+" and strictDepth is true");Z.push("["+R.slice(X.index)+"]")}return p(Z,E,I,A)}},_=function(S){if(!S)return n;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.decodeDotInKeys<"u"&&typeof S.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(S.decoder!==null&&typeof S.decoder<"u"&&typeof S.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=typeof S.charset>"u"?n.charset:S.charset,I=typeof S.duplicates>"u"?n.duplicates:S.duplicates;if(I!=="combine"&&I!=="first"&&I!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var A=typeof S.allowDots>"u"?S.decodeDotInKeys===!0?!0:n.allowDots:!!S.allowDots;return{allowDots:A,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof S.allowPrototypes=="boolean"?S.allowPrototypes:n.allowPrototypes,allowSparse:typeof S.allowSparse=="boolean"?S.allowSparse:n.allowSparse,arrayLimit:typeof S.arrayLimit=="number"?S.arrayLimit:n.arrayLimit,charset:E,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:n.charsetSentinel,comma:typeof S.comma=="boolean"?S.comma:n.comma,decodeDotInKeys:typeof S.decodeDotInKeys=="boolean"?S.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof S.decoder=="function"?S.decoder:n.decoder,delimiter:typeof S.delimiter=="string"||t.isRegExp(S.delimiter)?S.delimiter:n.delimiter,depth:typeof S.depth=="number"||S.depth===!1?+S.depth:n.depth,duplicates:I,ignoreQueryPrefix:S.ignoreQueryPrefix===!0,interpretNumericEntities:typeof S.interpretNumericEntities=="boolean"?S.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof S.parameterLimit=="number"?S.parameterLimit:n.parameterLimit,parseArrays:S.parseArrays!==!1,plainObjects:typeof S.plainObjects=="boolean"?S.plainObjects:n.plainObjects,strictDepth:typeof S.strictDepth=="boolean"?!!S.strictDepth:n.strictDepth,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:n.strictNullHandling}};return md=function(x,S){var E=_(S);if(x===""||x===null||typeof x>"u")return E.plainObjects?{__proto__:null}:{};for(var I=typeof x=="string"?d(x,E):x,A=E.plainObjects?{__proto__:null}:{},R=Object.keys(I),O=0;O<R.length;++O){var L=R[O],X=m(L,I[L],E,typeof x=="string");A=t.merge(A,X,E)}return E.allowSparse===!0?A:t.compact(A)},md}var gd,t_;function fE(){if(t_)return gd;t_=1;var t=hE(),e=cE(),r=Bg();return gd={formats:r,parse:e,stringify:t},gd}var r_;function dE(){if(r_)return so;r_=1;var t=GS();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var r=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],u=["{","}","|","\\","^","`"].concat(a),c=["'"].concat(u),d=["%","/","?",";","#"].concat(c),p=["/","?","#"],m=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=fE();function R(N,Z,G){if(N&&typeof N=="object"&&N instanceof e)return N;var ie=new e;return ie.parse(N,Z,G),ie}e.prototype.parse=function(N,Z,G){if(typeof N!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof N);var ie=N.indexOf("?"),re=ie!==-1&&ie<N.indexOf("#")?"?":"#",_e=N.split(re),oe=/\\/g;_e[0]=_e[0].replace(oe,"/"),N=_e.join(re);var ee=N;if(ee=ee.trim(),!G&&N.split("#").length===1){var me=s.exec(ee);if(me)return this.path=ee,this.href=ee,this.pathname=me[1],me[2]?(this.search=me[2],Z?this.query=A.parse(this.search.substr(1)):this.query=this.search.substr(1)):Z&&(this.search="",this.query={}),this}var ue=r.exec(ee);if(ue){ue=ue[0];var Ae=ue.toLowerCase();this.protocol=Ae,ee=ee.substr(ue.length)}if(G||ue||ee.match(/^\/\/[^@/]+@[^@/]+/)){var H=ee.substr(0,2)==="//";H&&!(ue&&E[ue])&&(ee=ee.substr(2),this.slashes=!0)}if(!E[ue]&&(H||ue&&!I[ue])){for(var j=-1,F=0;F<p.length;F++){var K=ee.indexOf(p[F]);K!==-1&&(j===-1||K<j)&&(j=K)}var U,B;j===-1?B=ee.lastIndexOf("@"):B=ee.lastIndexOf("@",j),B!==-1&&(U=ee.slice(0,B),ee=ee.slice(B+1),this.auth=decodeURIComponent(U)),j=-1;for(var F=0;F<d.length;F++){var K=ee.indexOf(d[F]);K!==-1&&(j===-1||K<j)&&(j=K)}j===-1&&(j=ee.length),this.host=ee.slice(0,j),ee=ee.slice(j),this.parseHost(),this.hostname=this.hostname||"";var z=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!z)for(var te=this.hostname.split(/\./),F=0,he=te.length;F<he;F++){var xe=te[F];if(xe&&!xe.match(_)){for(var Ce="",Me=0,ke=xe.length;Me<ke;Me++)xe.charCodeAt(Me)>127?Ce+="x":Ce+=xe[Me];if(!Ce.match(_)){var Ne=te.slice(0,F),Oe=te.slice(F+1),ot=xe.match(x);ot&&(Ne.push(ot[1]),Oe.unshift(ot[2])),Oe.length&&(ee="/"+Oe.join(".")+ee),this.hostname=Ne.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),z||(this.hostname=t.toASCII(this.hostname));var ft=this.port?":"+this.port:"",St=this.hostname||"";this.host=St+ft,this.href+=this.host,z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ee[0]!=="/"&&(ee="/"+ee))}if(!S[Ae])for(var F=0,he=c.length;F<he;F++){var Dt=c[F];if(ee.indexOf(Dt)!==-1){var je=encodeURIComponent(Dt);je===Dt&&(je=escape(Dt)),ee=ee.split(Dt).join(je)}}var tt=ee.indexOf("#");tt!==-1&&(this.hash=ee.substr(tt),ee=ee.slice(0,tt));var at=ee.indexOf("?");if(at!==-1?(this.search=ee.substr(at),this.query=ee.substr(at+1),Z&&(this.query=A.parse(this.query)),ee=ee.slice(0,at)):Z&&(this.search="",this.query={}),ee&&(this.pathname=ee),I[Ae]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ft=this.pathname||"",tr=this.search||"";this.path=ft+tr}return this.href=this.format(),this};function O(N){return typeof N=="string"&&(N=R(N)),N instanceof e?N.format():e.prototype.format.call(N)}e.prototype.format=function(){var N=this.auth||"";N&&(N=encodeURIComponent(N),N=N.replace(/%3A/i,":"),N+="@");var Z=this.protocol||"",G=this.pathname||"",ie=this.hash||"",re=!1,_e="";this.host?re=N+this.host:this.hostname&&(re=N+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(re+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(_e=A.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var oe=this.search||_e&&"?"+_e||"";return Z&&Z.substr(-1)!==":"&&(Z+=":"),this.slashes||(!Z||I[Z])&&re!==!1?(re="//"+(re||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):re||(re=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),oe&&oe.charAt(0)!=="?"&&(oe="?"+oe),G=G.replace(/[?#]/g,function(ee){return encodeURIComponent(ee)}),oe=oe.replace("#","%23"),Z+re+G+oe+ie};function L(N,Z){return R(N,!1,!0).resolve(Z)}e.prototype.resolve=function(N){return this.resolveObject(R(N,!1,!0)).format()};function X(N,Z){return N?R(N,!1,!0).resolveObject(Z):Z}return e.prototype.resolveObject=function(N){if(typeof N=="string"){var Z=new e;Z.parse(N,!1,!0),N=Z}for(var G=new e,ie=Object.keys(this),re=0;re<ie.length;re++){var _e=ie[re];G[_e]=this[_e]}if(G.hash=N.hash,N.href==="")return G.href=G.format(),G;if(N.slashes&&!N.protocol){for(var oe=Object.keys(N),ee=0;ee<oe.length;ee++){var me=oe[ee];me!=="protocol"&&(G[me]=N[me])}return I[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if(N.protocol&&N.protocol!==G.protocol){if(!I[N.protocol]){for(var ue=Object.keys(N),Ae=0;Ae<ue.length;Ae++){var H=ue[Ae];G[H]=N[H]}return G.href=G.format(),G}if(G.protocol=N.protocol,!N.host&&!E[N.protocol]){for(var he=(N.pathname||"").split("/");he.length&&!(N.host=he.shift()););N.host||(N.host=""),N.hostname||(N.hostname=""),he[0]!==""&&he.unshift(""),he.length<2&&he.unshift(""),G.pathname=he.join("/")}else G.pathname=N.pathname;if(G.search=N.search,G.query=N.query,G.host=N.host||"",G.auth=N.auth,G.hostname=N.hostname||N.host,G.port=N.port,G.pathname||G.search){var j=G.pathname||"",F=G.search||"";G.path=j+F}return G.slashes=G.slashes||N.slashes,G.href=G.format(),G}var K=G.pathname&&G.pathname.charAt(0)==="/",U=N.host||N.pathname&&N.pathname.charAt(0)==="/",B=U||K||G.host&&N.pathname,z=B,te=G.pathname&&G.pathname.split("/")||[],he=N.pathname&&N.pathname.split("/")||[],xe=G.protocol&&!I[G.protocol];if(xe&&(G.hostname="",G.port=null,G.host&&(te[0]===""?te[0]=G.host:te.unshift(G.host)),G.host="",N.protocol&&(N.hostname=null,N.port=null,N.host&&(he[0]===""?he[0]=N.host:he.unshift(N.host)),N.host=null),B=B&&(he[0]===""||te[0]==="")),U)G.host=N.host||N.host===""?N.host:G.host,G.hostname=N.hostname||N.hostname===""?N.hostname:G.hostname,G.search=N.search,G.query=N.query,te=he;else if(he.length)te||(te=[]),te.pop(),te=te.concat(he),G.search=N.search,G.query=N.query;else if(N.search!=null){if(xe){G.host=te.shift(),G.hostname=G.host;var Ce=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Ce&&(G.auth=Ce.shift(),G.hostname=Ce.shift(),G.host=G.hostname)}return G.search=N.search,G.query=N.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!te.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var Me=te.slice(-1)[0],ke=(G.host||N.host||te.length>1)&&(Me==="."||Me==="..")||Me==="",Ne=0,Oe=te.length;Oe>=0;Oe--)Me=te[Oe],Me==="."?te.splice(Oe,1):Me===".."?(te.splice(Oe,1),Ne++):Ne&&(te.splice(Oe,1),Ne--);if(!B&&!z)for(;Ne--;Ne)te.unshift("..");B&&te[0]!==""&&(!te[0]||te[0].charAt(0)!=="/")&&te.unshift(""),ke&&te.join("/").substr(-1)!=="/"&&te.push("");var ot=te[0]===""||te[0]&&te[0].charAt(0)==="/";if(xe){G.hostname=ot?"":te.length?te.shift():"",G.host=G.hostname;var Ce=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Ce&&(G.auth=Ce.shift(),G.hostname=Ce.shift(),G.host=G.hostname)}return B=B||G.host&&te.length,B&&!ot&&te.unshift(""),te.length>0?G.pathname=te.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=N.auth||G.auth,G.slashes=G.slashes||N.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var N=this.host,Z=n.exec(N);Z&&(Z=Z[0],Z!==":"&&(this.port=Z.substr(1)),N=N.substr(0,N.length-Z.length)),N&&(this.hostname=N)},so.parse=R,so.resolve=L,so.resolveObject=X,so.format=O,so.Url=e,so}var yd=dE();const gb={parse:yd.parse,format:yd.format,resolve:yd.resolve};function ni(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function rl(t){return t.split("?")[0].split("#")[0]}function pE(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mE(t,e,r){return t.replace(new RegExp(pE(e),"g"),r)}function gE(t,e){let r="",n=0,s=-1,a=0,u=-1;for(let c=0;c<=t.length;++c){if(c<t.length)u=t.charCodeAt(c);else{if(u===47)break;u=47}if(u===47){if(!(s===c-1||a===1))if(s!==c-1&&a===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const d=r.lastIndexOf("/");if(d!==r.length-1){d===-1?(r="",n=0):(r=r.slice(0,d),n=r.length-1-r.lastIndexOf("/")),s=c,a=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=c,a=0;continue}}}else r.length>0?r+=`/${t.slice(s+1,c)}`:r=t.slice(s+1,c),n=c-s-1;s=c,a=0}else u===46&&a!==-1?++a:a=-1}return r}const Gr={toPosix(t){return mE(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){ni(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),s=/^[^/:]+:\//.exec(t);if(r||n||s){const a=(r==null?void 0:r[0])||(n==null?void 0:n[0])||(s==null?void 0:s[0]);e=a,t=t.slice(a.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const n=rl(this.toPosix(e??We.ADAPTER.getBaseUrl())),s=rl(this.toPosix(r??this.rootname(n)));return ni(t),t=this.toPosix(t),t.startsWith("/")?Gr.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(t=this.toPosix(t),ni(t),t.length===0)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=gE(t),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return ni(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(ni(n),n.length>0)if(e===void 0)e=n;else{const s=t[r-1]??"";this.extname(s)?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(ni(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,s=!0;const a=this.getProtocol(t),u=t;t=t.slice(a.length);for(let c=t.length-1;c>=1;--c)if(e=t.charCodeAt(c),e===47){if(!s){n=c;break}}else s=!1;return n===-1?r?"/":this.isUrl(u)?a+t:a:r&&n===1?"//":a+t.slice(0,n)},rootname(t){ni(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){ni(t),e&&ni(e),t=rl(this.toPosix(t));let r=0,n=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let u=e.length-1,c=-1;for(a=t.length-1;a>=0;--a){const d=t.charCodeAt(a);if(d===47){if(!s){r=a+1;break}}else c===-1&&(s=!1,c=a+1),u>=0&&(d===e.charCodeAt(u)?--u===-1&&(n=a):(u=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!s){r=a+1;break}}else n===-1&&(s=!1,n=a+1);return n===-1?"":t.slice(r,n)},extname(t){ni(t),t=rl(this.toPosix(t));let e=-1,r=0,n=-1,s=!0,a=0;for(let u=t.length-1;u>=0;--u){const c=t.charCodeAt(u);if(c===47){if(!s){r=u+1;break}continue}n===-1&&(s=!1,n=u+1),c===46?e===-1?e=u:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||n===-1||a===0||a===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){ni(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=rl(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let s;e.root=this.rootname(t),n||this.hasProtocol(t)?s=1:s=0;let a=-1,u=0,c=-1,d=!0,p=t.length-1,m=0;for(;p>=s;--p){if(r=t.charCodeAt(p),r===47){if(!d){u=p+1;break}continue}c===-1&&(d=!1,c=p+1),r===46?a===-1?a=p:m!==1&&(m=1):a!==-1&&(m=-1)}return a===-1||c===-1||m===0||m===1&&a===c-1&&a===u+1?c!==-1&&(u===0&&n?e.base=e.name=t.slice(1,c):e.base=e.name=t.slice(u,c)):(u===0&&n?(e.name=t.slice(1,a),e.base=t.slice(1,c)):(e.name=t.slice(u,a),e.base=t.slice(u,c)),e.ext=t.slice(a,c)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},n_={};function yt(t,e,r=3){if(n_[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),n_[e]=!0}function yE(){yt("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function vE(){yt("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let vd;function yb(){return typeof vd>"u"&&(vd=function(){var r;const e={stencil:!0,failIfMajorPerformanceCaveat:We.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!We.ADAPTER.getWebGLRenderingContext())return!1;const n=We.ADAPTER.createCanvas();let s=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const a=!!((r=s==null?void 0:s.getContextAttributes())!=null&&r.stencil);if(s){const u=s.getExtension("WEBGL_lose_context");u&&u.loseContext()}return s=null,a}catch{return!1}}()),vd}var _E={grad:.9,turn:360,rad:360/(2*Math.PI)},Ki=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Mr=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Yn=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},vb=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},i_=function(t){return{r:Yn(t.r,0,255),g:Yn(t.g,0,255),b:Yn(t.b,0,255),a:Yn(t.a)}},_d=function(t){return{r:Mr(t.r),g:Mr(t.g),b:Mr(t.b),a:Mr(t.a,3)}},xE=/^#([0-9a-f]{3,8})$/i,Wu=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},_b=function(t){var e=t.r,r=t.g,n=t.b,s=t.a,a=Math.max(e,r,n),u=a-Math.min(e,r,n),c=u?a===e?(r-n)/u:a===r?2+(n-e)/u:4+(e-r)/u:0;return{h:60*(c<0?c+6:c),s:a?u/a*100:0,v:a/255*100,a:s}},xb=function(t){var e=t.h,r=t.s,n=t.v,s=t.a;e=e/360*6,r/=100,n/=100;var a=Math.floor(e),u=n*(1-r),c=n*(1-(e-a)*r),d=n*(1-(1-e+a)*r),p=a%6;return{r:255*[n,c,u,u,d,n][p],g:255*[d,n,n,c,u,u][p],b:255*[u,u,d,n,n,c][p],a:s}},s_=function(t){return{h:vb(t.h),s:Yn(t.s,0,100),l:Yn(t.l,0,100),a:Yn(t.a)}},o_=function(t){return{h:Mr(t.h),s:Mr(t.s),l:Mr(t.l),a:Mr(t.a,3)}},a_=function(t){return xb((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},xl=function(t){return{h:(e=_b(t)).h,s:(s=(200-(r=e.s))*(n=e.v)/100)>0&&s<200?r*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,n,s},bE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,SE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tg={string:[[function(t){var e=xE.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Mr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Mr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=TE.exec(t)||SE.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:i_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=bE.exec(t)||wE.exec(t);if(!e)return null;var r,n,s=s_({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(_E[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return a_(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,s=t.a,a=s===void 0?1:s;return Ki(e)&&Ki(r)&&Ki(n)?i_({r:Number(e),g:Number(r),b:Number(n),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,s=t.a,a=s===void 0?1:s;if(!Ki(e)||!Ki(r)||!Ki(n))return null;var u=s_({h:Number(e),s:Number(r),l:Number(n),a:Number(a)});return a_(u)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,s=t.a,a=s===void 0?1:s;if(!Ki(e)||!Ki(r)||!Ki(n))return null;var u=function(c){return{h:vb(c.h),s:Yn(c.s,0,100),v:Yn(c.v,0,100),a:Yn(c.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(a)});return xb(u)},"hsv"]]},l_=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},EE=function(t){return typeof t=="string"?l_(t.trim(),tg.string):typeof t=="object"&&t!==null?l_(t,tg.object):[null,void 0]},xd=function(t,e){var r=xl(t);return{h:r.h,s:Yn(r.s+100*e,0,100),l:r.l,a:r.a}},bd=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},u_=function(t,e){var r=xl(t);return{h:r.h,s:r.s,l:Yn(r.l+100*e,0,100),a:r.a}},rg=function(){function t(e){this.parsed=EE(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Mr(bd(this.rgba),2)},t.prototype.isDark=function(){return bd(this.rgba)<.5},t.prototype.isLight=function(){return bd(this.rgba)>=.5},t.prototype.toHex=function(){return e=_d(this.rgba),r=e.r,n=e.g,s=e.b,u=(a=e.a)<1?Wu(Mr(255*a)):"","#"+Wu(r)+Wu(n)+Wu(s)+u;var e,r,n,s,a,u},t.prototype.toRgb=function(){return _d(this.rgba)},t.prototype.toRgbString=function(){return e=_d(this.rgba),r=e.r,n=e.g,s=e.b,(a=e.a)<1?"rgba("+r+", "+n+", "+s+", "+a+")":"rgb("+r+", "+n+", "+s+")";var e,r,n,s,a},t.prototype.toHsl=function(){return o_(xl(this.rgba))},t.prototype.toHslString=function(){return e=o_(xl(this.rgba)),r=e.h,n=e.s,s=e.l,(a=e.a)<1?"hsla("+r+", "+n+"%, "+s+"%, "+a+")":"hsl("+r+", "+n+"%, "+s+"%)";var e,r,n,s,a},t.prototype.toHsv=function(){return e=_b(this.rgba),{h:Mr(e.h),s:Mr(e.s),v:Mr(e.v),a:Mr(e.a,3)};var e},t.prototype.invert=function(){return Ci({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Ci(xd(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ci(xd(this.rgba,-e))},t.prototype.grayscale=function(){return Ci(xd(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Ci(u_(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Ci(u_(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Ci({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Mr(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=xl(this.rgba);return typeof e=="number"?Ci({h:e,s:r.s,l:r.l,a:r.a}):Mr(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Ci(e).toHex()},t}(),Ci=function(t){return t instanceof rg?t:new rg(t)},h_=[],CE=function(t){t.forEach(function(e){h_.indexOf(e)<0&&(e(rg,tg),h_.push(e))})};function AE(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in r)n[r[s]]=s;var a={};t.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,p=n[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),_=1/0,x="black";if(!a.length)for(var S in r)a[S]=new t(r[S]).toRgb();for(var E in r){var I=(c=m,d=a[E],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));I<_&&(_=I,x=E)}return x}},e.string.push([function(u){var c=u.toLowerCase(),d=c==="transparent"?"#0000":r[c];return d?new t(d).toRgb():null},"name"])}CE([AE]);const ha=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ha)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,a)=>s===e[a]);if(t!==null&&e!==null){const s=Object.keys(t),a=Object.keys(e);return s.length!==a.length?!1:s.every(u=>t[u]===e[u])}return t===e}toRgba(){const[t,e,r,n]=this._components;return{r:t,g:e,b:r,a:n}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,r,n]=this._components;return t[0]=e,t[1]=r,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,n,s]=ha.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return e&&(r=r*t+.5|0,n=n*t+.5|0,s=s*t+.5|0),(t*255<<24)+(r<<16)+(n<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,r,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(r*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,r,n,s]=this._components;return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t}normalize(t){let e,r,n,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const a=t;e=(a>>16&255)/255,r=(a>>8&255)/255,n=(a&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,n,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,n,s=255]=t,e/=255,r/=255,n/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const u=ha.HEX_PATTERN.exec(t);u&&(t=`#${u[2]}`)}const a=Ci(t);a.isValid()&&({r:e,g:r,b:n,a:s}=a.rgba,e/=255,r/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((n,s)=>{t[s]=Math.min(Math.max(n,e),r)}),t)}};let Tt=ha;Tt.shared=new ha;Tt.temp=new ha;Tt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function PE(t,e=[]){return yt("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Tt.shared.setValue(t).toRgbArray(e)}function bb(t){return yt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Tt.shared.setValue(t).toHex()}function RE(t){return yt("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),Tt.shared.setValue(t).toNumber()}function wb(t){return yt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Tt.shared.setValue(t).toNumber()}function IE(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[Fe.NORMAL_NPM]=Fe.NORMAL,t[Fe.ADD_NPM]=Fe.ADD,t[Fe.SCREEN_NPM]=Fe.SCREEN,e[Fe.NORMAL]=Fe.NORMAL_NPM,e[Fe.ADD]=Fe.ADD_NPM,e[Fe.SCREEN]=Fe.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const Og=IE();function Lg(t,e){return Og[e?1:0][t]}function ME(t,e,r,n=!0){return yt("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),Tt.shared.setValue(t).premultiply(e,n).toArray(r??new Float32Array(4))}function kE(t,e){return yt("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),Tt.shared.setValue(t).toPremultiplied(e)}function FE(t,e,r,n=!0){return yt("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),Tt.shared.setValue(t).premultiply(e,n).toArray(r??new Float32Array(4))}const Tb=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Sb(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,s=0;n<r;n+=6,s+=4)e[n+0]=s+0,e[n+1]=s+1,e[n+2]=s+2,e[n+3]=s+0,e[n+4]=s+2,e[n+5]=s+3;return e}function Ph(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}const DE={Float32Array,Uint32Array,Int32Array,Uint8Array};function BE(t,e){let r=0,n=0;const s={};for(let d=0;d<t.length;d++)n+=e[d],r+=t[d].length;const a=new ArrayBuffer(r*4);let u=null,c=0;for(let d=0;d<t.length;d++){const p=e[d],m=t[d],_=Ph(m);s[_]||(s[_]=new DE[_](a)),u=s[_];for(let x=0;x<m.length;x++){const S=(x/p|0)*n+c,E=x%p;u[S+E]=m[x]}c+=p}return new Float32Array(a)}function Tl(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function ng(t){return!(t&t-1)&&!!t}function ig(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function mo(t,e,r){const n=t.length;let s;if(e>=n||r===0)return;r=e+r>n?n-e:r;const a=n-r;for(s=e;s<a;++s)t[s]=t[s+r];t.length=a}function Qi(t){return t===0?0:t<0?-1:1}let OE=0;function ks(){return++OE}const Eb=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let vh=Eb;vh.EMPTY=new Eb(0,0,0,0);const sg={},sn=Object.create(null),Dn=Object.create(null);function LE(){let t;for(t in sn)sn[t].destroy();for(t in Dn)Dn[t].destroy()}function NE(){let t;for(t in sn)delete sn[t];for(t in Dn)delete Dn[t]}class Fl{constructor(e,r,n){this._canvas=We.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||We.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function c_(t,e,r){for(let n=0,s=4*r*e;n<e;++n,s+=4)if(t[s+3]!==0)return!1;return!0}function f_(t,e,r,n,s){const a=4*e;for(let u=n,c=n*a+4*r;u<=s;++u,c+=a)if(t[c+3]!==0)return!1;return!0}function Cb(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const a=n.getImageData(0,0,e,r).data;let u=0,c=0,d=e-1,p=r-1;for(;c<r&&c_(a,e,c);)++c;if(c===r)return vh.EMPTY;for(;c_(a,e,p);)--p;for(;f_(a,e,u,c,p);)++u;for(;f_(a,e,d,c,p);)--d;return++d,++p,new vh(u,c,d,p)}function Ab(t){const e=Cb(t),{width:r,height:n}=e;let s=null;if(!e.isEmpty()){const a=t.getContext("2d");if(a===null)throw new TypeError("Failed to get canvas 2D context");s=a.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:s}}function UE(t){const e=Tb.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}let Xu;function Pb(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,Xu||(Xu=document.createElement("a")),Xu.href=t;const r=gb.parse(Xu.href),n=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!n||r.protocol!==e.protocol?"anonymous":""}function ts(t,e=1){var n;const r=(n=We.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}const GE=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Dn,BoundingBox:vh,CanvasRenderTarget:Fl,DATA_URI:Tb,EventEmitter:ma,ProgramCache:sg,TextureCache:sn,clearTextureCache:NE,correctBlendMode:Lg,createIndicesForQuads:Sb,decomposeDataUri:UE,deprecation:yt,destroyTextureCache:LE,determineCrossOrigin:Pb,earcut:ub,getBufferType:Ph,getCanvasBoundingBox:Cb,getResolutionOfUrl:ts,hex2rgb:PE,hex2string:bb,interleaveTypedArrays:BE,isMobile:Pi,isPow2:ng,isWebGLSupported:yb,log2:ig,nextPow2:Tl,path:Gr,premultiplyBlendMode:Og,premultiplyRgba:ME,premultiplyTint:kE,premultiplyTintToRgba:FE,removeItems:mo,rgb2hex:wb,sayHello:vE,sign:Qi,skipHello:yE,string2hex:RE,trimCanvas:Ab,uid:ks,url:gb},Symbol.toStringTag,{value:"Module"}));var $e=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))($e||{});const og=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},d_=(t,e)=>og(t).priority??e,Ke={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(og).forEach(e=>{e.type.forEach(r=>{var n,s;return(s=(n=this._removeHandlers)[r])==null?void 0:s.call(n,e)})}),this},add(...t){return t.map(og).forEach(e=>{e.type.forEach(r=>{const n=this._addHandlers,s=this._queue;n[r]?n[r](e):(s[r]=s[r]||[],s[r].push(e))})}),this},handle(t,e,r){const n=this._addHandlers,s=this._removeHandlers;if(n[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,s[t]=r;const a=this._queue;return a[t]&&(a[t].forEach(u=>e(u)),delete a[t]),this},handleByMap(t,e){return this.handle(t,r=>{e[r.name]=r.ref},r=>{delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((s,a)=>d_(a,r)-d_(s,r)))},n=>{const s=e.indexOf(n.ref);s!==-1&&e.splice(s,1)})}};class ag{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const HE=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function jE(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function zE(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=HE.replace(/%forloop%/gi,jE(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const wd=0,Td=1,Sd=2,Ed=3,Cd=4,Ad=5;class ns{constructor(){this.data=0,this.blendMode=Fe.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<wd)}set blend(e){!!(this.data&1<<wd)!==e&&(this.data^=1<<wd)}get offsets(){return!!(this.data&1<<Td)}set offsets(e){!!(this.data&1<<Td)!==e&&(this.data^=1<<Td)}get culling(){return!!(this.data&1<<Sd)}set culling(e){!!(this.data&1<<Sd)!==e&&(this.data^=1<<Sd)}get depthTest(){return!!(this.data&1<<Ed)}set depthTest(e){!!(this.data&1<<Ed)!==e&&(this.data^=1<<Ed)}get depthMask(){return!!(this.data&1<<Ad)}set depthMask(e){!!(this.data&1<<Ad)!==e&&(this.data^=1<<Ad)}get clockwiseFrontFace(){return!!(this.data&1<<Cd)}set clockwiseFrontFace(e){!!(this.data&1<<Cd)!==e&&(this.data^=1<<Cd)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Fe.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new ns;return e.depthTest=!1,e.blend=!0,e}}const lg=[];function Rb(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=lg.length-1;n>=0;--n){const s=lg[n];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class mi{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,s,a,u,c,d){if(arguments.length>8)throw new Error("max arguments reached");const{name:p,items:m}=this;this._aliasCount++;for(let _=0,x=m.length;_<x;_++)m[_][p](e,r,n,s,a,u,c,d);return m===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(mi.prototype,{dispatch:{value:mi.prototype.emit},run:{value:mi.prototype.emit}});class Sl{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new mi("setRealSize"),this.onUpdate=new mi("update"),this.onError=new mi("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class Dl extends Sl{constructor(e,r){const{width:n,height:s}=r||{};if(!n||!s)throw new Error("BufferResource width or height invalid");super(n,s),this.data=e}upload(e,r,n){const s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===yi.UNPACK);const a=r.realWidth,u=r.realHeight;return n.width===a&&n.height===u?s.texSubImage2D(r.target,0,0,0,a,u,r.format,n.type,this.data):(n.width=a,n.height=u,s.texImage2D(r.target,0,n.internalFormat,a,u,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const $E={scaleMode:di.NEAREST,format:ze.RGBA,alphaMode:yi.NPM},na=class extends ma{constructor(t=null,e=null){super(),e=Object.assign({},na.defaultOptions,e);const{alphaMode:r,mipmap:n,anisotropicLevel:s,scaleMode:a,width:u,height:c,wrapMode:d,format:p,type:m,target:_,resolution:x,resourceOptions:S}=e;t&&!(t instanceof Sl)&&(t=Rb(t,S),t.internal=!0),this.resolution=x||We.RESOLUTION,this.width=Math.round((u||0)*this.resolution)/this.resolution,this.height=Math.round((c||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=d,this._scaleMode=a,this.format=p,this.type=m,this.target=_,this.alphaMode=r,this.uid=ks(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=u>0&&c>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=ng(this.realWidth)&&ng(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Dn[this.cacheId],delete sn[this.cacheId],this.cacheId=null),this.dispose(),na.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=We.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else{if(!t._pixiId){const u=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${u}_${ks()}`}s=t._pixiId}let a=Dn[s];if(n&&r&&!a)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return a||(a=new na(t,e),a.cacheId=s,na.addToCache(a,s)),a}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const s=new Dl(t,{width:e,height:r}),a=t instanceof Float32Array?ht.FLOAT:ht.UNSIGNED_BYTE;return new na(s,Object.assign({},$E,{type:a},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Dn[e]&&Dn[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Dn[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Dn[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Dn[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Dn[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let pt=na;pt.defaultOptions={mipmap:Mi.POW2,anisotropicLevel:0,scaleMode:di.LINEAR,wrapMode:Ji.CLAMP,alphaMode:yi.UNPACK,target:ua.TEXTURE_2D,format:ze.RGBA,type:ht.UNSIGNED_BYTE};pt._globalBatch=0;class ug{constructor(){this.texArray=null,this.blend=0,this.type=fi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let VE=0,Er=class Ib{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=VE++,this.disposeRunner=new mi("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Ri.ELEMENT_ARRAY_BUFFER:Ri.ARRAY_BUFFER}get index(){return this.type===Ri.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Ib(e)}};class _h{constructor(e,r=0,n=!1,s=ht.FLOAT,a,u,c,d=1){this.buffer=e,this.size=r,this.normalized=n,this.type=s,this.stride=a,this.start=u,this.instance=c,this.divisor=d}destroy(){this.buffer=null}static from(e,r,n,s,a){return new _h(e,r,n,s,a)}}const WE={Float32Array,Uint32Array,Int32Array,Uint8Array};function XE(t,e){let r=0,n=0;const s={};for(let d=0;d<t.length;d++)n+=e[d],r+=t[d].length;const a=new ArrayBuffer(r*4);let u=null,c=0;for(let d=0;d<t.length;d++){const p=e[d],m=t[d],_=Ph(m);s[_]||(s[_]=new WE[_](a)),u=s[_];for(let x=0;x<m.length;x++){const S=(x/p|0)*n+c,E=x%p;u[S+E]=m[x]}c+=p}return new Float32Array(a)}const p_={5126:4,5123:2,5121:1};let qE=0;const YE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let Bl=class hg{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=qE++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new mi("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,s=!1,a,u,c,d=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Er||(r instanceof Array&&(r=new Float32Array(r)),r=new Er(r));const p=e.split("|");if(p.length>1){for(let _=0;_<p.length;_++)this.addAttribute(p[_],r,n,s,a);return this}let m=this.buffers.indexOf(r);return m===-1&&(this.buffers.push(r),m=this.buffers.length-1),this.attributes[e]=new _h(m,n,s,a,u,c,d),this.instanced=this.instanced||d,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Er||(e instanceof Array&&(e=new Uint16Array(e)),e=new Er(e)),e.type=Ri.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new Er;let s;for(s in this.attributes){const a=this.attributes[s],u=this.buffers[a.buffer];e.push(u.data),r.push(a.size*p_[a.type]/4),a.buffer=0}for(n.data=XE(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new hg;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new Er(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new _h(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ri.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new hg,n=[],s=[],a=[];let u;for(let c=0;c<e.length;c++){u=e[c];for(let d=0;d<u.buffers.length;d++)s[d]=s[d]||0,s[d]+=u.buffers[d].data.length,a[d]=0}for(let c=0;c<u.buffers.length;c++)n[c]=new YE[Ph(u.buffers[c].data)](s[c]),r.buffers[c]=new Er(n[c]);for(let c=0;c<e.length;c++){u=e[c];for(let d=0;d<u.buffers.length;d++)n[d].set(u.buffers[d].data,a[d]),a[d]+=u.buffers[d].data.length}if(r.attributes=u.attributes,u.indexBuffer){r.indexBuffer=r.buffers[u.buffers.indexOf(u.indexBuffer)],r.indexBuffer.type=Ri.ELEMENT_ARRAY_BUFFER;let c=0,d=0,p=0,m=0;for(let _=0;_<u.buffers.length;_++)if(u.buffers[_]!==u.indexBuffer){m=_;break}for(const _ in u.attributes){const x=u.attributes[_];(x.buffer|0)===m&&(d+=x.size*p_[x.type]/4)}for(let _=0;_<e.length;_++){const x=e[_].indexBuffer.data;for(let S=0;S<x.length;S++)r.indexBuffer.data[S+p]+=c;c+=e[_].buffers[m].data.length/d,p+=x.length}}return r}};class Mb extends Bl{constructor(e=!1){super(),this._buffer=new Er(null,e,!1),this._indexBuffer=new Er(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ht.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ht.FLOAT).addAttribute("aColor",this._buffer,4,!0,ht.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ht.FLOAT).addIndex(this._indexBuffer)}}const xh=Math.PI*2,KE=180/Math.PI,ZE=Math.PI/180;var Wt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Wt||{});class Pt{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Pt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const qu=[new Pt,new Pt,new Pt,new Pt];let Rt=class cg{constructor(e=0,r=0,n=0,s=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(s),this.type=Wt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new cg(0,0,0,0)}clone(){return new cg(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const ie=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ie)return!1;const _e=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>_e}const n=this.left,s=this.right,a=this.top,u=this.bottom;if(s<=n||u<=a)return!1;const c=qu[0].set(e.left,e.top),d=qu[1].set(e.left,e.bottom),p=qu[2].set(e.right,e.top),m=qu[3].set(e.right,e.bottom);if(p.x<=c.x||d.y<=c.y)return!1;const _=Math.sign(r.a*r.d-r.b*r.c);if(_===0||(r.apply(c,c),r.apply(d,d),r.apply(p,p),r.apply(m,m),Math.max(c.x,d.x,p.x,m.x)<=n||Math.min(c.x,d.x,p.x,m.x)>=s||Math.max(c.y,d.y,p.y,m.y)<=a||Math.min(c.y,d.y,p.y,m.y)>=u))return!1;const x=_*(d.y-c.y),S=_*(c.x-d.x),E=x*n+S*a,I=x*s+S*a,A=x*n+S*u,R=x*s+S*u;if(Math.max(E,I,A,R)<=x*c.x+S*c.y||Math.min(E,I,A,R)>=x*m.x+S*m.y)return!1;const O=_*(c.y-p.y),L=_*(p.x-c.x),X=O*n+L*a,N=O*s+L*a,Z=O*n+L*u,G=O*s+L*u;return!(Math.max(X,N,Z,G)<=O*c.x+L*c.y||Math.min(X,N,Z,G)>=O*m.x+L*m.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=s,this.height=Math.max(a-s,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=s-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=s,this.height=a-s,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}},kb=class Fb{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=Wt.CIRC}clone(){return new Fb(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let s=this.x-e,a=this.y-r;return s*=s,a*=a,s+a<=n}getBounds(){return new Rt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},Db=class Bb{constructor(e=0,r=0,n=0,s=0){this.x=e,this.y=r,this.width=n,this.height=s,this.type=Wt.ELIP}clone(){return new Bb(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,s=(r-this.y)/this.height;return n*=n,s*=s,n+s<=1}getBounds(){return new Rt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}},bl=class Ob{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let s=0,a=r.length;s<a;s++)n.push(r[s].x,r[s].y);r=n}this.points=r,this.type=Wt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new Ob(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const s=this.points.length/2;for(let a=0,u=s-1;a<s;u=a++){const c=this.points[a*2],d=this.points[a*2+1],p=this.points[u*2],m=this.points[u*2+1];d>r!=m>r&&e<(p-c)*((r-d)/(m-d))+c&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,r)=>`${e}, ${r}`,"")}]`}},Lb=class Nb{constructor(e=0,r=0,n=0,s=0,a=20){this.x=e,this.y=r,this.width=n,this.height=s,this.radius=a,this.type=Wt.RREC}clone(){return new Nb(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let s=e-(this.x+n),a=r-(this.y+n);const u=n*n;if(s*s+a*a<=u||(s=e-(this.x+this.width-n),s*s+a*a<=u)||(a=r-(this.y+this.height-n),s*s+a*a<=u)||(s=e-(this.x+n),s*s+a*a<=u))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};class Nt{constructor(e=1,r=0,n=0,s=1,a=0,u=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=s,this.tx=a,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,s,a,u){return this.a=e,this.b=r,this.c=n,this.d=s,this.tx=a,this.ty=u,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new Pt;const n=e.x,s=e.y;return r.x=this.a*n+this.c*s+this.tx,r.y=this.b*n+this.d*s+this.ty,r}applyInverse(e,r){r=r||new Pt;const n=1/(this.a*this.d+this.c*-this.b),s=e.x,a=e.y;return r.x=this.d*n*s+-this.c*n*a+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*a+-this.b*n*s+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),s=this.a,a=this.c,u=this.tx;return this.a=s*r-this.b*n,this.b=s*n+this.b*r,this.c=a*r-this.d*n,this.d=a*n+this.d*r,this.tx=u*r-this.ty*n,this.ty=u*n+this.ty*r,this}append(e){const r=this.a,n=this.b,s=this.c,a=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*n+e.b*a,this.c=e.c*r+e.d*s,this.d=e.c*n+e.d*a,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*n+e.ty*a+this.ty,this}setTransform(e,r,n,s,a,u,c,d,p){return this.a=Math.cos(c+p)*a,this.b=Math.sin(c+p)*a,this.c=-Math.sin(c-d)*u,this.d=Math.cos(c-d)*u,this.tx=e-(n*this.a+s*this.c),this.ty=r-(n*this.b+s*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,s=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,s=this.c,a=this.d,u=e.pivot,c=-Math.atan2(-s,a),d=Math.atan2(n,r),p=Math.abs(c+d);return p<1e-5||Math.abs(xh-p)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=d),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(u.x*r+u.y*s),e.position.y=this.ty+(u.x*n+u.y*a),e}invert(){const e=this.a,r=this.b,n=this.c,s=this.d,a=this.tx,u=e*s-r*n;return this.a=s/u,this.b=-r/u,this.c=-n/u,this.d=e/u,this.tx=(n*this.ty-s*a)/u,this.ty=-(e*this.ty-r*a)/u,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Nt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Nt}static get TEMP_MATRIX(){return new Nt}}const lo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ho=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],co=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],fg=[],Ub=[],Yu=Math.sign;function QE(){for(let t=0;t<16;t++){const e=[];fg.push(e);for(let r=0;r<16;r++){const n=Yu(lo[t]*lo[r]+ho[t]*uo[r]),s=Yu(uo[t]*lo[r]+co[t]*uo[r]),a=Yu(lo[t]*ho[r]+ho[t]*co[r]),u=Yu(uo[t]*ho[r]+co[t]*co[r]);for(let c=0;c<16;c++)if(lo[c]===n&&uo[c]===s&&ho[c]===a&&co[c]===u){e.push(c);break}}}for(let t=0;t<16;t++){const e=new Nt;e.set(lo[t],uo[t],ho[t],co[t],0,0),Ub.push(e)}}QE();const Jt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>lo[t],uY:t=>uo[t],vX:t=>ho[t],vY:t=>co[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>fg[t][e],sub:(t,e)=>fg[t][Jt.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Jt.S:Jt.N:Math.abs(e)*2<=Math.abs(t)?t>0?Jt.E:Jt.W:e>0?t>0?Jt.SE:Jt.SW:t>0?Jt.NE:Jt.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const s=Ub[Jt.inv(e)];s.tx=r,s.ty=n,t.append(s)}};class Ms{constructor(e,r,n=0,s=0){this._x=n,this._y=s,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new Ms(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const Gb=class{constructor(){this.worldTransform=new Nt,this.localTransform=new Nt,this.position=new Ms(this.onChange,this,0,0),this.scale=new Ms(this.onChange,this,1,1),this.pivot=new Ms(this.onChange,this,0,0),this.skew=new Ms(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Rh=Gb;Rh.IDENTITY=new Gb;var JE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,eC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function m_(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Pd(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function Hb(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Pd(2*e);case"bvec3":return Pd(3*e);case"bvec4":return Pd(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ca=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],tC={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},rC={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function nC(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in t.uniforms){const a=e[s];if(!a){(n=t.uniforms[s])!=null&&n.group&&(t.uniforms[s].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const u=t.uniforms[s];let c=!1;for(let d=0;d<ca.length;d++)if(ca[d].test(a,u)){r.push(ca[d].code(s,u)),c=!0;break}if(!c){const p=(a.size===1&&!a.isArray?tC:rC)[a.type].replace("location",`ud["${s}"].location`);r.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${p};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const jb={};let ta=jb;function iC(){if(ta===jb||ta!=null&&ta.isContextLost()){const t=We.ADAPTER.createCanvas();let e;We.PREFER_ENV>=_o.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),ta=e}return ta}let Ku;function sC(){if(!Ku){Ku=qn.MEDIUM;const t=iC();t&&t.getShaderPrecisionFormat&&(Ku=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?qn.HIGH:qn.MEDIUM)}return Ku}function g_(t,e){const r=t.getShaderSource(e).split(`
`).map((p,m)=>`${m}: ${p}`),n=t.getShaderInfoLog(e),s=n.split(`
`),a={},u=s.map(p=>parseFloat(p.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(p=>p&&!a[p]?(a[p]=!0,!0):!1),c=[""];u.forEach(p=>{r[p-1]=`%c${r[p-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const d=r.join(`
`);c[0]=d,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function oC(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||g_(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||g_(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const aC={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function zb(t){return aC[t]}let Zu=null;const y_={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function $b(t,e){if(!Zu){const r=Object.keys(y_);Zu={};for(let n=0;n<r.length;++n){const s=r[n];Zu[t[s]]=y_[s]}}return Zu[e]}function v_(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===qn.HIGH&&r!==qn.HIGH&&(n=qn.MEDIUM),`precision ${n} float;
${t}`}else if(r!==qn.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let nl;function lC(){if(typeof nl=="boolean")return nl;try{nl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{nl=!1}return nl}let uC=0;const Qu={},ia=class{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=uC++,this.vertexSrc=t||ia.defaultVertexSrc,this.fragmentSrc=e||ia.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Qu[r]?(Qu[r]++,r+=`-${Qu[r]}`):Qu[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=v_(this.vertexSrc,ia.defaultVertexPrecision,qn.HIGH),this.fragmentSrc=v_(this.fragmentSrc,ia.defaultFragmentPrecision,sC())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return eC}static get defaultFragmentSrc(){return JE}static from(t,e,r){const n=t+e;let s=sg[n];return s||(sg[n]=s=new ia(t,e,r)),s}};let pi=ia;pi.defaultVertexPrecision=qn.HIGH;pi.defaultFragmentPrecision=Pi.apple.device?qn.HIGH:qn.MEDIUM;let hC=0;class gi{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=hC++,this.static=!!r,this.ubo=!!n,e instanceof Er?(this.buffer=e,this.buffer.type=Ri.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Er(new Float32Array(1)),this.buffer.type=Ri.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new gi(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new gi(e,r,n)}static uboFrom(e,r){return new gi(e,r??!0,!0)}}class Ii{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof gi?this.uniformGroup=r:this.uniformGroup=new gi(r):this.uniformGroup=new gi({}),this.disposeRunner=new mi("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const s=r.uniforms[n];if(s.group&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const s=pi.from(e,r);return new Ii(s,n)}}class cC{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let a=0;a<e;a++)n[a]=a;this.defaultGroupCache[e]=gi.from({uSamplers:n},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new pi(this.vertexSrc,s)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:this.defaultGroupCache[e]};return new Ii(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class dg{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function fC(){return!Pi.apple.device}function dC(t){let e=!0;const r=We.ADAPTER.getNavigator();if(Pi.tablet||Pi.phone){if(Pi.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Pi.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class Ih{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var pC=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,mC=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const si=class extends Ih{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Mb,this.vertexSize=6,this.state=ns.for2d(),this.size=si.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??dC(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??fC(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return yt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return mC}static get defaultFragmentTemplate(){return pC}setShaderGenerator({vertex:t=si.defaultVertexSrc,fragment:e=si.defaultFragmentTemplate}={}){this.shaderGenerator=new cC(t,e)}contextChange(){const t=this.renderer.gl;We.PREFER_ENV===_o.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),si.defaultMaxTextures),this.maxTextures=zE(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=si,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new ug);for(;e.length<n;)e.push(new dg);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=si._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,a=this.renderer.textureGC.count;let u=++pt._globalBatch,c=0,d=r[0],p=0;n.copyBoundTextures(s,e);for(let m=0;m<this._bufferSize;++m){const _=t[m];t[m]=null,_._batchEnabled!==u&&(d.count>=e&&(n.boundArray(d,s,u,e),this.buildDrawCalls(d,p,m),p=m,d=r[++c],++u),_._batchEnabled=u,_.touched=a,d.elements[d.count++]=_)}d.count>0&&(n.boundArray(d,s,u,e),this.buildDrawCalls(d,p,this._bufferSize),++c,++u);for(let m=0;m<s.length;m++)s[m]=null;pt._globalBatch=u}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:a,vertexSize:u}=this,c=si._drawCallPool;let d=this._dcIndex,p=this._aIndex,m=this._iIndex,_=c[d];_.start=this._iIndex,_.texArray=t;for(let x=e;x<r;++x){const S=n[x],E=S._texture.baseTexture,I=Og[E.alphaMode?1:0][S.blendMode];n[x]=null,e<x&&_.blend!==I&&(_.size=m-_.start,e=x,_=c[++d],_.texArray=t,_.start=m),this.packInterleavedGeometry(S,s,a,p,m),p+=S.vertexData.length/2*u,m+=S.indices.length,_.blend=I}e<r&&(_.size=m-_.start,++d),this._dcIndex=d,this._aIndex=p,this._iIndex=m}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;si.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=si._drawCallPool;let s=null;for(let a=0;a<t;a++){const{texArray:u,type:c,size:d,start:p,blend:m}=n[a];s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=m,r.set(this.state),e.drawElements(c,d,e.UNSIGNED_SHORT,p*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),si.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Tl(Math.ceil(t/8)),r=ig(e),n=e*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new ag(n*this.vertexSize*4)),s}getIndexBuffer(t){const e=Tl(Math.ceil(t/12)),r=ig(e),n=e*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(n)),s}packInterleavedGeometry(t,e,r,n,s){const{uint32View:a,float32View:u}=e,c=n/this.vertexSize,d=t.uvs,p=t.indices,m=t.vertexData,_=t._texture.baseTexture._batchLocation,x=Math.min(t.worldAlpha,1),S=Tt.shared.setValue(t._tintRGB).toPremultiplied(x,t._texture.baseTexture.alphaMode>0);for(let E=0;E<m.length;E+=2)u[n++]=m[E],u[n++]=m[E+1],u[n++]=d[E],u[n++]=d[E+1],a[n++]=S,u[n++]=_;for(let E=0;E<p.length;E++)r[s++]=c+p[E]}};let ui=si;ui.defaultBatchSize=4096;ui.extension={name:"batch",type:$e.RendererPlugin};ui._drawCallPool=[];ui._textureArrayPool=[];Ke.add(ui);var gC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,yC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const fl=class extends Ii{constructor(t,e,r){const n=pi.from(t||fl.defaultVertexSrc,e||fl.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=fl.defaultResolution,this.multisample=fl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ns}apply(t,e,r,n,s){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return yC}static get defaultFragmentSrc(){return gC}};let Ur=fl;Ur.defaultResolution=1;Ur.defaultMultisample=yr.NONE;class Mh{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Tt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:s}=e,a=n??r;a!==void 0&&(this.color=a),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Mh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Mh.extension={type:[$e.RendererSystem,$e.CanvasRendererSystem],name:"background"};Ke.add(Mh);class Vb{constructor(e){this.renderer=e,this.emptyRenderer=new Ih(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let s=r-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,r,n,s){const{elements:a,ids:u,count:c}=e;let d=0;for(let p=0;p<c;p++){const m=a[p],_=m._batchLocation;if(_>=0&&_<s&&r[_]===m){u[p]=_;continue}for(;d<s;){const x=r[d];if(x&&x._batchEnabled===n&&x._batchLocation===d){d++;continue}u[p]=d,m._batchLocation=d,r[d]=m;break}}}destroy(){this.renderer=null}}Vb.extension={type:$e.RendererSystem,name:"batch"};Ke.add(Vb);let __=0;class kh{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=__++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=__++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(We.PREFER_ENV>=_o.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}kh.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};kh.extension={type:$e.RendererSystem,name:"context"};Ke.add(kh);class vC extends Dl{upload(e,r,n){const s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===yi.UNPACK);const a=r.realWidth,u=r.realHeight;return n.width===a&&n.height===u?s.texSubImage2D(r.target,0,0,0,a,u,r.format,n.type,this.data):(n.width=a,n.height=u,s.texImage2D(r.target,0,n.internalFormat,a,u,0,r.format,n.type,this.data)),!0}}class pg{constructor(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new mi("disposeFramebuffer"),this.multisample=yr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new pt(null,{scaleMode:di.NEAREST,resolution:1,mipmap:Mi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new pt(new vC(null,{width:this.width,height:this.height}),{scaleMode:di.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Mi.OFF,format:ze.DEPTH_COMPONENT,type:ht.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const s=this.colorTextures[n],a=s.resolution;s.setSize(e/a,r/a)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Ng extends pt{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],s=arguments[2],a=arguments[3];e={width:r,height:n,scaleMode:s,resolution:a}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=yr.NONE),super(null,e),this.mipmap=Mi.OFF,this.valid=!0,this._clear=new Tt([0,0,0,0]),this.framebuffer=new pg(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fs extends Sl{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;super(n,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=Pb(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,s){const a=e.gl,u=r.realWidth,c=r.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1&&s.buffered.length===0)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===yi.UNPACK),!this.noSubImage&&r.target===a.TEXTURE_2D&&n.width===u&&n.height===c?a.texSubImage2D(a.TEXTURE_2D,0,0,0,r.format,n.type,s):(n.width=u,n.height=c,a.texImage2D(r.target,0,n.internalFormat,r.format,n.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class Wb extends Fs{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;Fs.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??We.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const s=this.source;this.url=s.src;const a=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.resize(s.width,s.height),this._load=null,this.createBitmap?r(this.process()):r(this))};s.complete&&s.src?a():(s.onload=a,s.onerror=u=>{n(u),this.onError.emit(u)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(s=>s.blob()).then(s=>r(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===yi.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let s=!0;const a=r._glTextures;for(const u in a){const c=a[u];if(c!==n&&c.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Xb{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const s=r.width,a=r.height;if(n){const u=e.width/2/s,c=e.height/2/a,d=e.x/s+u,p=e.y/a+c;n=Jt.add(n,Jt.NW),this.x0=d+u*Jt.uX(n),this.y0=p+c*Jt.uY(n),n=Jt.add(n,2),this.x1=d+u*Jt.uX(n),this.y1=p+c*Jt.uY(n),n=Jt.add(n,2),this.x2=d+u*Jt.uX(n),this.y2=p+c*Jt.uY(n),n=Jt.add(n,2),this.x3=d+u*Jt.uX(n),this.y3=p+c*Jt.uY(n)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const x_=new Xb;function Ju(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class qe extends ma{constructor(e,r,n,s,a,u,c){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Rt(0,0,1,1)),e instanceof qe&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=s,this.valid=!1,this._uvs=x_,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(a||0),a===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=u?new Pt(u.x,u.y):new Pt(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&sn[r.url]&&qe.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,qe.removeFromCache(this),this.textureCacheIds=null}clone(){var s;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new qe(this.baseTexture,!this.noFrame&&e,r,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===x_&&(this._uvs=new Xb),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=We.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let a=null;if(s)a=e;else if(e instanceof pt){if(!e.cacheId){const c=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${c}-${ks()}`,pt.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){const c=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${c}_${ks()}`}a=e._pixiId}let u=sn[a];if(s&&n&&!u)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return!u&&!(e instanceof pt)?(r.resolution||(r.resolution=ts(e)),u=new qe(new pt(e,r)),u.baseTexture.cacheId=a,pt.addToCache(u.baseTexture,a),qe.addToCache(u,a)):!u&&e instanceof pt&&(u=new qe(e),qe.addToCache(u,a)),u}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=qe.from(e,Object.assign({resourceOptions:n},r),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(()=>Promise.resolve(s))}static fromBuffer(e,r,n,s){return new qe(pt.fromBuffer(e,r,n,s))}static fromLoader(e,r,n,s){const a=new pt(e,Object.assign({scaleMode:pt.defaultOptions.scaleMode,resolution:ts(r)},s)),{resource:u}=a;u instanceof Wb&&(u.url=r);const c=new qe(a);return n||(n=r),pt.addToCache(c.baseTexture,n),qe.addToCache(c,n),n!==r&&(pt.addToCache(c.baseTexture,r),qe.addToCache(c,r)),c.baseTexture.valid?Promise.resolve(c):new Promise(d=>{c.baseTexture.once("loaded",()=>d(c))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),sn[r]&&sn[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),sn[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=sn[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete sn[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)sn[e.textureCacheIds[r]]===e&&delete sn[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:s,height:a}=e,u=r+s>this.baseTexture.width,c=n+a>this.baseTexture.height;if(u||c){const d=u&&c?"and":"or",p=`X: ${r} + ${s} = ${r+s} > ${this.baseTexture.width}`,m=`Y: ${n} + ${a} = ${n+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${p} ${d} ${m}`)}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return qe._EMPTY||(qe._EMPTY=new qe(new pt),Ju(qe._EMPTY),Ju(qe._EMPTY.baseTexture)),qe._EMPTY}static get WHITE(){if(!qe._WHITE){const e=We.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),qe._WHITE=new qe(pt.from(e)),Ju(qe._WHITE),Ju(qe._WHITE.baseTexture)}return qe._WHITE}}class ki extends qe{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const s=this.baseTexture.resolution,a=Math.round(e*s)/s,u=Math.round(r*s)/s;this.valid=a>0&&u>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=u,n&&this.baseTexture.resize(a,u),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new ki(new Ng(e))}}class qb{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=yr.NONE){const s=new Ng(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new ki(s)}getOptimalTexture(e,r,n=1,s=yr.NONE){let a;e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=Tl(e),r=Tl(r),a=((e&65535)<<16|r&65535)>>>0,s>1&&(a+=s*4294967296)):a=s>1?-s:-1,this.texturePool[a]||(this.texturePool[a]=[]);let u=this.texturePool[a].pop();return u||(u=this.createTexture(e,r,s)),u.filterPoolKey=a,u.setResolution(n),u}getFilterTexture(e,r,n){const s=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||yr.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}qb.SCREEN_KEY=-1;class _C extends Bl{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Yb extends Bl{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Er(this.vertices),this.uvBuffer=new Er(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+r.width/e.width,this.uvs[3]=s,this.uvs[4]=n+r.width/e.width,this.uvs[5]=s+r.height/e.height,this.uvs[6]=n,this.uvs[7]=s+r.height/e.height,n=r.x,s=r.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+r.width,this.vertices[3]=s,this.vertices[4]=n+r.width,this.vertices[5]=s+r.height,this.vertices[6]=n,this.vertices[7]=s+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class xC{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=yr.NONE,this.sourceFrame=new Rt,this.destinationFrame=new Rt,this.bindingSourceFrame=new Rt,this.bindingDestinationFrame=new Rt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const eh=[new Pt,new Pt,new Pt,new Pt],Rd=new Nt;class Kb{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new qb,this.statePool=[],this.quad=new _C,this.quadUv=new Yb,this.tempRect=new Rt,this.activeState={},this.globalUniforms=new gi({outputFrame:new Rt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new xC,u=this.renderer.renderTexture;let c=r[0].resolution,d=r[0].multisample,p=r[0].padding,m=r[0].autoFit,_=r[0].legacy??!0;for(let E=1;E<r.length;E++){const I=r[E];c=Math.min(c,I.resolution),d=Math.min(d,I.multisample),p=this.useMaxPadding?Math.max(p,I.padding):p+I.padding,m=m&&I.autoFit,_=_||(I.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=u.current),s.push(a),a.resolution=c,a.multisample=d,a.legacy=_,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(p);const x=this.tempRect.copyFrom(u.sourceFrame);n.projection.transform&&this.transformAABB(Rd.copyFrom(n.projection.transform).invert(),x),m?(a.sourceFrame.fit(x),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(x)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,u.current?u.current.resolution:n.resolution,u.sourceFrame,u.destinationFrame,n.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,c,d),a.filters=r,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const S=this.tempRect;S.x=0,S.y=0,S.width=a.sourceFrame.width,S.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(u.sourceFrame),a.bindingDestinationFrame.copyFrom(u.destinationFrame),a.transform=n.projection.transform,n.projection.transform=null,u.bind(a.renderTexture,a.sourceFrame,S),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;const a=s.inputSize,u=s.inputPixel,c=s.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],u[0]=Math.round(a[0]*r.resolution),u[1]=Math.round(a[1]*r.resolution),u[2]=1/u[0],u[3]=1/u[1],c[0]=.5*u[2],c[1]=.5*u[3],c[2]=r.sourceFrame.width*a[2]-.5*u[2],c[3]=r.sourceFrame.height*a[3]-.5*u[3],r.legacy){const p=s.filterArea;p[0]=r.destinationFrame.width,p[1]=r.destinationFrame.height,p[2]=r.sourceFrame.x,p[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const d=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,d.renderTexture,Ai.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let p=r.renderTexture,m=this.getOptimalFilterTexture(p.width,p.height,r.resolution);m.filterFrame=p.filterFrame;let _=0;for(_=0;_<n.length-1;++_){_===1&&r.multisample>1&&(m=this.getOptimalFilterTexture(p.width,p.height,r.resolution),m.filterFrame=p.filterFrame),n[_].apply(this,p,m,Ai.CLEAR,r);const x=p;p=m,m=x}n[_].apply(this,p,d.renderTexture,Ai.BLEND,r),_>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(p),this.returnFilterTexture(m)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=Ai.CLEAR){const{renderTexture:n,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const u=this.tempRect;u.x=0,u.y=0,u.width=e.filterFrame.width,u.height=e.filterFrame.height,n.bind(e,e.filterFrame,u)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=s.stateId&1||this.forceClear;(r===Ai.CLEAR||r===Ai.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,s){const a=this.renderer;a.state.set(e.state),this.bindAndClear(n,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(fi.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(fi.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:s}=this.activeState,{orig:a}=r._texture,u=e.set(s.width,0,0,s.height,n.x,n.y),c=r.worldTransform.copyTo(Nt.TEMP_MATRIX);return c.invert(),u.prepend(c),u.scale(1/a.width,1/a.height),u.translate(r.anchor.x,r.anchor.y),u}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,s=yr.NONE){return this.texturePool.getOptimalTexture(e,r,n,s)}getFilterTexture(e,r,n){if(typeof e=="number"){const a=e;e=r,r=a}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||yr.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=eh[0],s=eh[1],a=eh[2],u=eh[3];n.set(r.left,r.top),s.set(r.left,r.bottom),a.set(r.right,r.top),u.set(r.right,r.bottom),e.apply(n,n),e.apply(s,s),e.apply(a,a),e.apply(u,u);const c=Math.min(n.x,s.x,a.x,u.x),d=Math.min(n.y,s.y,a.y,u.y),p=Math.max(n.x,s.x,a.x,u.x),m=Math.max(n.y,s.y,a.y,u.y);r.x=c,r.y=d,r.width=p-c,r.height=m-d}roundFrame(e,r,n,s,a){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(a){const{a:u,b:c,c:d,d:p}=a;if((Math.abs(c)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(u)>1e-4||Math.abs(p)>1e-4))return}a=a?Rd.copyFrom(a):Rd.identity(),a.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.transformAABB(a,e),e.ceil(r),this.transformAABB(a.invert(),e)}}}Kb.extension={type:$e.RendererSystem,name:"filter"};Ke.add(Kb);class bC{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=yr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const wC=new Rt;class Zb{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new pg(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;We.PREFER_ENV===_o.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=s=>r.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:s}=this;if(e){const a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=n),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let u=0;u<e.colorTextures.length;u++){const c=e.colorTextures[u];this.renderer.texture.unbind(c.parentTextureArray||c)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const u=r.width>>n,c=r.height>>n,d=u/r.width;this.setViewport(r.x*d,r.y*d,u,c)}else{const u=e.width>>n,c=e.height>>n;this.setViewport(0,0,u,c)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,s){const a=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),s=Math.round(s),(a.width!==n||a.height!==s||a.x!==e||a.y!==r)&&(a.x=e,a.y=r,a.width=n,a.height=s,this.gl.viewport(e,r,n,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,s,a=Qm.COLOR|Qm.DEPTH){const{gl:u}=this;u.clearColor(e,r,n,s),u.clear(a)}initFramebuffer(e){const{gl:r}=this,n=new bC(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));const s=e.colorTextures;let a=s.length;r.drawBuffers||(a=Math.min(a,1));for(let u=0;u<a;u++){const c=s[u],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),u===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,s=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures;let u=a.length;n.drawBuffers||(u=Math.min(u,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||n.createRenderbuffer():s.msaaBuffer&&(n.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const c=[];for(let d=0;d<u;d++){const p=a[d],m=p.parentTextureArray||p;this.renderer.texture.bind(m,0),d===0&&s.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,m._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+d,p.target,m._glTextures[this.CONTEXT_UID].texture,r),c.push(n.COLOR_ATTACHMENT0+d))}if(c.length>1&&n.drawBuffers(c),e.depthTexture&&this.writeDepthTexture){const p=e.depthTexture;this.renderer.texture.bind(p,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,p._glTextures[this.CONTEXT_UID].texture,r)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s.stencil)):s.stencil&&(n.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=yr.NONE;if(e<=1||r===null)return n;for(let s=0;s<r.length;s++)if(r[s]<=e){n=r[s];break}return n===1&&(n=yr.NONE),n}blit(e,r,n){const{current:s,renderer:a,gl:u,CONTEXT_UID:c}=this;if(a.context.webGLVersion!==2||!s)return;const d=s.glFramebuffers[c];if(!d)return;if(!e){if(!d.msaaBuffer)return;const m=s.colorTextures[0];if(!m)return;d.blitFramebuffer||(d.blitFramebuffer=new pg(s.width,s.height),d.blitFramebuffer.addColorTexture(0,m)),e=d.blitFramebuffer,e.colorTextures[0]!==m&&(e.colorTextures[0]=m,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}r||(r=wC,r.width=s.width,r.height=s.height),n||(n=r);const p=r.width===n.width&&r.height===n.height;this.bind(e),u.bindFramebuffer(u.READ_FRAMEBUFFER,d.framebuffer),u.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,u.COLOR_BUFFER_BIT,p?u.NEAREST:u.LINEAR),u.bindFramebuffer(u.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&s.deleteRenderbuffer(n.msaaBuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;e.stencil=!0;const n=e.width,s=e.height,a=this.gl,u=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,u),r.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,r.multisample,a.DEPTH24_STENCIL8,n,s):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,s),r.stencil=u,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,u)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rt}destroy(){this.renderer=null}}Zb.extension={type:$e.RendererSystem,name:"framebuffer"};Ke.add(Zb);const Id={5126:4,5123:2,5121:1};class Qb{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;We.PREFER_ENV===_o.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=s=>n.bindVertexArrayOES(s),e.deleteVertexArray=s=>n.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(s,a)=>n.vertexAttribDivisorANGLE(s,a),e.drawElementsInstanced=(s,a,u,c,d)=>n.drawElementsInstancedANGLE(s,a,u,c,d),e.drawArraysInstanced=(s,a,u,c)=>n.drawArraysInstancedANGLE(s,a,u,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);const u=s[r.program.id]||this.initGeometryVao(e,r,a);this._activeGeometry=e,this._activeVao!==u&&(this._activeVao=u,this.hasVao?n.bindVertexArray(u):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const s=e.buffers[n];r.update(s)}}checkCompatibility(e,r){const n=e.attributes,s=r.attributeData;for(const a in s)if(!n[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(e,r){const n=e.attributes,s=r.attributeData,a=["g",e.id];for(const u in n)s[u]&&a.push(u,s[u].location);return a.join("-")}initGeometryVao(e,r,n=!0){const s=this.gl,a=this.CONTEXT_UID,u=this.renderer.buffer,c=r.program;c.glPrograms[a]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,c);const d=this.getSignature(e,c),p=e.glVertexArrayObjects[this.CONTEXT_UID];let m=p[d];if(m)return p[c.id]=m,m;const _=e.buffers,x=e.attributes,S={},E={};for(const I in _)S[I]=0,E[I]=0;for(const I in x)!x[I].size&&c.attributeData[I]?x[I].size=c.attributeData[I].size:x[I].size||console.warn(`PIXI Geometry attribute '${I}' size cannot be determined (likely the bound shader does not have the attribute)`),S[x[I].buffer]+=x[I].size*Id[x[I].type];for(const I in x){const A=x[I],R=A.size;A.stride===void 0&&(S[A.buffer]===R*Id[A.type]?A.stride=0:A.stride=S[A.buffer]),A.start===void 0&&(A.start=E[A.buffer],E[A.buffer]+=R*Id[A.type])}m=s.createVertexArray(),s.bindVertexArray(m);for(let I=0;I<_.length;I++){const A=_[I];u.bind(A),n&&A._glBuffers[a].refCount++}return this.activateVao(e,c),p[c.id]=m,p[d]=m,s.bindVertexArray(null),u.unbind(Ri.ARRAY_BUFFER),m}disposeGeometry(e,r){var c;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers,u=(c=this.renderer)==null?void 0:c.buffer;if(e.disposeRunner.remove(this),!!n){if(u)for(let d=0;d<a.length;d++){const p=a[d]._glBuffers[this.CONTEXT_UID];p&&(p.refCount--,p.refCount===0&&!r&&u.dispose(a[d],r))}if(!r){for(const d in n)if(d[0]==="g"){const p=n[d];this._activeVao===p&&this.unbind(),s.deleteVertexArray(p)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,u=e.buffers,c=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);let d=null;for(const p in c){const m=c[p],_=u[m.buffer],x=_._glBuffers[s];if(r.attributeData[p]){d!==x&&(a.bind(_),d=x);const S=r.attributeData[p].location;if(n.enableVertexAttribArray(S),n.vertexAttribPointer(S,m.size,m.type||n.FLOAT,m.normalized,m.stride,m.start),m.instance)if(this.hasInstance)n.vertexAttribDivisor(S,m.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,s){const{gl:a}=this,u=this._activeGeometry;if(u.indexBuffer){const c=u.indexBuffer.data.BYTES_PER_ELEMENT,d=c===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?u.instanced?a.drawElementsInstanced(e,r||u.indexBuffer.data.length,d,(n||0)*c,s||1):a.drawElements(e,r||u.indexBuffer.data.length,d,(n||0)*c):console.warn("unsupported index buffer type: uint32")}else u.instanced?a.drawArraysInstanced(e,n,r||u.getSize(),s||1):a.drawArrays(e,n,r||u.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Qb.extension={type:$e.RendererSystem,name:"geometry"};Ke.add(Qb);const b_=new Nt;class Ug{constructor(e,r){this._texture=e,this.mapCoord=new Nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let s=0;s<e.length;s+=2){const a=e[s],u=e[s+1];r[s]=a*n.a+u*n.c+n.tx,r[s+1]=a*n.b+u*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=r.orig,a=r.trim;a&&(b_.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(b_));const u=r.baseTexture,c=this.uClampFrame,d=this.clampMargin/u.resolution,p=this.clampOffset;return c[0]=(r._frame.x+d+p)/u.width,c[1]=(r._frame.y+d+p)/u.height,c[2]=(r._frame.x+r._frame.width-d+p)/u.width,c[3]=(r._frame.y+r._frame.height-d+p)/u.height,this.uClampOffset[0]=p/u.realWidth,this.uClampOffset[1]=p/u.realHeight,this.isSimple=r._frame.width===u.width&&r._frame.height===u.height&&r.rotate===0,!0}}var TC=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,SC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class EC extends Ur{constructor(e,r,n){let s=null;typeof e!="string"&&r===void 0&&n===void 0&&(s=e,e=void 0,r=void 0,n=void 0),super(e||SC,r||TC,n),this.maskSprite=s,this.maskMatrix=new Nt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,s){const a=this._maskSprite,u=a._texture;u.valid&&(u.uvMatrix||(u.uvMatrix=new Ug(u,0)),u.uvMatrix.update(),this.uniforms.npmAlpha=u.baseTexture.alphaMode?0:1,this.uniforms.mask=u,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(u.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=u.uvMatrix.uClampFrame,e.applyFilter(this,r,n,s))}}class CC{constructor(e=null){this.type=Tr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ur.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Tr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Jb{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const a=this.maskDataPool.pop()||new CC;a.pooled=!0,a.maskObject=r,n=a}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Tr.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Tr.SCISSOR:this.renderer.scissor.push(n);break;case Tr.STENCIL:this.renderer.stencil.push(n);break;case Tr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Tr.COLOR:this.pushColorMask(n);break}n.type===Tr.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Tr.SCISSOR:this.renderer.scissor.pop(r);break;case Tr.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Tr.SPRITE:this.popSpriteMask(r);break;case Tr.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Tr.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=Tr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Tr.SCISSOR:e.type=Tr.STENCIL:e.type=Tr.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new EC]));const a=this.renderer,u=a.renderTexture;let c,d;if(u.current){const m=u.current;c=e.resolution||m.resolution,d=e.multisample??m.multisample}else c=e.resolution||a.resolution,d=e.multisample??a.multisample;s[0].resolution=c,s[0].multisample=d,s[0].maskSprite=r;const p=n.filterArea;n.filterArea=r.getBounds(!0),a.filter.push(n,s),n.filterArea=p,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}Jb.extension={type:$e.RendererSystem,name:"mask"};Ke.add(Jb);class ew{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==n&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const w_=new Nt,T_=[],fh=class extends ew{constructor(t){super(t),this.glConst=We.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,s=n.renderTexture,a=r.getBounds(!0,T_.pop()??new Rt);this.roundFrameToPixels(a,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),e&&a.fit(e),t._scissorRectLocal=a}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:s}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||fh.isMatrixRotated(e.worldTransform)||fh.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,s){fh.isMatrixRotated(s)||(s=s?w_.copyFrom(s):w_.identity(),s.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&T_.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let tw=fh;tw.extension={type:$e.RendererSystem,name:"scissor"};Ke.add(tw);class rw extends ew{constructor(e){super(e),this.glConst=We.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const a=e._colorMask;a!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,a!==0&&(e._colorMask=a,n.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(n._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}rw.extension={type:$e.RendererSystem,name:"stencil"};Ke.add(rw);class nw{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}nw.extension={type:[$e.RendererSystem,$e.CanvasRendererSystem],name:"_plugin"};Ke.add(nw);class iw{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Nt,this.transform=null}update(e,r,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(e,r,n,s){const a=this.projectionMatrix,u=s?-1:1;a.identity(),a.a=1/r.width*2,a.d=u*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-u-r.y*a.d}setTransform(e){}destroy(){this.renderer=null}}iw.extension={type:$e.RendererSystem,name:"projection"};Ke.add(iw);const AC=new Rh;class sw{constructor(e){this.renderer=e,this._tempMatrix=new Nt}generateTexture(e,r){const{region:n,...s}=r||{},a=n||e.getLocalBounds(null,!0);a.width===0&&(a.width=1),a.height===0&&(a.height=1);const u=ki.create({width:a.width,height:a.height,...s});this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const c=e.transform;return e.transform=AC,this.renderer.render(e,{renderTexture:u,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=c,u}destroy(){}}sw.extension={type:[$e.RendererSystem,$e.CanvasRendererSystem],name:"textureGenerator"};Ke.add(sw);const oo=new Rt,il=new Rt;class ow{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rt,this.destinationFrame=new Rt,this.viewportFrame=new Rt}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const s=this.renderer;this.current=e;let a,u,c;e?(a=e.baseTexture,c=a.resolution,r||(oo.width=e.frame.width,oo.height=e.frame.height,r=oo),n||(il.x=e.frame.x,il.y=e.frame.y,il.width=r.width,il.height=r.height,n=il),u=a.framebuffer):(c=s.resolution,r||(oo.width=s._view.screen.width,oo.height=s._view.screen.height,r=oo),n||(n=oo,n.width=r.width,n.height=r.height));const d=this.viewportFrame;d.x=n.x*c,d.y=n.y*c,d.width=n.width*c,d.height=n.height*c,e||(d.y=s.view.height-(d.y+d.height)),d.ceil(),this.renderer.framebuffer.bind(u,d),this.renderer.projection.update(n,r,c,!u),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Tt.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const a=this.destinationFrame,u=this.current?this.current.baseTexture:this.renderer._view.screen,c=a.width!==u.width||a.height!==u.height;if(c){let{x:d,y:p,width:m,height:_}=this.viewportFrame;d=Math.round(d),p=Math.round(p),m=Math.round(m),_=Math.round(_),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(d,p,m,_)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,r),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ow.extension={type:$e.RendererSystem,name:"renderTexture"};Ke.add(ow);class PC{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function RC(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const a=e.getActiveAttrib(t,s);if(a.name.startsWith("gl_"))continue;const u=$b(e,a.type),c={type:u,name:a.name,size:zb(u),location:e.getAttribLocation(t,a.name)};r[a.name]=c}return r}function IC(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;s++){const a=e.getActiveUniform(t,s),u=a.name.replace(/\[.*?\]$/,""),c=!!a.name.match(/\[.*?\]$/),d=$b(e,a.type);r[u]={name:u,index:s,type:d,size:a.size,isArray:c,value:Hb(d,a.size)}}return r}function MC(t,e){var d;const r=m_(t,t.VERTEX_SHADER,e.vertexSrc),n=m_(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,n);const a=(d=e.extra)==null?void 0:d.transformFeedbackVaryings;if(a&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,a.names,a.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||oC(t,s,r,n),e.attributeData=RC(s,t),e.uniformData=IC(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const p=Object.keys(e.attributeData);p.sort((m,_)=>m>_?1:-1);for(let m=0;m<p.length;m++)e.attributeData[p[m]].location=m,t.bindAttribLocation(s,m,p[m]);t.linkProgram(s)}t.deleteShader(r),t.deleteShader(n);const u={};for(const p in e.uniformData){const m=e.uniformData[p];u[p]={location:t.getUniformLocation(s,p),value:Hb(m.type,m.size)}}return new PC(s,u)}function kC(t,e,r,n,s){r.buffer.update(s)}const FC={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},aw={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function DC(t){const e=t.map(a=>({data:a,offset:0,dataLen:0,dirty:0}));let r=0,n=0,s=0;for(let a=0;a<e.length;a++){const u=e[a];if(r=aw[u.data.type],u.data.size>1&&(r=Math.max(r,16)*u.data.size),u.dataLen=r,n%r!==0&&n<16){const c=n%r%16;n+=c,s+=c}n+r>16?(s=Math.ceil(s/16)*16,u.offset=s,s+=r,n=r):(u.offset=s,n+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function BC(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,s)=>n.index-s.index),r}function OC(t,e){if(!t.autoManage)return{size:0,syncFunc:kC};const r=BC(t.uniforms,e),{uboElements:n,size:s}=DC(r),a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let u=0;u<n.length;u++){const c=n[u],d=t.uniforms[c.data.name],p=c.data.name;let m=!1;for(let _=0;_<ca.length;_++){const x=ca[_];if(x.codeUbo&&x.test(c.data,d)){a.push(`offset = ${c.offset/4};`,ca[_].codeUbo(c.data.name,d)),m=!0;break}}if(!m)if(c.data.size>1){const _=zb(c.data.type),x=Math.max(aw[c.data.type]/16,1),S=_/x,E=(4-S%4)%4;a.push(`
                cv = ud.${p}.value;
                v = uv.${p};
                offset = ${c.offset/4};

                t = 0;

                for(var i=0; i < ${c.data.size*x}; i++)
                {
                    for(var j = 0; j < ${S}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${E};
                }

                `)}else{const _=FC[c.data.type];a.push(`
                cv = ud.${p}.value;
                v = uv.${p};
                offset = ${c.offset/4};
                ${_};
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}let LC=0;const th={textureCount:0,uboCount:0};class lw{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=LC++}systemCheck(){if(!lC())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),r||(th.textureCount=0,th.uboCount=0,this.syncUniformGroup(e.uniformGroup,th)),s}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=nC(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const s=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),s(n.uniformData,e.uniforms,this.renderer,th,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const a=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const u=this.getSignature(e,this.shader.program.uniformData,"ubo");let c=this._uboCache[u];if(c||(c=this._uboCache[u]=OC(e,this.shader.program.uniformData)),e.autoManage){const d=new Float32Array(c.size/4);e.buffer.update(d)}return r.uniformGroups[e.id]=c.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const s=e.uniforms,a=[`${n}-`];for(const u in s)a.push(u),r[u]&&a.push(r[u].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,s=MC(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}lw.extension={type:$e.RendererSystem,name:"shader"};Ke.add(lw);class Fh{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}Fh.defaultOptions={hello:!1};Fh.extension={type:[$e.RendererSystem,$e.CanvasRendererSystem],name:"startup"};Ke.add(Fh);function NC(t,e=[]){return e[Fe.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.ADD]=[t.ONE,t.ONE],e[Fe.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.NONE]=[0,0],e[Fe.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Fe.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Fe.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Fe.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Fe.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Fe.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Fe.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Fe.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Fe.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Fe.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Fe.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const UC=0,GC=1,HC=2,jC=3,zC=4,$C=5,mg=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Fe.NONE,this._blendEq=!1,this.map=[],this.map[UC]=this.setBlend,this.map[GC]=this.setOffset,this.map[HC]=this.setCullFace,this.map[jC]=this.setDepthTest,this.map[zC]=this.setFrontFace,this.map[$C]=this.setDepthMask,this.checks=[],this.defaultState=new ns,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=NC(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(mg.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(mg.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let uw=mg;uw.extension={type:$e.RendererSystem,name:"state"};Ke.add(uw);class hw extends ma{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(s=>e.systems[s]),n=[...r,...Object.keys(e.systems).filter(s=>!r.includes(s))];for(const s of n)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(r=>{this.runners[r]=new mi(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const s in this.runners)this.runners[s].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(s=>{const a=n.find(u=>this._systemsHash[u]===s);s[e.name](r[a])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const dh=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=dh.defaultMaxIdle,this.checkCountMax=dh.defaultCheckCountMax,this.mode=dh.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Fg.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,r=!0)}if(r){let n=0;for(let s=0;s<e.length;s++)e[s]!==null&&(e[n++]=e[s]);e.length=n}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};let hi=dh;hi.defaultMode=Fg.AUTO;hi.defaultMaxIdle=60*60;hi.defaultCheckCountMax=60*10;hi.extension={type:$e.RendererSystem,name:"textureGC"};Ke.add(hi);class Md{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ht.UNSIGNED_BYTE,this.internalFormat=ze.RGBA,this.samplerType=0}}function VC(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[ht.UNSIGNED_BYTE]:{[ze.RGBA]:t.RGBA8,[ze.RGB]:t.RGB8,[ze.RG]:t.RG8,[ze.RED]:t.R8,[ze.RGBA_INTEGER]:t.RGBA8UI,[ze.RGB_INTEGER]:t.RGB8UI,[ze.RG_INTEGER]:t.RG8UI,[ze.RED_INTEGER]:t.R8UI,[ze.ALPHA]:t.ALPHA,[ze.LUMINANCE]:t.LUMINANCE,[ze.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ht.BYTE]:{[ze.RGBA]:t.RGBA8_SNORM,[ze.RGB]:t.RGB8_SNORM,[ze.RG]:t.RG8_SNORM,[ze.RED]:t.R8_SNORM,[ze.RGBA_INTEGER]:t.RGBA8I,[ze.RGB_INTEGER]:t.RGB8I,[ze.RG_INTEGER]:t.RG8I,[ze.RED_INTEGER]:t.R8I},[ht.UNSIGNED_SHORT]:{[ze.RGBA_INTEGER]:t.RGBA16UI,[ze.RGB_INTEGER]:t.RGB16UI,[ze.RG_INTEGER]:t.RG16UI,[ze.RED_INTEGER]:t.R16UI,[ze.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[ht.SHORT]:{[ze.RGBA_INTEGER]:t.RGBA16I,[ze.RGB_INTEGER]:t.RGB16I,[ze.RG_INTEGER]:t.RG16I,[ze.RED_INTEGER]:t.R16I},[ht.UNSIGNED_INT]:{[ze.RGBA_INTEGER]:t.RGBA32UI,[ze.RGB_INTEGER]:t.RGB32UI,[ze.RG_INTEGER]:t.RG32UI,[ze.RED_INTEGER]:t.R32UI,[ze.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[ht.INT]:{[ze.RGBA_INTEGER]:t.RGBA32I,[ze.RGB_INTEGER]:t.RGB32I,[ze.RG_INTEGER]:t.RG32I,[ze.RED_INTEGER]:t.R32I},[ht.FLOAT]:{[ze.RGBA]:t.RGBA32F,[ze.RGB]:t.RGB32F,[ze.RG]:t.RG32F,[ze.RED]:t.R32F,[ze.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[ht.HALF_FLOAT]:{[ze.RGBA]:t.RGBA16F,[ze.RGB]:t.RGB16F,[ze.RG]:t.RG16F,[ze.RED]:t.R16F},[ht.UNSIGNED_SHORT_5_6_5]:{[ze.RGB]:t.RGB565},[ht.UNSIGNED_SHORT_4_4_4_4]:{[ze.RGBA]:t.RGBA4},[ht.UNSIGNED_SHORT_5_5_5_1]:{[ze.RGBA]:t.RGB5_A1},[ht.UNSIGNED_INT_2_10_10_10_REV]:{[ze.RGBA]:t.RGB10_A2,[ze.RGBA_INTEGER]:t.RGB10_A2UI},[ht.UNSIGNED_INT_10F_11F_11F_REV]:{[ze.RGB]:t.R11F_G11F_B10F},[ht.UNSIGNED_INT_5_9_9_9_REV]:{[ze.RGB]:t.RGB9_E5},[ht.UNSIGNED_INT_24_8]:{[ze.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[ht.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ze.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[ht.UNSIGNED_BYTE]:{[ze.RGBA]:t.RGBA,[ze.RGB]:t.RGB,[ze.ALPHA]:t.ALPHA,[ze.LUMINANCE]:t.LUMINANCE,[ze.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ht.UNSIGNED_SHORT_5_6_5]:{[ze.RGB]:t.RGB},[ht.UNSIGNED_SHORT_4_4_4_4]:{[ze.RGBA]:t.RGBA},[ht.UNSIGNED_SHORT_5_5_5_1]:{[ze.RGBA]:t.RGBA}},e}class cw{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new pt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=VC(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let s=0;s<r;s++)this.boundTextures[s]=null;this.emptyTextures={};const n=new Md(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Md(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),e!=null&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<n.length;s++)n[s]===e&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[s]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:s}=this;if(n)for(let a=e-1;a>=0;--a){const u=r[a];u&&u._glTextures[s].samplerType!==Jm.FLOAT&&this.renderer.texture.unbind(u)}}initTexture(e){const r=new Md(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,this.webGLVersion===2&&e.type===ht.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var s;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(s=e.resource)!=null&&s.upload(n,e,r))r.samplerType!==Jm.FLOAT&&(this.hasIntegerTextures=!0);else{const a=e.realWidth,u=e.realHeight,c=n.gl;(r.width!==a||r.height!==u||r.dirtyId<0)&&(r.width=a,r.height=u,c.texImage2D(e.target,0,r.internalFormat,a,u,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const s=this.managedTextures.indexOf(e);s!==-1&&mo(this.managedTextures,s,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Mi.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Ji.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==Mi.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===di.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===di.LINEAR){const a=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===di.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===di.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}cw.extension={type:$e.RendererSystem,name:"texture"};Ke.add(cw);class fw{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:s}=this;r&&s.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:s}=this,a=r.createTransformFeedback();e._glTransformFeedbacks[s]=a,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,a);for(let u=0;u<e.buffers.length;u++){const c=e.buffers[u];c&&(n.buffer.update(c),c._glBuffers[s].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,u,c._glBuffers[s].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),a}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let u=0;u<e.buffers.length;u++){const c=e.buffers[u];if(!c)continue;const d=c._glBuffers[this.CONTEXT_UID];d&&(d.refCount--,d.refCount===0&&!r&&a.dispose(c,r))}n&&(r||s.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}fw.extension={type:$e.RendererSystem,name:"transformFeedback"};Ke.add(fw);class Dh{constructor(e){this.renderer=e}init(e){this.screen=new Rt(0,0,e.width,e.height),this.element=e.view||We.ADAPTER.createCanvas(),this.resolution=e.resolution||We.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",n,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Dh.defaultOptions={width:800,height:600,resolution:We.RESOLUTION,autoDensity:!1};Dh.extension={type:[$e.RendererSystem,$e.CanvasRendererSystem],name:"_view"};Ke.add(Dh);We.PREFER_ENV=_o.WEBGL2;We.STRICT_TEXTURE_CACHE=!1;We.RENDER_OPTIONS={...kh.defaultOptions,...Mh.defaultOptions,...Dh.defaultOptions,...Fh.defaultOptions};Object.defineProperties(We,{WRAP_MODE:{get(){return pt.defaultOptions.wrapMode},set(t){yt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),pt.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return pt.defaultOptions.scaleMode},set(t){yt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),pt.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return pt.defaultOptions.mipmap},set(t){yt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),pt.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return pt.defaultOptions.anisotropicLevel},set(t){yt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),pt.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return yt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ur.defaultResolution},set(t){Ur.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return yt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ur.defaultMultisample},set(t){Ur.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return ui.defaultMaxTextures},set(t){yt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ui.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return ui.defaultBatchSize},set(t){yt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ui.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return ui.canUploadSameBuffer},set(t){yt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ui.canUploadSameBuffer=t}},GC_MODE:{get(){return hi.defaultMode},set(t){yt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),hi.defaultMode=t}},GC_MAX_IDLE:{get(){return hi.defaultMaxIdle},set(t){yt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),hi.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return hi.defaultCheckCountMax},set(t){yt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),hi.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return pi.defaultVertexPrecision},set(t){yt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),pi.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return pi.defaultFragmentPrecision},set(t){yt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),pi.defaultFragmentPrecision=t}}});var yo=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(yo||{});class kd{constructor(e,r=null,n=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=s}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const kn=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new kd(null,null,1/0),this.deltaMS=1/kn.targetFPMS,this.elapsedMS=1/kn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=yo.NORMAL){return this._addListener(new kd(t,e,r))}addOnce(t,e,r=yo.NORMAL){return this._addListener(new kd(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*kn.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,kn.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!kn._shared){const t=kn._shared=new kn;t.autoStart=!0,t._protected=!0}return kn._shared}static get system(){if(!kn._system){const t=kn._system=new kn;t.autoStart=!0,t._protected=!0}return kn._system}};let Kr=kn;Kr.targetFPMS=.06;Object.defineProperties(We,{TARGET_FPMS:{get(){return Kr.targetFPMS},set(t){yt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Kr.targetFPMS=t}}});class dw{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,yo.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Kr.shared:new Kr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}dw.extension=$e.Application;Ke.add(dw);const pw=[];Ke.handleByList($e.Renderer,pw);function WC(t){for(const e of pw)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var XC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,qC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const YC=XC,mw=qC;class gw{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=yr.HIGH?this.multisample=yr.HIGH:r>=yr.MEDIUM?this.multisample=yr.MEDIUM:r>=yr.LOW?this.multisample=yr.LOW:this.multisample=yr.NONE}destroy(){}}gw.extension={type:$e.RendererSystem,name:"_multisample"};Ke.add(gw);class KC{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class yw{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:s}=this;if(this.boundBufferBases[r]!==e){const a=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,a.buffer)}}bindBufferRange(e,r,n){const{gl:s,CONTEXT_UID:a}=this;n=n||0;const u=e._glBuffers[a]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,u.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,r.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const a=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,a)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),n&&(r||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new KC(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}yw.extension={type:$e.RendererSystem,name:"buffer"};Ke.add(yw);class vw{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let s,a,u,c;if(r&&(s=r.renderTexture,a=r.clear,u=r.transform,c=r.skipUpdateTransform),this.renderingToScreen=!s,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=u,!n.context.isLost){if(s||(this.lastObjectRendered=e),!c){const d=e.enableTempParent();e.updateTransform(),e.disableTempParent(d)}n.renderTexture.bind(s),n.batch.currentRenderer.start(),(a??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),s&&(r.blit&&n.framebuffer.blit(),s.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}vw.extension={type:$e.RendererSystem,name:"objectRenderer"};Ke.add(vw);const gg=class extends hw{constructor(t){super(),this.type=kg.WEBGL,t=Object.assign({},We.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new gi({projectionMatrix:new Nt},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:gg.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(yt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=gg.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:yb()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return yt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return yt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return yt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return yt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let ga=gg;ga.extension={type:$e.Renderer,priority:1};ga.__plugins={};ga.__systems={};Ke.handleByMap($e.RendererPlugin,ga.__plugins);Ke.handleByMap($e.RendererSystem,ga.__systems);Ke.add(ga);class _w extends Sl{constructor(e,r){const{width:n,height:s}=r||{};super(n,s),this.items=[],this.itemDirtyIds=[];for(let a=0;a<e;a++){const u=new pt;this.items.push(u),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Sl?this.addResourceAt(e[n],n):this.addResourceAt(Rb(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const r=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(r).then(()=>{const{realWidth:n,realHeight:s}=this.items[0];return this.resize(n,s),Promise.resolve(this)}),this._load}}class ZC extends _w{constructor(e,r){const{width:n,height:s}=r||{};let a,u;Array.isArray(e)?(a=e,u=e.length):u=e,super(u,{width:n,height:s}),a&&this.initFromArray(a,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ua.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:s,itemDirtyIds:a,items:u}=this,{gl:c}=e;n.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,s,0,r.format,n.type,null);for(let d=0;d<s;d++){const p=u[d];a[d]<p.dirtyId&&(a[d]=p.dirtyId,p.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,d,p.resource.width,p.resource.height,1,r.format,n.type,p.resource.source))}return!0}}class xw extends Fs{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const dl=class extends _w{constructor(t,e){const{width:r,height:n,autoLoad:s,linkBaseTexture:a}=e||{};if(t&&t.length!==dl.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let u=0;u<dl.SIDES;u++)this.items[u].target=ua.TEXTURE_CUBE_MAP_POSITIVE_X+u;this.linkBaseTexture=a!==!1,t&&this.initFromArray(t,e),s!==!1&&this.load()}bind(t){super.bind(t),t.target=ua.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=ua.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let s=0;s<dl.SIDES;s++){const a=this.items[s];(n[s]<a.dirtyId||r.dirtyId<e.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,r),n[s]=a.dirtyId):n[s]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===dl.SIDES}};let bw=dl;bw.SIDES=6;class la extends Fs{constructor(e,r){r=r||{};let n,s;typeof e=="string"?(n=la.EMPTY,s=e):(n=e,s=null),super(n),this.url=s,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await We.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await n.blob();if(this.destroyed)return;const a=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===yi.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=a,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return la._EMPTY=la._EMPTY??We.ADAPTER.createCanvas(0,0),la._EMPTY}}const ph=class extends Fs{constructor(t,e){e=e||{},super(We.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},ph.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Fs.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,s=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),s=Math.round(s);const a=this.source;a.width=n,a.height=s,a._pixiId=`canvas_${ks()}`,a.getContext("2d").drawImage(t,0,0,e,r,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(t){const e=ph.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&ph.SVG_XML.test(t)}};let El=ph;El.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;El.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const yg=class extends Fs{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];Fs.crossOrigin(r,n,e.crossorigin);for(let s=0;s<t.length;++s){const a=document.createElement("source");let{src:u,mime:c}=t[s];u=u||t[s];const d=u.split("?").shift().toLowerCase(),p=d.slice(d.lastIndexOf(".")+1);c=c||yg.MIME_TYPES[p]||`video/${p}`,a.src=u,a.type=c,r.appendChild(a)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=Kr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Kr.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Kr.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Kr.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Kr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Kr.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||yg.TYPES.includes(e)}};let Gg=yg;Gg.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Gg.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};lg.push(la,Wb,xw,Gg,El,Dl,bw,ZC);pt.prototype.getDrawableSource=function(){const e=this.resource;return e?e.bitmap||e.source:null};Ng.prototype._canvasRenderTarget=null;qe.prototype.patternCache=null;qe.prototype.tintCache=null;let sl;function S_(t){const e=We.ADAPTER.createCanvas(6,1),r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}function ww(){if(typeof document>"u")return!1;if(sl!==void 0)return sl;const t=S_("#ff00ff"),e=S_("#ffff00"),n=We.ADAPTER.createCanvas(6,1).getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);const s=n.getImageData(2,0,1,1);if(!s)sl=!1;else{const a=s.data;sl=a[0]===255&&a[1]===0&&a[2]===0}return sl}function QC(t=[]){return ww()?(t[Fe.NORMAL]="source-over",t[Fe.ADD]="lighter",t[Fe.MULTIPLY]="multiply",t[Fe.SCREEN]="screen",t[Fe.OVERLAY]="overlay",t[Fe.DARKEN]="darken",t[Fe.LIGHTEN]="lighten",t[Fe.COLOR_DODGE]="color-dodge",t[Fe.COLOR_BURN]="color-burn",t[Fe.HARD_LIGHT]="hard-light",t[Fe.SOFT_LIGHT]="soft-light",t[Fe.DIFFERENCE]="difference",t[Fe.EXCLUSION]="exclusion",t[Fe.HUE]="hue",t[Fe.SATURATION]="saturation",t[Fe.COLOR]="color",t[Fe.LUMINOSITY]="luminosity"):(t[Fe.NORMAL]="source-over",t[Fe.ADD]="lighter",t[Fe.MULTIPLY]="source-over",t[Fe.SCREEN]="source-over",t[Fe.OVERLAY]="source-over",t[Fe.DARKEN]="source-over",t[Fe.LIGHTEN]="source-over",t[Fe.COLOR_DODGE]="source-over",t[Fe.COLOR_BURN]="source-over",t[Fe.HARD_LIGHT]="source-over",t[Fe.SOFT_LIGHT]="source-over",t[Fe.DIFFERENCE]="source-over",t[Fe.EXCLUSION]="source-over",t[Fe.HUE]="source-over",t[Fe.SATURATION]="source-over",t[Fe.COLOR]="source-over",t[Fe.LUMINOSITY]="source-over"),t[Fe.NORMAL_NPM]=t[Fe.NORMAL],t[Fe.ADD_NPM]=t[Fe.ADD],t[Fe.SCREEN_NPM]=t[Fe.SCREEN],t[Fe.SRC_IN]="source-in",t[Fe.SRC_OUT]="source-out",t[Fe.SRC_ATOP]="source-atop",t[Fe.DST_OVER]="destination-over",t[Fe.DST_IN]="destination-in",t[Fe.DST_OUT]="destination-out",t[Fe.DST_ATOP]="destination-atop",t[Fe.XOR]="xor",t[Fe.SUBTRACT]="source-over",t}const JC=new Nt;class Tw{constructor(e){this.activeResolution=1,this.smoothProperty="imageSmoothingEnabled",this.blendModes=QC(),this._activeBlendMode=null,this._projTransform=null,this._outerBlend=!1,this.renderer=e}init(){const e=this.renderer.background.alpha<1;if(this.rootContext=this.renderer.view.getContext("2d",{alpha:e}),this.activeContext=this.rootContext,!this.rootContext.imageSmoothingEnabled){const r=this.rootContext;r.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":r.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":r.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":r.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")}}setContextTransform(e,r,n){let s=e;const a=this._projTransform,u=this.activeResolution;n=n||u,a&&(s=JC,s.copyFrom(e),s.prepend(a)),r?this.activeContext.setTransform(s.a*n,s.b*n,s.c*n,s.d*n,s.tx*u|0,s.ty*u|0):this.activeContext.setTransform(s.a*n,s.b*n,s.c*n,s.d*n,s.tx*u,s.ty*u)}clear(e,r){const{activeContext:n,renderer:s}=this,a=e?Tt.shared.setValue(e):this.renderer.background.backgroundColor;n.clearRect(0,0,s.width,s.height),e&&(n.globalAlpha=r??this.renderer.background.alpha,n.fillStyle=a.toHex(),n.fillRect(0,0,s.width,s.height),n.globalAlpha=1)}setBlendMode(e,r){const n=e===Fe.SRC_IN||e===Fe.SRC_OUT||e===Fe.DST_IN||e===Fe.DST_ATOP;!r&&n&&(e=Fe.NORMAL),this._activeBlendMode!==e&&(this._activeBlendMode=e,this._outerBlend=n,this.activeContext.globalCompositeOperation=this.blendModes[e])}resize(){this.smoothProperty&&(this.rootContext[this.smoothProperty]=pt.defaultOptions.scaleMode===di.LINEAR)}invalidateBlendMode(){this._activeBlendMode=this.blendModes.indexOf(this.activeContext.globalCompositeOperation)}destroy(){this.renderer=null,this.rootContext=null,this.activeContext=null,this.smoothProperty=null}}Tw.extension={type:$e.CanvasRendererSystem,name:"canvasContext"};Ke.add(Tw);class Sw{constructor(e){this._foundShapes=[],this.renderer=e}pushMask(e){const r=this.renderer,n=e.maskObject||e;r.canvasContext.activeContext.save();const s=this._foundShapes;if(this.recursiveFindShapes(n,s),s.length>0){const a=r.canvasContext.activeContext;a.beginPath();for(let u=0;u<s.length;u++){const c=s[u],d=c.transform.worldTransform;this.renderer.canvasContext.setContextTransform(d),this.renderGraphicsShape(c)}s.length=0,a.clip()}}recursiveFindShapes(e,r){e.geometry&&e.geometry.graphicsData&&r.push(e);const{children:n}=e;if(n)for(let s=0;s<n.length;s++)this.recursiveFindShapes(n[s],r)}renderGraphicsShape(e){e.finishPoly();const r=this.renderer.canvasContext.activeContext,n=e.geometry.graphicsData,s=n.length;if(s!==0)for(let a=0;a<s;a++){const u=n[a],c=u.shape;if(c.type===Wt.POLY){let d=c.points;const p=u.holes;let m,_,x,S;r.moveTo(d[0],d[1]);for(let E=1;E<d.length/2;E++)r.lineTo(d[E*2],d[E*2+1]);if(p.length>0){m=0,x=d[0],S=d[1];for(let E=2;E+2<d.length;E+=2)m+=(d[E]-x)*(d[E+3]-S)-(d[E+2]-x)*(d[E+1]-S);for(let E=0;E<p.length;E++)if(d=p[E].shape.points,!!d){_=0,x=d[0],S=d[1];for(let I=2;I+2<d.length;I+=2)_+=(d[I]-x)*(d[I+3]-S)-(d[I+2]-x)*(d[I+1]-S);if(_*m<0){r.moveTo(d[0],d[1]);for(let I=2;I<d.length;I+=2)r.lineTo(d[I],d[I+1])}else{r.moveTo(d[d.length-2],d[d.length-1]);for(let I=d.length-4;I>=0;I-=2)r.lineTo(d[I],d[I+1])}p[E].shape.closeStroke&&r.closePath()}}d[0]===d[d.length-2]&&d[1]===d[d.length-1]&&r.closePath()}else if(c.type===Wt.RECT)r.rect(c.x,c.y,c.width,c.height),r.closePath();else if(c.type===Wt.CIRC)r.arc(c.x,c.y,c.radius,0,2*Math.PI),r.closePath();else if(c.type===Wt.ELIP){const d=c.width*2,p=c.height*2,m=c.x-d/2,_=c.y-p/2,x=.5522848,S=d/2*x,E=p/2*x,I=m+d,A=_+p,R=m+d/2,O=_+p/2;r.moveTo(m,O),r.bezierCurveTo(m,O-E,R-S,_,R,_),r.bezierCurveTo(R+S,_,I,O-E,I,O),r.bezierCurveTo(I,O+E,R+S,A,R,A),r.bezierCurveTo(R-S,A,m,O+E,m,O),r.closePath()}else if(c.type===Wt.RREC){const d=c.x,p=c.y,m=c.width,_=c.height;let x=c.radius;const S=Math.min(m,_)/2;x=x>S?S:x,r.moveTo(d,p+x),r.lineTo(d,p+_-x),r.quadraticCurveTo(d,p+_,d+x,p+_),r.lineTo(d+m-x,p+_),r.quadraticCurveTo(d+m,p+_,d+m,p+_-x),r.lineTo(d+m,p+x),r.quadraticCurveTo(d+m,p,d+m-x,p),r.lineTo(d+x,p),r.quadraticCurveTo(d,p,d,p+x),r.closePath()}}}popMask(e){e.canvasContext.activeContext.restore(),e.canvasContext.invalidateBlendMode()}destroy(){}}Sw.extension={type:$e.CanvasRendererSystem,name:"mask"};Ke.add(Sw);class Ew{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;if(!n.view)return;const s=n.canvasContext;let a,u,c,d;r&&(a=r.renderTexture,u=r.clear,c=r.transform,d=r.skipUpdateTransform),this.renderingToScreen=!a,n.emit("prerender");const p=n.resolution;a?(a=a.castToBaseTexture(),a._canvasRenderTarget||(a._canvasRenderTarget=new Fl(a.width,a.height,a.resolution),a.resource=new xw(a._canvasRenderTarget.canvas),a.valid=!0),s.activeContext=a._canvasRenderTarget.context,n.canvasContext.activeResolution=a._canvasRenderTarget.resolution):(s.activeContext=s.rootContext,s.activeResolution=p);const m=s.activeContext;if(s._projTransform=c||null,a||(this.lastObjectRendered=e),!d){const x=e.enableTempParent();e.updateTransform(),e.disableTempParent(x)}if(m.save(),m.setTransform(1,0,0,1,0,0),m.globalAlpha=1,s._activeBlendMode=Fe.NORMAL,s._outerBlend=!1,m.globalCompositeOperation=s.blendModes[Fe.NORMAL],u??n.background.clearBeforeRender)if(this.renderingToScreen){m.clearRect(0,0,n.width,n.height);const x=n.background;x.alpha>0&&(m.globalAlpha=x.backgroundColor.alpha,m.fillStyle=x.backgroundColor.toHex(),m.fillRect(0,0,n.width,n.height),m.globalAlpha=1)}else a=a,a._canvasRenderTarget.clear(),a.clear.alpha>0&&(m.globalAlpha=a.clear.alpha,m.fillStyle=a.clear.toHex(),m.fillRect(0,0,a.realWidth,a.realHeight),m.globalAlpha=1);const _=s.activeContext;s.activeContext=m,e.renderCanvas(n),s.activeContext=_,m.restore(),s.activeResolution=p,s._projTransform=null,n.emit("postrender")}destroy(){this.lastObjectRendered=null,this.render=null}}Ew.extension={type:$e.CanvasRendererSystem,name:"objectRenderer"};Ke.add(Ew);const{deprecation:Yr}=GE,vg=class extends hw{constructor(t){super(),this.type=kg.CANVAS,this.rendererLogId="Canvas",t=Object.assign({},We.RENDER_OPTIONS,t);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:vg.__systems,priority:["textureGenerator","background","_view","_plugin","startup","mask","canvasContext","objectRenderer"]};this.setup(e),"useContextAlpha"in t&&(Yr("7.0.0","options.useContextAlpha is deprecated, use options.backgroundAlpha instead"),t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=vg.__plugins,this.options=t,this.startup.run(this.options)}static test(){return!0}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}reset(){}render(t,e){this.objectRenderer.render(t,e)}clear(){this.canvasContext.clear()}destroy(t){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}resize(t,e){this._view.resizeView(t,e)}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get clearBeforeRender(){return this.background.clearBeforeRender}get blendModes(){return Yr("7.0.0","renderer.blendModes has been deprecated, please use renderer.canvasContext.blendModes instead"),this.canvasContext.blendModes}get maskManager(){return Yr("7.0.0","renderer.maskManager has been deprecated, please use renderer.mask instead"),this.mask}get refresh(){return Yr("7.0.0","renderer.refresh has been deprecated"),!0}get rootContext(){return Yr("7.0.0","renderer.rootContext has been deprecated, please use renderer.canvasContext.rootContext instead"),this.canvasContext.rootContext}get context(){return Yr("7.0.0","renderer.context has been deprecated, please use renderer.canvasContext.activeContext instead"),this.canvasContext.activeContext}get smoothProperty(){return Yr("7.0.0","renderer.smoothProperty has been deprecated, please use renderer.canvasContext.smoothProperty instead"),this.canvasContext.smoothProperty}setBlendMode(t,e){Yr("7.0.0","renderer.setBlendMode has been deprecated, use renderer.canvasContext.setBlendMode instead"),this.canvasContext.setBlendMode(t,e)}invalidateBlendMode(){Yr("7.0.0","renderer.invalidateBlendMode has been deprecated, use renderer.canvasContext.invalidateBlendMode instead"),this.canvasContext.invalidateBlendMode()}setContextTransform(t,e,r){Yr("7.0.0","renderer.setContextTransform has been deprecated, use renderer.canvasContext.setContextTransform instead"),this.canvasContext.setContextTransform(t,e,r)}get backgroundColor(){return Yr("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){Yr("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return Yr("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){Yr("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get preserveDrawingBuffer(){return Yr("7.0.0","renderer.preserveDrawingBuffer has been deprecated"),!1}get useContextAlpha(){return Yr("7.0.0","renderer.useContextAlpha has been deprecated"),!1}};let xo=vg;xo.extension={type:$e.Renderer,priority:0};xo.__plugins={};xo.__systems={};Ke.handleByMap($e.CanvasRendererPlugin,xo.__plugins);Ke.handleByMap($e.CanvasRendererSystem,xo.__systems);Ke.add(xo);const Sr={canvas:null,getTintedCanvas:(t,e)=>{const r=t.texture;e=Sr.roundColor(e);const n=`#${`00000${(e|0).toString(16)}`.slice(-6)}`;r.tintCache=r.tintCache||{};const s=r.tintCache[n];let a;if(s){if(s.tintId===r._updateID)return r.tintCache[n];a=r.tintCache[n]}else a=We.ADAPTER.createCanvas();return Sr.tintMethod(r,e,a),a.tintId=r._updateID,r.tintCache[n]=a,a},getTintedPattern:(t,e)=>{e=Sr.roundColor(e);const r=`#${`00000${(e|0).toString(16)}`.slice(-6)}`;t.patternCache=t.patternCache||{};let n=t.patternCache[r];return(n==null?void 0:n.tintId)===t._updateID||(Sr.canvas||(Sr.canvas=We.ADAPTER.createCanvas()),Sr.tintMethod(t,e,Sr.canvas),n=Sr.canvas.getContext("2d").createPattern(Sr.canvas,"repeat"),n.tintId=t._updateID,t.patternCache[r]=n),n},tintWithMultiply:(t,e,r)=>{const n=r.getContext("2d"),s=t._frame.clone(),a=t.baseTexture.resolution;s.x*=a,s.y*=a,s.width*=a,s.height*=a,r.width=Math.ceil(s.width),r.height=Math.ceil(s.height),n.save(),n.fillStyle=`#${`00000${(e|0).toString(16)}`.slice(-6)}`,n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="multiply";const u=t.baseTexture.getDrawableSource();n.drawImage(u,s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(u,s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.restore()},tintWithOverlay:(t,e,r)=>{const n=r.getContext("2d"),s=t._frame.clone(),a=t.baseTexture.resolution;s.x*=a,s.y*=a,s.width*=a,s.height*=a,r.width=Math.ceil(s.width),r.height=Math.ceil(s.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle=`#${`00000${(e|0).toString(16)}`.slice(-6)}`,n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.getDrawableSource(),s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.restore()},tintWithPerPixel:(t,e,r)=>{const n=r.getContext("2d"),s=t._frame.clone(),a=t.baseTexture.resolution;s.x*=a,s.y*=a,s.width*=a,s.height*=a,r.width=Math.ceil(s.width),r.height=Math.ceil(s.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.getDrawableSource(),s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.restore();const[u,c,d]=Tt.shared.setValue(e).toArray(),p=n.getImageData(0,0,s.width,s.height),m=p.data;for(let _=0;_<m.length;_+=4)m[_+0]*=u,m[_+1]*=c,m[_+2]*=d;n.putImageData(p,0,0)},roundColor:t=>Tt.shared.setValue(t).round(Sr.cacheStepsPerColorChannel).toNumber(),cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:ww(),tintMethod:null};Sr.tintMethod=Sr.canUseMultiply?Sr.tintWithMultiply:Sr.tintWithPerPixel;class bh{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Rt.EMPTY:(e=e||new Rt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:s,c:a,d:u,tx:c,ty:d}=e,p=n*r.x+a*r.y+c,m=s*r.x+u*r.y+d;this.minX=Math.min(this.minX,p),this.maxX=Math.max(this.maxX,p),this.minY=Math.min(this.minY,m),this.maxY=Math.max(this.maxY,m)}addQuad(e){let r=this.minX,n=this.minY,s=this.maxX,a=this.maxY,u=e[0],c=e[1];r=u<r?u:r,n=c<n?c:n,s=u>s?u:s,a=c>a?c:a,u=e[2],c=e[3],r=u<r?u:r,n=c<n?c:n,s=u>s?u:s,a=c>a?c:a,u=e[4],c=e[5],r=u<r?u:r,n=c<n?c:n,s=u>s?u:s,a=c>a?c:a,u=e[6],c=e[7],r=u<r?u:r,n=c<n?c:n,s=u>s?u:s,a=c>a?c:a,this.minX=r,this.minY=n,this.maxX=s,this.maxY=a}addFrame(e,r,n,s,a){this.addFrameMatrix(e.worldTransform,r,n,s,a)}addFrameMatrix(e,r,n,s,a){const u=e.a,c=e.b,d=e.c,p=e.d,m=e.tx,_=e.ty;let x=this.minX,S=this.minY,E=this.maxX,I=this.maxY,A=u*r+d*n+m,R=c*r+p*n+_;x=A<x?A:x,S=R<S?R:S,E=A>E?A:E,I=R>I?R:I,A=u*s+d*n+m,R=c*s+p*n+_,x=A<x?A:x,S=R<S?R:S,E=A>E?A:E,I=R>I?R:I,A=u*r+d*a+m,R=c*r+p*a+_,x=A<x?A:x,S=R<S?R:S,E=A>E?A:E,I=R>I?R:I,A=u*s+d*a+m,R=c*s+p*a+_,x=A<x?A:x,S=R<S?R:S,E=A>E?A:E,I=R>I?R:I,this.minX=x,this.minY=S,this.maxX=E,this.maxY=I}addVertexData(e,r,n){let s=this.minX,a=this.minY,u=this.maxX,c=this.maxY;for(let d=r;d<n;d+=2){const p=e[d],m=e[d+1];s=p<s?p:s,a=m<a?m:a,u=p>u?p:u,c=m>c?m:c}this.minX=s,this.minY=a,this.maxX=u,this.maxY=c}addVertices(e,r,n,s){this.addVerticesMatrix(e.worldTransform,r,n,s)}addVerticesMatrix(e,r,n,s,a=0,u=a){const c=e.a,d=e.b,p=e.c,m=e.d,_=e.tx,x=e.ty;let S=this.minX,E=this.minY,I=this.maxX,A=this.maxY;for(let R=n;R<s;R+=2){const O=r[R],L=r[R+1],X=c*O+p*L+_,N=m*L+d*O+x;S=Math.min(S,X-a),I=Math.max(I,X+a),E=Math.min(E,N-u),A=Math.max(A,N+u)}this.minX=S,this.minY=E,this.maxX=I,this.maxY=A}addBounds(e){const r=this.minX,n=this.minY,s=this.maxX,a=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>a?e.maxY:a}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,a=e.maxX<r.maxX?e.maxX:r.maxX,u=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=a&&s<=u){const c=this.minX,d=this.minY,p=this.maxX,m=this.maxY;this.minX=n<c?n:c,this.minY=s<d?s:d,this.maxX=a>p?a:p,this.maxY=u>m?u:m}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,a=e.maxX<r.x+r.width?e.maxX:r.x+r.width,u=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=a&&s<=u){const c=this.minX,d=this.minY,p=this.maxX,m=this.maxY;this.minX=n<c?n:c,this.minY=s<d?s:d,this.maxX=a>p?a:p,this.maxY=u>m?u:m}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,s,a,u){e-=a,r-=u,n+=a,s+=u,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s}}class er extends ma{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Rh,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new bh,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const s=r[n];Object.defineProperty(er.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Rt),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Rt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new bh);const r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const u=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-a,u}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,s){return r&&(e=r.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,s=1,a=0,u=0,c=0,d=0,p=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=u,this.skew.y=c,this.pivot.x=d,this.pivot.y=p,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new eA),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*KE}set angle(e){this.transform.rotation=e*ZE}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class eA extends er{constructor(){super(...arguments),this.sortDirty=null}}er.prototype.displayObjectUpdateTransform=er.prototype.updateTransform;const tA=new Nt;function rA(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const _g=class extends er{constructor(){super(),this.children=[],this.sortableChildren=_g.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);mo(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(r===-1)return null;e.parent=null,e.transform._parentID=-1,mo(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,mo(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e,s=n-r;let a;if(s>0&&s<=n){a=this.children.splice(r,s);for(let u=0;u<a.length;++u)a[u].parent=null,a[u].transform&&(a[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let u=0;u<a.length;++u)a[u].emit("removed",this),this.emit("childRemoved",a[u],this,u);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(rA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const r=this.children[t];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let n=0,s=this.children.length;n<s;++n){const a=this.children[n];a.visible&&a.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==_g.prototype._render&&(r=this.getBounds(!0));const s=t.projection.transform;if(s&&(n?(n=tA.copyFrom(n),n.prepend(s)):n=s),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let a=0,u=this.children.length;a<u;++a){const c=this.children[a],d=c.cullable;c.cullable=d||!this.cullArea,c.render(t),c.cullable=d}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}}renderAdvanced(t){var s,a,u;const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let c=0;c<e.length;c++)e[c].enabled&&this._enabledFilters.push(e[c])}const n=e&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Tr.NONE));if(n&&t.batch.flush(),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let c=0,d=this.children.length;c<d;++c)this.children[c].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&((u=this._enabledFilters)!=null&&u.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,r=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<r.length;++n)r[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let lr=_g;lr.defaultSortableChildren=!1;lr.prototype.containerUpdateTransform=lr.prototype.updateTransform;Object.defineProperties(We,{SORTABLE_CHILDREN:{get(){return lr.defaultSortableChildren},set(t){yt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),lr.defaultSortableChildren=t}}});const ol=new Pt,nA=new Uint16Array([0,1,2,0,2,3]);let Fi=class Cw extends lr{constructor(e){super(),this._anchor=new Ms(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Tt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Fe.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||qe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=nA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=We.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Qi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Qi(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,s=r.b,a=r.c,u=r.d,c=r.tx,d=r.ty,p=this.vertexData,m=e.trim,_=e.orig,x=this._anchor;let S=0,E=0,I=0,A=0;if(m?(E=m.x-x._x*_.width,S=E+m.width,A=m.y-x._y*_.height,I=A+m.height):(E=-x._x*_.width,S=E+_.width,A=-x._y*_.height,I=A+_.height),p[0]=n*E+a*A+c,p[1]=u*A+s*E+d,p[2]=n*S+a*A+c,p[3]=u*A+s*S+d,p[4]=n*S+a*I+c,p[5]=u*I+s*S+d,p[6]=n*E+a*I+c,p[7]=u*I+s*E+d,this._roundPixels){const R=We.RESOLUTION;for(let O=0;O<p.length;++O)p[O]=Math.round(p[O]*R)/R}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,s=this._anchor,a=this.transform.worldTransform,u=a.a,c=a.b,d=a.c,p=a.d,m=a.tx,_=a.ty,x=-s._x*n.width,S=x+n.width,E=-s._y*n.height,I=E+n.height;r[0]=u*x+d*E+m,r[1]=p*E+c*x+_,r[2]=u*S+d*E+m,r[3]=p*E+c*S+_,r[4]=u*S+d*I+m,r[5]=p*I+c*S+_,r[6]=u*x+d*I+m,r[7]=p*I+c*x+_}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new bh),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Rt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ol);const r=this._texture.orig.width,n=this._texture.orig.height,s=-r*this.anchor.x;let a=0;return ol.x>=s&&ol.x<s+r&&(a=-n*this.anchor.y,ol.y>=a&&ol.y<a+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(e,r){const n=e instanceof qe?e:qe.from(e,r);return new Cw(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Qi(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Qi(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||qe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}};const al=new Pt;class Hg extends Fi{constructor(e,r=100,n=100){super(e),this.tileTransform=new Rh,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new Ug(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,r,n,s)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Rt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,al);const r=this._width,n=this._height,s=-r*this.anchor._x;if(al.x>=s&&al.x<s+r){const a=-n*this.anchor._y;if(al.y>=a&&al.y<a+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,r){const n=e instanceof qe?e:qe.from(e,r);return new Hg(n,r.width,r.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var iA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,sA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oA=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,E_=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,aA=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const rh=new Nt;class Aw extends Ih{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Yb,this.state=ns.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=Ii.from(E_,aA,r),this.shader=e.context.webGLVersion>1?Ii.from(sA,iA,r):Ii.from(E_,oA,r)}render(e){const r=this.renderer,n=this.quad;let s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const a=e.uvRespectAnchor?e.anchor.x:0,u=e.uvRespectAnchor?e.anchor.y:0;s=n.uvs,s[0]=s[6]=-a,s[1]=s[3]=-u,s[2]=s[4]=1-a,s[5]=s[7]=1-u,n.invalidate();const c=e._texture,d=c.baseTexture,p=d.alphaMode>0,m=e.tileTransform.localTransform,_=e.uvMatrix;let x=d.isPowerOfTwo&&c.frame.width===d.width&&c.frame.height===d.height;x&&(d._glTextures[r.CONTEXT_UID]?x=d.wrapMode!==Ji.CLAMP:d.wrapMode===Ji.CLAMP&&(d.wrapMode=Ji.REPEAT));const S=x?this.simpleShader:this.shader,E=c.width,I=c.height,A=e._width,R=e._height;rh.set(m.a*E/A,m.b*E/R,m.c*I/A,m.d*I/R,m.tx/A,m.ty/R),rh.invert(),x?rh.prepend(_.mapCoord):(S.uniforms.uMapCoord=_.mapCoord.toArray(!0),S.uniforms.uClampFrame=_.uClampFrame,S.uniforms.uClampOffset=_.uClampOffset),S.uniforms.uTransform=rh.toArray(!0),S.uniforms.uColor=Tt.shared.setValue(e.tint).premultiply(e.worldAlpha,p).toArray(S.uniforms.uColor),S.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),S.uniforms.uSampler=c,r.shader.bind(S),r.geometry.bind(n),this.state.blendMode=Lg(e.blendMode,p),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Aw.extension={name:"tilingSprite",type:$e.RendererPlugin};Ke.add(Aw);const nh=new Nt,ll=new Nt,Ei=[new Pt,new Pt,new Pt,new Pt];Hg.prototype._renderCanvas=function(e){const r=this._texture;if(!r.baseTexture.valid)return;const n=e.canvasContext.activeContext,s=this.worldTransform,a=r.baseTexture,u=a.getDrawableSource(),c=a.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tintValue){this._textureID=this._texture._updateID;const S=new Fl(r._frame.width,r._frame.height,c);this.tintValue!==16777215?(this._tintedCanvas=Sr.getTintedCanvas(this,this.tintValue),S.context.drawImage(this._tintedCanvas,0,0)):S.context.drawImage(u,-r._frame.x*c,-r._frame.y*c),this._cachedTint=this.tintValue,this._canvasPattern=S.context.createPattern(S.canvas,"repeat")}n.globalAlpha=this.worldAlpha,e.canvasContext.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();const d=this.tileTransform.localTransform,p=this._width,m=this._height;nh.identity(),ll.copyFrom(d),this.uvRespectAnchor||ll.translate(-this.anchor.x*p,-this.anchor.y*m),ll.scale(1/c,1/c),nh.prepend(ll),nh.prepend(s),e.canvasContext.setContextTransform(nh),n.fillStyle=this._canvasPattern;const _=this.anchor.x*-p,x=this.anchor.y*-m;Ei[0].set(_,x),Ei[1].set(_+p,x),Ei[2].set(_+p,x+m),Ei[3].set(_,x+m);for(let S=0;S<4;S++)ll.applyInverse(Ei[S],Ei[S]);n.beginPath(),n.moveTo(Ei[0].x,Ei[0].y);for(let S=1;S<4;S++)n.lineTo(Ei[S].x,Ei[S].y);n.closePath(),n.fill()};class lA extends lr{constructor(e=1500,r,n=16384,s=!1){super();const a=16384;n>a&&(n=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Fe.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new Tt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const r=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class C_{constructor(e,r,n){this.geometry=new Bl,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let a=e[s];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||ht.FLOAT,offset:a.offset},r[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new Er(Sb(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let u=0;u<this.dynamicProperties.length;++u){const c=this.dynamicProperties[u];c.offset=r,r+=c.size,this.dynamicStride+=c.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Er(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let u=0;u<this.staticProperties.length;++u){const c=this.staticProperties[u];c.offset=s,s+=c.size,this.staticStride+=c.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Er(this.staticData,!0,!1);for(let u=0;u<this.dynamicProperties.length;++u){const c=this.dynamicProperties[u];e.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===ht.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let u=0;u<this.staticProperties.length;++u){const c=this.staticProperties[u];e.addAttribute(c.attributeName,this.staticBuffer,0,c.type===ht.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(e,r,n){for(let s=0;s<this.dynamicProperties.length;s++){const a=this.dynamicProperties[s];a.uploadFunction(e,r,n,a.type===ht.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let s=0;s<this.staticProperties.length;s++){const a=this.staticProperties[s];a.uploadFunction(e,r,n,a.type===ht.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var uA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,hA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Pw extends Ih{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Nt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ht.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ii.from(hA,uA,{}),this.state=ns.for2d()}render(e){const r=e.children,n=e._maxSize,s=e._batchSize,a=this.renderer;let u=r.length;if(u===0)return;u>n&&!e.autoResize&&(u=n);let c=e._buffers;c||(c=e._buffers=this.generateBuffers(e));const d=r[0]._texture.baseTexture,p=d.alphaMode>0;this.state.blendMode=Lg(e.blendMode,p),a.state.set(this.state);const m=a.gl,_=e.worldTransform.copyTo(this.tempMatrix);_.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=_.toArray(!0),this.shader.uniforms.uColor=Tt.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,p).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=d,this.renderer.shader.bind(this.shader);let x=!1;for(let S=0,E=0;S<u;S+=s,E+=1){let I=u-S;I>s&&(I=s),E>=c.length&&c.push(this._generateOneMoreBuffer(e));const A=c[E];A.uploadDynamic(r,S,I);const R=e._bufferUpdateIDs[E]||0;x=x||A._updateID<R,x&&(A._updateID=e._updateID,A.uploadStatic(r,S,I)),a.geometry.bind(A.geometry),m.drawElements(m.TRIANGLES,I*6,m.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,s=e._batchSize,a=e._properties;for(let u=0;u<n;u+=s)r.push(new C_(this.properties,a,s));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new C_(this.properties,n,r)}uploadVertices(e,r,n,s,a,u){let c=0,d=0,p=0,m=0;for(let _=0;_<n;++_){const x=e[r+_],S=x._texture,E=x.scale.x,I=x.scale.y,A=S.trim,R=S.orig;A?(d=A.x-x.anchor.x*R.width,c=d+A.width,m=A.y-x.anchor.y*R.height,p=m+A.height):(c=R.width*(1-x.anchor.x),d=R.width*-x.anchor.x,p=R.height*(1-x.anchor.y),m=R.height*-x.anchor.y),s[u]=d*E,s[u+1]=m*I,s[u+a]=c*E,s[u+a+1]=m*I,s[u+a*2]=c*E,s[u+a*2+1]=p*I,s[u+a*3]=d*E,s[u+a*3+1]=p*I,u+=a*4}}uploadPosition(e,r,n,s,a,u){for(let c=0;c<n;c++){const d=e[r+c].position;s[u]=d.x,s[u+1]=d.y,s[u+a]=d.x,s[u+a+1]=d.y,s[u+a*2]=d.x,s[u+a*2+1]=d.y,s[u+a*3]=d.x,s[u+a*3+1]=d.y,u+=a*4}}uploadRotation(e,r,n,s,a,u){for(let c=0;c<n;c++){const d=e[r+c].rotation;s[u]=d,s[u+a]=d,s[u+a*2]=d,s[u+a*3]=d,u+=a*4}}uploadUvs(e,r,n,s,a,u){for(let c=0;c<n;++c){const d=e[r+c]._texture._uvs;d?(s[u]=d.x0,s[u+1]=d.y0,s[u+a]=d.x1,s[u+a+1]=d.y1,s[u+a*2]=d.x2,s[u+a*2+1]=d.y2,s[u+a*3]=d.x3,s[u+a*3+1]=d.y3,u+=a*4):(s[u]=0,s[u+1]=0,s[u+a]=0,s[u+a+1]=0,s[u+a*2]=0,s[u+a*2+1]=0,s[u+a*3]=0,s[u+a*3+1]=0,u+=a*4)}}uploadTint(e,r,n,s,a,u){for(let c=0;c<n;++c){const d=e[r+c],p=Tt.shared.setValue(d._tintRGB).toPremultiplied(d.alpha,d.texture.baseTexture.alphaMode>0);s[u]=p,s[u+a]=p,s[u+a*2]=p,s[u+a*3]=p,u+=a*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Pw.extension={name:"particle",type:$e.RendererPlugin};Ke.add(Pw);lA.prototype.renderCanvas=function(e){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)return;const r=e.canvasContext.activeContext,n=this.worldTransform;let s=!0,a=0,u=0,c=0,d=0;e.canvasContext.setBlendMode(this.blendMode),r.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(let p=0;p<this.children.length;++p){const m=this.children[p];if(!m.visible||!m._texture.valid)continue;const _=m._texture.frame;if(r.globalAlpha=this.worldAlpha*m.alpha,m.rotation%(Math.PI*2)===0)s&&(e.canvasContext.setContextTransform(n,!1,1),s=!1),a=m.anchor.x*(-_.width*m.scale.x)+m.position.x+.5,u=m.anchor.y*(-_.height*m.scale.y)+m.position.y+.5,c=_.width*m.scale.x,d=_.height*m.scale.y;else{s||(s=!0),m.displayObjectUpdateTransform();const E=m.worldTransform;e.canvasContext.setContextTransform(E,this.roundPixels,1),a=m.anchor.x*-_.width+.5,u=m.anchor.y*-_.height+.5,c=_.width,d=_.height}const x=m._texture.baseTexture.resolution,S=e.canvasContext.activeResolution;r.drawImage(m._texture.baseTexture.getDrawableSource(),_.x*x,_.y*x,_.width*x,_.height*x,a*S,u*S,c*S,d*S)}};lr.prototype._renderCanvas=function(e){};lr.prototype.renderCanvas=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){this._mask&&e.mask.pushMask(this._mask),this._renderCanvas(e);for(let r=0,n=this.children.length;r<n;++r)this.children[r].renderCanvas(e);this._mask&&e.mask.popMask(e)}};er.prototype.renderCanvas=function(e){};var Bh=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Bh||{});const ih={willReadFrequently:!0},st=class{static get experimentalLetterSpacingSupported(){let t=st._experimentalLetterSpacingSupported;if(t!==void 0){const e=We.ADAPTER.getCanvasRenderingContext2D().prototype;t=st._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,n,s,a,u,c,d){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=s,this.lineWidths=a,this.lineHeight=u,this.maxLineWidth=c,this.fontProperties=d}static measureText(t,e,r,n=st._canvas){r=r??e.wordWrap;const s=e.toFontString(),a=st.measureFont(s);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);const u=n.getContext("2d",ih);u.font=s;const d=(r?st.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),p=new Array(d.length);let m=0;for(let E=0;E<d.length;E++){const I=st._measureText(d[E],e.letterSpacing,u);p[E]=I,m=Math.max(m,I)}let _=m+e.strokeThickness;e.dropShadow&&(_+=e.dropShadowDistance);const x=e.lineHeight||a.fontSize+e.strokeThickness;let S=Math.max(x,a.fontSize+e.strokeThickness*2)+(d.length-1)*(x+e.leading);return e.dropShadow&&(S+=e.dropShadowDistance),new st(t,e,_,S,d,p,x+e.leading,m,a)}static _measureText(t,e,r){let n=!1;st.experimentalLetterSpacingSupported&&(st.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(t).width;return s>0&&(n?s-=e:s+=(st.graphemeSegmenter(t).length-1)*e),s}static wordWrap(t,e,r=st._canvas){const n=r.getContext("2d",ih);let s=0,a="",u="";const c=Object.create(null),{letterSpacing:d,whiteSpace:p}=e,m=st.collapseSpaces(p),_=st.collapseNewlines(p);let x=!m;const S=e.wordWrapWidth+d,E=st.tokenize(t);for(let I=0;I<E.length;I++){let A=E[I];if(st.isNewline(A)){if(!_){u+=st.addLine(a),x=!m,a="",s=0;continue}A=" "}if(m){const O=st.isBreakingSpace(A),L=st.isBreakingSpace(a[a.length-1]);if(O&&L)continue}const R=st.getFromCache(A,d,c,n);if(R>S)if(a!==""&&(u+=st.addLine(a),a="",s=0),st.canBreakWords(A,e.breakWords)){const O=st.wordWrapSplit(A);for(let L=0;L<O.length;L++){let X=O[L],N=X,Z=1;for(;O[L+Z];){const ie=O[L+Z];if(!st.canBreakChars(N,ie,A,L,e.breakWords))X+=ie;else break;N=ie,Z++}L+=Z-1;const G=st.getFromCache(X,d,c,n);G+s>S&&(u+=st.addLine(a),x=!1,a="",s=0),a+=X,s+=G}}else{a.length>0&&(u+=st.addLine(a),a="",s=0);const O=I===E.length-1;u+=st.addLine(A,!O),x=!1,a="",s=0}else R+s>S&&(x=!1,u+=st.addLine(a),a="",s=0),(a.length>0||!st.isBreakingSpace(A)||x)&&(a+=A,s+=R)}return u+=st.addLine(a,!1),u}static addLine(t,e=!0){return t=st.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,r,n){let s=r[t];return typeof s!="number"&&(s=st._measureText(t,e,n)+e,r[t]=s),s}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!st.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:st._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:st._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const s=t[n],a=t[n+1];if(st.isBreakingSpace(s,a)||st.isNewline(s)){r!==""&&(e.push(r),r=""),e.push(s);continue}r+=s}return r!==""&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,s){return!0}static wordWrapSplit(t){return st.graphemeSegmenter(t)}static measureFont(t){if(st._fonts[t])return st._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=st._canvas,n=st._context;n.font=t;const s=st.METRICS_STRING+st.BASELINE_SYMBOL,a=Math.ceil(n.measureText(s).width);let u=Math.ceil(n.measureText(st.BASELINE_SYMBOL).width);const c=Math.ceil(st.HEIGHT_MULTIPLIER*u);if(u=u*st.BASELINE_MULTIPLIER|0,a===0||c===0)return st._fonts[t]=e,e;r.width=a,r.height=c,n.fillStyle="#f00",n.fillRect(0,0,a,c),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,u);const d=n.getImageData(0,0,a,c).data,p=d.length,m=a*4;let _=0,x=0,S=!1;for(_=0;_<u;++_){for(let E=0;E<m;E+=4)if(d[x+E]!==255){S=!0;break}if(!S)x+=m;else break}for(e.ascent=u-_,x=p-m,S=!1,_=c;_>u;--_){for(let E=0;E<m;E+=4)if(d[x+E]!==255){S=!0;break}if(!S)x-=m;else break}return e.descent=_-u,e.fontSize=e.ascent+e.descent,st._fonts[t]=e,e}static clearMetrics(t=""){t?delete st._fonts[t]:st._fonts={}}static get _canvas(){if(!st.__canvas){let t;try{const e=new OffscreenCanvas(0,0),r=e.getContext("2d",ih);if(r!=null&&r.measureText)return st.__canvas=e,e;t=We.ADAPTER.createCanvas()}catch{t=We.ADAPTER.createCanvas()}t.width=t.height=10,st.__canvas=t}return st.__canvas}static get _context(){return st.__context||(st.__context=st._canvas.getContext("2d",ih)),st.__context}};let Nr=st;Nr.METRICS_STRING="|ÉqÅ";Nr.BASELINE_SYMBOL="M";Nr.BASELINE_MULTIPLIER=1.4;Nr.HEIGHT_MULTIPLIER=2;Nr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})();Nr.experimentalLetterSpacing=!1;Nr._fonts={};Nr._newlines=[10,13];Nr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const cA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],pl=class{constructor(t){this.styleID=0,this.reset(),Dd(this,t,t)}clone(){const t={};return Dd(t,this,pl.defaultStyle),new pl(t)}reset(){Dd(this,pl.defaultStyle,pl.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Fd(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Fd(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){fA(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Fd(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!cA.includes(n)&&(n=`"${n}"`),e[r]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let rs=pl;rs.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Bh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Fd(t){const e=Tt.shared;return Array.isArray(t)?t.map(r=>e.setValue(r).toHex()):e.setValue(t).toHex()}function fA(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Dd(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const dA={texture:!0,children:!1,baseTexture:!0},xg=class extends Fi{constructor(t,e,r){let n=!1;r||(r=We.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const s=qe.from(r);s.orig=new Rt,s.trim=new Rt,super(s),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=xg.defaultResolution??We.RESOLUTION,this._autoResolution=xg.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Nr.experimentalLetterSpacing}static set experimentalLetterSpacing(t){yt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Nr.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,n=Nr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,a=n.height,u=n.lines,c=n.lineHeight,d=n.lineWidths,p=n.maxLineWidth,m=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+e.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;let _,x;const S=e.dropShadow?2:1;for(let E=0;E<S;++E){const I=e.dropShadow&&E===0,A=I?Math.ceil(Math.max(1,a)+e.padding*2):0,R=A*this._resolution;if(I){r.fillStyle="black",r.strokeStyle="black";const L=e.dropShadowColor,X=e.dropShadowBlur*this._resolution,N=e.dropShadowDistance*this._resolution;r.shadowColor=Tt.shared.setValue(L).setAlpha(e.dropShadowAlpha).toRgbaString(),r.shadowBlur=X,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*N,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*N+R}else r.fillStyle=this._generateFillStyle(e,u,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let O=(c-m.fontSize)/2;c-m.fontSize<0&&(O=0);for(let L=0;L<u.length;L++)_=e.strokeThickness/2,x=e.strokeThickness/2+L*c+m.ascent+O,e.align==="right"?_+=p-d[L]:e.align==="center"&&(_+=(p-d[L])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[L],_+e.padding,x+e.padding-A,!0),e.fill&&this.drawLetterSpacing(u[L],_+e.padding,x+e.padding-A)}this.updateTexture()}drawLetterSpacing(t,e,r,n=!1){const a=this._style.letterSpacing;let u=!1;if(Nr.experimentalLetterSpacingSupported&&(Nr.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,u=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),a===0||u){n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r);return}let c=e;const d=Nr.graphemeSegmenter(t);let p=this.context.measureText(t).width,m=0;for(let _=0;_<d.length;++_){const x=d[_];n?this.context.strokeText(x,c,r):this.context.fillText(x,c,r);let S="";for(let E=_+1;E<d.length;++E)S+=d[E];m=this.context.measureText(S).width,c+=p-m+a,p=m}}updateTexture(){const t=this.canvas;if(this._style.trim){const a=Ab(t);a.data&&(t.width=a.width,t.height=a.height,this.context.putImageData(a.data,0,0))}const e=this._texture,r=this._style,n=r.trim?0:r.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const a=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=this.canvas.width/this._resolution-a-u*2,d=this.canvas.height/this._resolution-a-u*2,p=n.slice(),m=t.fillGradientStops.slice();if(!m.length){const _=p.length+1;for(let x=1;x<_;++x)m.push(x/_)}if(p.unshift(n[0]),m.unshift(0),p.push(n[n.length-1]),m.push(1),t.fillGradientType===Bh.LINEAR_VERTICAL){s=this.context.createLinearGradient(c/2,u,c/2,d+u);const _=r.fontProperties.fontSize+t.strokeThickness;for(let x=0;x<e.length;x++){const S=r.lineHeight*(x-1)+_,E=r.lineHeight*x;let I=E;x>0&&S>E&&(I=(E+S)/2);const A=E+_,R=r.lineHeight*(x+1);let O=A;x+1<e.length&&R<A&&(O=(A+R)/2);const L=(O-I)/d;for(let X=0;X<p.length;X++){let N=0;typeof m[X]=="number"?N=m[X]:N=X/p.length;let Z=Math.min(1,Math.max(0,I/d+N*L));Z=Number(Z.toFixed(5)),s.addColorStop(Z,p[X])}}}else{s=this.context.createLinearGradient(u,d/2,c+u,d/2);const _=p.length+1;let x=1;for(let S=0;S<p.length;S++){let E;typeof m[S]=="number"?E=m[S]:E=x/_,s.addColorStop(E,p[S]),x++}}return s}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},dA,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Qi(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Qi(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof rs?this._style=t:this._style=new rs(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Oh=xg;Oh.defaultAutoResolution=!0;Oh.prototype._renderCanvas=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),Fi.prototype._renderCanvas.call(this,e)};const Rw=new Nt;er.prototype._cacheAsBitmap=!1;er.prototype._cacheData=null;er.prototype._cacheAsBitmapResolution=null;er.prototype._cacheAsBitmapMultisample=null;class pA{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(er.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new pA),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});er.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};er.prototype._initCachedDisplayObject=function(e){var x,S;if((x=this._cacheData)!=null&&x.sprite)return;const r=this.alpha;this.alpha=1,e.batch.flush();const n=this.getLocalBounds(null,!0).clone();if((S=this.filters)!=null&&S.length){const E=this.filters[0].padding;n.pad(E)}n.ceil(We.RESOLUTION);const s=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),u=e.renderTexture.destinationFrame.clone(),c=e.projection.transform,d=ki.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),p=`cacheAsBitmap_${ks()}`;this._cacheData.textureCacheId=p,pt.addToCache(d.baseTexture,p),qe.addToCache(d,p);const m=this.transform.localTransform.copyTo(Rw).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:d,clear:!0,transform:m,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=c,e.renderTexture.bind(s,a,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const _=new Fi(d);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(n.x/n.width),_.anchor.y=-(n.y/n.height),_.alpha=r,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=_.containsPoint.bind(_)};er.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};er.prototype._initCachedDisplayObjectCanvas=function(e){var m;if((m=this._cacheData)!=null&&m.sprite)return;const r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const s=e.canvasContext.activeContext,a=e._projTransform;r.ceil(We.RESOLUTION);const u=ki.create({width:r.width,height:r.height}),c=`cacheAsBitmap_${ks()}`;this._cacheData.textureCacheId=c,pt.addToCache(u.baseTexture,c),qe.addToCache(u,c);const d=Rw;this.transform.localTransform.copyTo(d),d.invert(),d.tx-=r.x,d.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:u,clear:!0,transform:d,skipUpdateTransform:!1}),e.canvasContext.activeContext=s,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const p=new Fi(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(r.x/r.width),p.anchor.y=-(r.y/r.height),p.alpha=n,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)};er.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};er.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};er.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,pt.removeFromCache(this._cacheData.textureCacheId),qe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};er.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};er.prototype.name=null;lr.prototype.getChildByName=function(e,r){for(let n=0,s=this.children.length;n<s;n++)if(this.children[n].name===e)return this.children[n];if(r)for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n];if(!a.getChildByName)continue;const u=a.getChildByName(e,!0);if(u)return u}return null};er.prototype.getGlobalPosition=function(e=new Pt,r=!1){return this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};var mA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class gA extends Ur{constructor(e=1){super(YC,mA,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const yA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},vA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function _A(t){const e=yA[t],r=e.length;let n=vA,s="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let u;for(let c=0;c<t;c++){let d=a.replace("%index%",c.toString());u=c,c>=r&&(u=t-c-1),d=d.replace("%value%",e[u].toString()),s+=d,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",t.toString()),n}const xA=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function bA(t,e){const r=Math.ceil(t/2);let n=xA,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let u=0;u<t;u++){let c=a.replace("%index%",u.toString());c=c.replace("%sampleIndex%",`${u-(r-1)}.0`),s+=c,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",t.toString()),n}class bg extends Ur{constructor(e,r=8,n=4,s=Ur.defaultResolution,a=5){const u=bA(a,e),c=_A(a);super(u,c),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,s);else{const a=e.getFilterTexture(),u=e.renderer;let c=r,d=a;this.state.blend=!1,e.applyFilter(this,c,d,Ai.CLEAR);for(let p=1;p<this.passes-1;p++){e.bindAndClear(c,Ai.BLIT),this.uniforms.uSampler=d;const m=d;d=c,c=m,u.shader.bind(this),u.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,d,n,s),e.returnFilterTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class wA extends Ur{constructor(e=8,r=4,n=Ur.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new bg(!0,e,r,n,s),this.blurYFilter=new bg(!1,e,r,n,s),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,s){const a=Math.abs(this.blurXFilter.strength),u=Math.abs(this.blurYFilter.strength);if(a&&u){const c=e.getFilterTexture();this.blurXFilter.apply(e,r,c,Ai.CLEAR),this.blurYFilter.apply(e,c,n,s),e.returnFilterTexture(c)}else u?this.blurYFilter.apply(e,r,n,s):this.blurXFilter.apply(e,r,n,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var TA=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class wg extends Ur{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(mw,TA,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,s,a]=Tt.shared.setValue(e).toArray(),u=[n,0,0,0,0,0,s,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(u,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),s=Math.sin(e),a=Math.sqrt,u=1/3,c=a(u),d=n+(1-n)*u,p=u*(1-n)-c*s,m=u*(1-n)+c*s,_=u*(1-n)+c*s,x=n+u*(1-n),S=u*(1-n)-c*s,E=u*(1-n)-c*s,I=u*(1-n)+c*s,A=n+u*(1-n),R=[d,p,m,0,0,_,x,S,0,0,E,I,A,0,0,0,0,0,1,0];this._loadMatrix(R,r)}contrast(e,r){const n=(e||0)+1,s=-.5*(n-1),a=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(a,r)}saturate(e=0,r){const n=e*2/3+1,s=(n-1)*-.5,a=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(a,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,s,a){e=e||.2,r=r||.15,n=n||16770432,s=s||3375104;const u=Tt.shared,[c,d,p]=u.setValue(n).toArray(),[m,_,x]=u.setValue(s).toArray(),S=[.3,.59,.11,0,0,c,d,p,e,0,m,_,x,r,0,c-m,d-_,p-x,0,0];this._loadMatrix(S,a)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}wg.prototype.grayscale=wg.prototype.greyscale;var SA=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,EA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class CA extends Ur{constructor(e,r){const n=new Nt;e.renderable=!1,super(EA,SA,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new Pt(r,r)}apply(e,r,n,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,u=Math.sqrt(a.a*a.a+a.b*a.b),c=Math.sqrt(a.c*a.c+a.d*a.d);u!==0&&c!==0&&(this.uniforms.rotation[0]=a.a/u,this.uniforms.rotation[1]=a.b/u,this.uniforms.rotation[2]=a.c/c,this.uniforms.rotation[3]=a.d/c),e.applyFilter(this,r,n,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var AA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,PA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class RA extends Ur{constructor(){super(PA,AA)}}var IA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class MA extends Ur{constructor(e=.5,r=Math.random()){super(mw,IA,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const A_={AlphaFilter:gA,BlurFilter:wA,BlurFilterPass:bg,ColorMatrixFilter:wg,DisplacementFilter:CA,FXAAFilter:RA,NoiseFilter:MA};Object.entries(A_).forEach(([t,e])=>{Object.defineProperty(A_,t,{get(){return yt("7.1.0",`filters.${t} has moved to ${t}`),e}})});class kA{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Kr.system.add(this.tickerUpdate,this,yo.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Kr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Is=new kA;class Ol{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ol.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Pt,this.page=new Pt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,s,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class wh extends Ol{constructor(){super(...arguments),this.client=new Pt,this.movement=new Pt,this.offset=new Pt,this.global=new Pt,this.screen=new Pt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,s,a,u,c,d,p,m,_,x,S,E,I){throw new Error("Method not implemented.")}}class oi extends wh{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class fa extends wh{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}fa.DOM_DELTA_PIXEL=0;fa.DOM_DELTA_LINE=1;fa.DOM_DELTA_PAGE=2;const FA=2048,DA=new Pt,Bd=new Pt;class BA{constructor(e){this.dispatch=new ma,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,s)=>n.priority-s.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,s=r.length;n<s;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Is.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",a=this[s](this.rootTarget,this.rootTarget.eventMode,DA.set(e,r),this.hitTestFn,this.hitPruneFn);return a&&a[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,a=n.length-1;s<a;s++)if(e.currentTarget=n[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=n.length-2;s>=0;s--)if(e.currentTarget=n[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(r)?r:[r];for(let a=n.length-1;a>=0;a--)s.forEach(u=>{e.currentTarget=n[a],this.notifyTarget(e,u)})}propagationPath(e){const r=[e];for(let n=0;n<FA&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,s,a,u=!1){let c=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Is.pauseUpdate=!1),e.interactiveChildren&&e.children){const m=e.children;for(let _=m.length-1;_>=0;_--){const x=m[_],S=this.hitTestMoveRecursive(x,this._isInteractive(r)?r:x.eventMode,n,s,a,u||a(e,n));if(S){if(S.length>0&&!S[S.length-1].parent)continue;const E=e.isInteractive();(S.length>0||E)&&(E&&this._allInteractiveElements.push(e),S.push(e)),this._hitElements.length===0&&(this._hitElements=S),c=!0}}}const d=this._isInteractive(r),p=e.isInteractive();return p&&p&&this._allInteractiveElements.push(e),u||this._hitElements.length>0?null:c?this._hitElements:d&&!a(e,n)&&s(e,n)?p?[e]:[]:null}hitTestRecursive(e,r,n,s,a){if(this._interactivePrune(e)||a(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Is.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let p=d.length-1;p>=0;p--){const m=d[p],_=this.hitTestRecursive(m,this._isInteractive(r)?r:m.eventMode,n,s,a);if(_){if(_.length>0&&!_[_.length-1].parent)continue;const x=e.isInteractive();return(_.length>0||x)&&_.push(e),_}}}const u=this._isInteractive(r),c=e.isInteractive();return u&&s(e,n)?c?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var n;if(e.hitArea&&(e.worldTransform.applyInverse(r,Bd),!e.hitArea.contains(Bd.x,Bd.y)))return!0;if(e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;if(s&&!((n=s.containsPoint)!=null&&n.call(s,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var a,u;r=r??e.type;const n=`on${r}`;(u=(a=e.currentTarget)[n])==null||u.call(a,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof oi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const s=r.button===2;this.dispatchEvent(r,s?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var d,p;if(!(e instanceof oi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.overTargets);if(((d=s.overTargets)==null?void 0:d.length)>0&&a!==r.target){const m=e.type==="mousemove"?"mouseout":"pointerout",_=this.createPointerEvent(e,m,a);if(this.dispatchEvent(_,"pointerout"),n&&this.dispatchEvent(_,"mouseout"),!r.composedPath().includes(a)){const x=this.createPointerEvent(e,"pointerleave",a);for(x.eventPhase=x.AT_TARGET;x.target&&!r.composedPath().includes(x.target);)x.currentTarget=x.target,this.notifyTarget(x),n&&this.notifyTarget(x,"mouseleave"),x.target=x.target.parent;this.freeEvent(x)}this.freeEvent(_)}if(a!==r.target){const m=e.type==="mousemove"?"mouseover":"pointerover",_=this.clonePointerEvent(r,m);this.dispatchEvent(_,"pointerover"),n&&this.dispatchEvent(_,"mouseover");let x=a==null?void 0:a.parent;for(;x&&x!==this.rootTarget.parent&&x!==r.target;)x=x.parent;if(!x||x===this.rootTarget.parent){const E=this.clonePointerEvent(r,"pointerenter");for(E.eventPhase=E.AT_TARGET;E.target&&E.target!==a&&E.target!==this.rootTarget.parent;)E.currentTarget=E.target,this.notifyTarget(E),n&&this.notifyTarget(E,"mouseenter"),E.target=E.target.parent;this.freeEvent(E)}this.freeEvent(_)}const u=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?u.push("pointermove"):this.dispatchEvent(r,"pointermove"),c&&u.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?u.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),c&&u.push("globaltouchmove")),n&&(this.moveOnAll?u.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),c&&u.push("globalmousemove"),this.cursor=(p=r.target)==null?void 0:p.cursor),u.length>0&&this.all(r,u),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var u;if(!(e instanceof oi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(u=n.target)==null?void 0:u.cursor);const a=this.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),s&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof oi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(r.overTargets),a=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(a),n&&this.dispatchEvent(a,"mouseout");const u=this.createPointerEvent(e,"pointerleave",s);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),n&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;r.overTargets=null,this.freeEvent(a),this.freeEvent(u)}this.cursor=null}mapPointerUp(e){if(!(e instanceof oi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.dispatchEvent(n,c?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[e.button]);let u=a;if(a&&!n.composedPath().includes(a)){let c=a;for(;c&&!n.composedPath().includes(c);){if(n.currentTarget=c,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const d=n.button===2;this.notifyTarget(n,d?"rightupoutside":"mouseupoutside")}c=c.parent}delete s.pressTargetsByButton[e.button],u=c}if(u){const c=this.clonePointerEvent(n,"click");c.target=u,c.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:c.target,timeStamp:r});const d=s.clicksByButton[e.button];if(d.target===c.target&&r-d.timeStamp<200?++d.clickCount:d.clickCount=1,d.target=c.target,d.timeStamp=r,c.detail=d.clickCount,c.pointerType==="mouse"){const p=c.button===2;this.dispatchEvent(c,p?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof oi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(n){let a=n;for(;a;)s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof fa)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const s=this.allocateEvent(oi);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=n??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof r=="string"&&(s.type=r),s}createWheelEvent(e){const r=this.allocateEvent(fa);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(oi);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof oi&&r instanceof oi&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof wh&&r instanceof wh&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let s=0,a=n.length;s<a&&!e.propagationImmediatelyStopped;s++)n[s].once&&e.currentTarget.removeListener(r,n[s].fn,void 0,!0),n[s].fn.call(n[s].context,e)}}const OA=1,LA={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Tg=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new BA(null),Is.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new oi(null),this.rootWheelEvent=new fa(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Tg.defaultEventFeatures},{set:(e,r,n)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),e[r]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:r}=this.renderer;this.setTargetElement(e),this.resolution=r,Tg._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let r=0,n=e.length;r<n;r++){const s=e[r],a=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;Is.pointerMoved();const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const s=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let s=0,a=n.length;s<a;s++){const u=this.bootstrapEvent(this.rootPointerEvent,n[s]);u.type+=r,this.rootBoundary.mapEvent(u)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const s=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Is.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Is.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Is.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*s,t.y=(r-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const s=t.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const r=t;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=OA),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=LA[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let Cl=Tg;Cl.extension={name:"events",type:[$e.RendererSystem,$e.CanvasRendererSystem]};Cl.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Ke.add(Cl);function P_(t){return t==="dynamic"||t==="static"}const NA={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??P_(Cl.defaultEventMode)},set interactive(t){yt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Cl.defaultEventMode},set eventMode(t){this._internalInteractive=P_(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,s)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,s)},dispatchEvent(t){if(!(t instanceof Ol))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};er.mixin(NA);const UA={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};er.mixin(UA);const GA=9,sh=100,HA=0,jA=0,R_=2,I_=1,zA=-1e3,$A=-1e3,VA=2;class Iw{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Pi.tablet||Pi.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${sh}px`,r.style.height=`${sh}px`,r.style.position="absolute",r.style.top=`${HA}px`,r.style.left=`${jA}px`,r.style.zIndex=R_.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${I_}px`,e.style.height=`${I_}px`,e.style.position="absolute",e.style.top=`${zA}px`,e.style.left=`${$A}px`,e.style.zIndex=VA.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(Pi.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:s,height:a}=this.renderer.view.getBoundingClientRect(),{width:u,height:c,resolution:d}=this.renderer,p=s/u*d,m=a/c*d;let _=this.div;_.style.left=`${r}px`,_.style.top=`${n}px`,_.style.width=`${u}px`,_.style.height=`${c}px`;for(let x=0;x<this.children.length;x++){const S=this.children[x];if(S.renderId!==this.renderId)S._accessibleActive=!1,mo(this.children,x,1),this.div.removeChild(S._accessibleDiv),this.pool.push(S._accessibleDiv),S._accessibleDiv=null,x--;else{_=S._accessibleDiv;let E=S.hitArea;const I=S.worldTransform;S.hitArea?(_.style.left=`${(I.tx+E.x*I.a)*p}px`,_.style.top=`${(I.ty+E.y*I.d)*m}px`,_.style.width=`${E.width*I.a*p}px`,_.style.height=`${E.height*I.d*m}px`):(E=S.getBounds(),this.capHitArea(E),_.style.left=`${E.x*p}px`,_.style.top=`${E.y*m}px`,_.style.width=`${E.width*p}px`,_.style.height=`${E.height*m}px`,_.title!==S.accessibleTitle&&S.accessibleTitle!==null&&(_.title=S.accessibleTitle),_.getAttribute("aria-label")!==S.accessibleHint&&S.accessibleHint!==null&&_.setAttribute("aria-label",S.accessibleHint)),(S.accessibleTitle!==_.title||S.tabIndex!==_.tabIndex)&&(_.title=S.accessibleTitle,_.tabIndex=S.tabIndex,this.debug&&this.updateDebugHTML(_))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${sh}px`,r.style.height=`${sh}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=R_.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,s=this.renderer.events.rootBoundary,a=Object.assign(new Ol(s),{target:n});s.rootTarget=this.renderer.lastObjectRendered,r.forEach(u=>s.dispatchEvent(a,u))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===GA&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Iw.extension={name:"accessibility",type:[$e.RendererPlugin,$e.CanvasRendererPlugin]};Ke.add(Iw);const Sg=class{constructor(t){this.stage=new lr,t=Object.assign({forceCanvas:!1},t),this.renderer=WC(t),Sg._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=Sg._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let jg=Sg;jg._plugins=[];Ke.handleByList($e.Application,jg._plugins);class Mw{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:a}=this._resizeTo;r=s,n=a}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Mw.extension=$e.Application;Ke.add(Mw);const M_={loader:$e.LoadParser,resolver:$e.ResolveParser,cache:$e.CacheParser,detection:$e.DetectionParser};Ke.handle($e.Asset,t=>{const e=t.ref;Object.entries(M_).filter(([r])=>!!e[r]).forEach(([r,n])=>Ke.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(M_).filter(r=>!!e[r]).forEach(r=>Ke.remove(e[r]))});class WA{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ll(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function bo(t,e){const r=t.split("?")[0],n=Gr.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const es=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"?e(r):r):t),Eg=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function kw(t,e,r,n,s){const a=e[r];for(let u=0;u<a.length;u++){const c=a[u];r<e.length-1?kw(t.replace(n[r],c),e,r+1,n,s):s.push(t.replace(n[r],c))}}function XA(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const s=[];r.forEach(a=>{const u=a.substring(1,a.length-1).split(",");s.push(u)}),kw(t,s,0,r,n)}else n.push(t);return n}const Th=t=>!Array.isArray(t);class qA{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=es(e);let s;for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];if(d.test(r)){s=d.getCacheableAssets(n,r);break}}s||(s={},n.forEach(c=>{s[c]=r}));const a=Object.keys(s),u={cacheKeys:a,keys:n};if(n.forEach(c=>{this._cacheMap.set(c,u)}),a.forEach(c=>{this._cache.has(c)&&this._cache.get(c)!==r&&console.warn("[Cache] already has key:",c),this._cache.set(c,s[c])}),r instanceof qe){const c=r;n.forEach(d=>{c.baseTexture!==qe.EMPTY.baseTexture&&pt.addToCache(c.baseTexture,d),qe.addToCache(c,d)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(s=>{this._cache.delete(s)}),r.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const ul=new qA;class YA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var u,c;let s=null,a=null;if(r.loadParser&&(a=this._parserHash[r.loadParser],a||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!a){for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.load&&((u=p.test)!=null&&u.call(p,e,r,this))){a=p;break}}if(!a)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await a.load(e,r,this),n.parser=a;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];p.parse&&p.parse&&await((c=p.testParse)==null?void 0:c.call(p,s,r,this))&&(s=await p.parse(s,r,this)||s,n.parser=p)}return s})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const s={},a=Th(e),u=es(e,p=>({src:p})),c=u.length,d=u.map(async p=>{const m=Gr.toAbsolute(p.src);if(!s[p.src])try{this.promiseCache[m]||(this.promiseCache[m]=this._getLoadPromiseAndParser(m,p)),s[p.src]=await this.promiseCache[m].promise,r&&r(++n/c)}catch(_){throw delete this.promiseCache[m],delete s[p.src],new Error(`[Loader.load] Failed to load ${m}.
${_}`)}});return await Promise.all(d),a?s[u[0].src]:s}async unload(e){const n=es(e,s=>({src:s})).map(async s=>{var c,d;const a=Gr.toAbsolute(s.src),u=this.promiseCache[a];if(u){const p=await u.promise;(d=(c=u.parser)==null?void 0:c.unload)==null||d.call(c,p,s,this),delete this.promiseCache[a]}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var Di=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Di||{});const KA=".json",ZA="application/json",QA={extension:{type:$e.LoadParser,priority:Di.Low},name:"loadJson",test(t){return Ll(t,ZA)||bo(t,KA)},async load(t){return await(await We.ADAPTER.fetch(t)).json()}};Ke.add(QA);const JA=".txt",eP="text/plain",tP={name:"loadTxt",extension:{type:$e.LoadParser,priority:Di.Low},test(t){return Ll(t,eP)||bo(t,JA)},async load(t){return await(await We.ADAPTER.fetch(t)).text()}};Ke.add(tP);const rP=["normal","bold","100","200","300","400","500","600","700","800","900"],nP=[".ttf",".otf",".woff",".woff2"],iP=["font/ttf","font/otf","font/woff","font/woff2"],sP=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function oP(t){const e=Gr.extname(t),s=Gr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let a=s.length>0;for(const c of s)if(!c.match(sP)){a=!1;break}let u=s.join(" ");return a||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const aP={extension:{type:$e.LoadParser,priority:Di.Low},name:"loadWebFont",test(t){return Ll(t,iP)||bo(t,nP)},async load(t,e){var n,s,a;const r=We.ADAPTER.getFontFaceSet();if(r){const u=[],c=((n=e.data)==null?void 0:n.family)??oP(t),d=((a=(s=e.data)==null?void 0:s.weights)==null?void 0:a.filter(m=>rP.includes(m)))??["normal"],p=e.data??{};for(let m=0;m<d.length;m++){const _=d[m],x=new FontFace(c,`url(${encodeURI(t)})`,{...p,weight:_});await x.load(),r.add(x),u.push(x)}return u.length===1?u[0]:u}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>We.ADAPTER.getFontFaceSet().delete(e))}};Ke.add(aP);let k_=0,Od;const lP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",uP={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${lP}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},hP={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Ld;class cP{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const r=URL.createObjectURL(new Blob([uP.code],{type:"application/javascript"})),n=new Worker(r);n.addEventListener("message",s=>{n.terminate(),URL.revokeObjectURL(r),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Od===void 0&&(Od=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Od&&(Ld||(Ld=URL.createObjectURL(new Blob([hP.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Ld),e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((s,a)=>{this.queue.push({id:e,arguments:r,resolve:s,reject:a})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[k_]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:k_++,id:n})}}const F_=new cP;function Lh(t,e,r){const n=new qe(t);return n.baseTexture.on("dispose",()=>{delete e.promiseCache[r]}),n}const fP=[".jpeg",".jpg",".png",".webp",".avif"],dP=["image/jpeg","image/png","image/webp","image/avif"];async function pP(t){const e=await We.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const Nh={name:"loadTextures",extension:{type:$e.LoadParser,priority:Di.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Ll(t,dP)||bo(t,fP)},async load(t,e,r){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await F_.isImageBitmapSupported()?n=await F_.loadImageBitmap(t):n=await pP(t):n=await new Promise(a=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?a(n):n.onload=()=>{a(n)}});const s=new pt(n,{resolution:ts(t),...e.data});return s.resource.src=t,Lh(s,r,t)},unload(t){t.destroy(!0)}};Ke.add(Nh);const mP=".svg",gP="image/svg+xml",yP={extension:{type:$e.LoadParser,priority:Di.High},name:"loadSVG",test(t){return Ll(t,gP)||bo(t,mP)},async testParse(t){return El.test(t)},async parse(t,e,r){var u;const n=new El(t,(u=e==null?void 0:e.data)==null?void 0:u.resourceOptions);await n.load();const s=new pt(n,{resolution:ts(t),...e==null?void 0:e.data});return s.resource.src=t,Lh(s,r,t)},async load(t,e){return(await We.ADAPTER.fetch(t)).text()},unload:Nh.unload};Ke.add(yP);class vP{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(s=>{if(typeof s.name=="string"){const a=this._createBundleAssetId(e,s.name);n.push(a),this.add([s.name,a],s.srcs,s.data)}else{const a=s.name.map(u=>this._createBundleAssetId(e,u));a.forEach(u=>{n.push(u)}),this.add([...s.name,...a],s.srcs)}}):Object.keys(r).forEach(s=>{n.push(this._createBundleAssetId(e,s)),this.add([s,this._createBundleAssetId(e,s)],r[s])}),this._bundles[e]=n}add(e,r,n){const s=es(e);s.forEach(u=>{this.hasKey(u)&&console.warn(`[Resolver] already has key: ${u} overwriting`)}),Array.isArray(r)||(typeof r=="string"?r=XA(r):r=[r]);const a=r.map(u=>{let c=u;if(typeof u=="string"){let d=!1;for(let p=0;p<this._parsers.length;p++){const m=this._parsers[p];if(m.test(u)){c=m.parse(u),d=!0;break}}d||(c={src:u})}return c.format||(c.format=c.src.split(".").pop()),c.alias||(c.alias=s),(this._basePath||this._rootPath)&&(c.src=Gr.toAbsolute(c.src,this._basePath,this._rootPath)),c.src=this._appendDefaultSearchParams(c.src),c.data=c.data??n,c});s.forEach(u=>{this._assetMap[u]=a})}resolveBundle(e){const r=Th(e);e=es(e);const n={};return e.forEach(s=>{const a=this._bundles[s];if(a){const u=this.resolve(a),c={};for(const d in u){const p=u[d];c[this._extractAssetIdFromBundle(s,d)]=p}n[s]=c}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const s in r)n[s]=r[s].src;return n}return r.src}resolve(e){const r=Th(e);e=es(e);const n={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let a=this._assetMap[s];const u=this._getPreferredOrder(a),c=a[0];u==null||u.priority.forEach(d=>{u.params[d].forEach(p=>{const m=a.filter(_=>_[d]?_[d]===p:!1);m.length&&(a=m)})}),this._resolverHash[s]=a[0]??c}else{let a=s;(this._basePath||this._rootPath)&&(a=Gr.toAbsolute(a,this._basePath,this._rootPath)),a=this._appendDefaultSearchParams(a),this._resolverHash[s]={src:a}}n[s]=this._resolverHash[s]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],s=this._preferredOrder.find(a=>a.params.format.includes(n.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}}class _P{constructor(){this._detections=[],this._initialized=!1,this.resolver=new vP,this.loader=new YA,this.cache=ul,this._backgroundLoader=new WA(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var a,u,c;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let d=e.manifest;typeof d=="string"&&(d=await this.load(d)),this.resolver.addManifest(d)}const r=((a=e.texturePreference)==null?void 0:a.resolution)??1,n=typeof r=="number"?[r]:r;let s=[];if((u=e.texturePreference)!=null&&u.format){const d=(c=e.texturePreference)==null?void 0:c.format;s=typeof d=="string"?[d]:d;for(const p of this._detections)await p.test()||(s=await p.remove(s))}else for(const d of this._detections)await d.test()&&(s=await d.add(s));this.resolver.prefer({params:{format:s,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n){this.resolver.add(e,r,n)}async load(e,r){this._initialized||await this.init();const n=Th(e),s=es(e).map(c=>typeof c!="string"?(this.resolver.add(c.src,c),c.src):(this.resolver.hasKey(c)||this.resolver.add(c,c),c)),a=this.resolver.resolve(s),u=await this._mapLoadToResolve(a,r);return n?u[s[0]]:u}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const s=this.resolver.resolveBundle(e),a={},u=Object.keys(s);let c=0,d=0;const p=()=>{r==null||r(++c/d)},m=u.map(_=>{const x=s[_];return d+=Object.keys(x).length,this._mapLoadToResolve(x,p).then(S=>{a[_]=S})});return await Promise.all(m),n?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ul.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=ul.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const a=await this.loader.load(n,r);this._backgroundLoader.active=!0;const u={};return n.forEach((c,d)=>{const p=a[c.src],m=[c.src];c.alias&&m.push(...c.alias),u[s[d]]=p,ul.set(m,p)}),u}async unload(e){this._initialized||await this.init();const r=es(e).map(s=>typeof s!="string"?s.src:s),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=es(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(s=>this._unloadFromResolved(r[s]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{ul.remove(n.src)}),await this.loader.unload(r)}get detections(){return this._detections}get preferWorkers(){return Nh.config.preferWorkers}set preferWorkers(e){yt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const fo=new _P;Ke.handleByList($e.LoadParser,fo.loader.parsers).handleByList($e.ResolveParser,fo.resolver.parsers).handleByList($e.CacheParser,fo.cache.parsers).handleByList($e.DetectionParser,fo.detections);const xP={extension:$e.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof qe),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((s,a)=>{r[n+(a===0?"":a+1)]=s})}),r}};Ke.add(xP);const bP={extension:{type:$e.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await We.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(r=>r.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};Ke.add(bP);const wP={extension:{type:$e.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await We.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(r=>r.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};Ke.add(wP);const D_=["png","jpg","jpeg"],TP={extension:{type:$e.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...D_],remove:async t=>t.filter(e=>!D_.includes(e))};Ke.add(TP);const SP={extension:$e.ResolveParser,test:Nh.test,parse:t=>{var e;return{resolution:parseFloat(((e=We.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}};Ke.add(SP);var Fn=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Fn||{});const Sh={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Zi,sa;function B_(){sa={s3tc:Zi.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Zi.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Zi.getExtension("WEBGL_compressed_texture_etc"),etc1:Zi.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Zi.getExtension("WEBGL_compressed_texture_pvrtc")||Zi.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Zi.getExtension("WEBGL_compressed_texture_atc"),astc:Zi.getExtension("WEBGL_compressed_texture_astc")}}const EP={extension:{type:$e.DetectionParser,priority:2},test:async()=>{const e=We.ADAPTER.createCanvas().getContext("webgl");return e?(Zi=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{sa||B_();const e=[];for(const r in sa)sa[r]&&e.push(r);return[...e,...t]},remove:async t=>(sa||B_(),t.filter(e=>!(e in sa)))};Ke.add(EP);class CP extends Dl{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,s;typeof e=="string"?(n=e,s=new Uint8Array):(n=null,s=e),super(s,r),this.origin=n,this.buffer=s?new ag(s):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new ag(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class go extends CP{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=go._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||go._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let u=0,c=this.levels;u<c;u++){const{levelID:d,levelWidth:p,levelHeight:m,levelBuffer:_}=this._levelBuffers[u];s.compressedTexImage2D(s.TEXTURE_2D,d,this.format,p,m,0,_)}return!0}onBlobLoaded(){this._levelBuffers=go._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,r,n,s,a,u,c){const d=new Array(n);let p=e.byteOffset,m=u,_=c,x=m+s-1&~(s-1),S=_+a-1&~(a-1),E=x*S*Sh[r];for(let I=0;I<n;I++)d[I]={levelID:I,levelWidth:n>1?m:x,levelHeight:n>1?_:S,levelBuffer:new Uint8Array(e.buffer,p,E)},p+=E,m=m>>1||1,_=_>>1||1,x=m+s-1&~(s-1),S=_+a-1&~(a-1),E=x*S*Sh[r];return d}}const Nd=4,oh=124,AP=32,O_=20,PP=542327876,ah={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},RP={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},lh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},IP=1,MP=2,kP=4,FP=64,DP=512,BP=131072,OP=827611204,LP=861165636,NP=894720068,UP=808540228,GP=4,HP={[OP]:Fn.COMPRESSED_RGBA_S3TC_DXT1_EXT,[LP]:Fn.COMPRESSED_RGBA_S3TC_DXT3_EXT,[NP]:Fn.COMPRESSED_RGBA_S3TC_DXT5_EXT},jP={70:Fn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Fn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Fn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Fn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Fn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Fn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Fn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Fn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Fn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function zP(t){const e=new Uint32Array(t);if(e[0]!==PP)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,oh/Uint32Array.BYTES_PER_ELEMENT),s=n[ah.HEIGHT],a=n[ah.WIDTH],u=n[ah.MIPMAP_COUNT],c=new Uint32Array(t,ah.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,AP/Uint32Array.BYTES_PER_ELEMENT),d=c[IP];if(d&kP){const p=c[RP.FOURCC];if(p!==UP){const L=HP[p],X=Nd+oh,N=new Uint8Array(t,X);return[new go(N,{format:L,width:a,height:s,levels:u})]}const m=Nd+oh,_=new Uint32Array(e.buffer,m,O_/Uint32Array.BYTES_PER_ELEMENT),x=_[lh.DXGI_FORMAT],S=_[lh.RESOURCE_DIMENSION],E=_[lh.MISC_FLAG],I=_[lh.ARRAY_SIZE],A=jP[x];if(A===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${x}`);if(E===GP)throw new Error("DDSParser does not support cubemap textures");if(S===6)throw new Error("DDSParser does not supported 3D texture data");const R=new Array,O=Nd+oh+O_;if(I===1)R.push(new Uint8Array(t,O));else{const L=Sh[A];let X=0,N=a,Z=s;for(let ie=0;ie<u;ie++){const re=Math.max(1,N+3&-4),_e=Math.max(1,Z+3&-4),oe=re*_e*L;X+=oe,N=N>>>1,Z=Z>>>1}let G=O;for(let ie=0;ie<I;ie++)R.push(new Uint8Array(t,G,X)),G+=X}return R.map(L=>new go(L,{format:A,width:a,height:s,levels:u}))}throw d&FP?new Error("DDSParser does not support uncompressed texture data."):d&DP?new Error("DDSParser does not supported YUV uncompressed texture data."):d&BP?new Error("DDSParser does not support single-channel (lumninance) texture data!"):d&MP?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const L_=[171,75,84,88,32,49,49,187,13,10,26,10],$P=67305985,ii={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Cg=64,N_={[ht.UNSIGNED_BYTE]:1,[ht.UNSIGNED_SHORT]:2,[ht.INT]:4,[ht.UNSIGNED_INT]:4,[ht.FLOAT]:4,[ht.HALF_FLOAT]:8},VP={[ze.RGBA]:4,[ze.RGB]:3,[ze.RG]:2,[ze.RED]:1,[ze.LUMINANCE]:1,[ze.LUMINANCE_ALPHA]:2,[ze.ALPHA]:1},WP={[ht.UNSIGNED_SHORT_4_4_4_4]:2,[ht.UNSIGNED_SHORT_5_5_5_1]:2,[ht.UNSIGNED_SHORT_5_6_5]:2};function XP(t,e,r=!1){const n=new DataView(e);if(!qP(t,n))return null;const s=n.getUint32(ii.ENDIANNESS,!0)===$P,a=n.getUint32(ii.GL_TYPE,s),u=n.getUint32(ii.GL_FORMAT,s),c=n.getUint32(ii.GL_INTERNAL_FORMAT,s),d=n.getUint32(ii.PIXEL_WIDTH,s),p=n.getUint32(ii.PIXEL_HEIGHT,s)||1,m=n.getUint32(ii.PIXEL_DEPTH,s)||1,_=n.getUint32(ii.NUMBER_OF_ARRAY_ELEMENTS,s)||1,x=n.getUint32(ii.NUMBER_OF_FACES,s),S=n.getUint32(ii.NUMBER_OF_MIPMAP_LEVELS,s),E=n.getUint32(ii.BYTES_OF_KEY_VALUE_DATA,s);if(p===0||m!==1)throw new Error("Only 2D textures are supported");if(x!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(_!==1)throw new Error("WebGL does not support array textures");const I=4,A=4,R=d+3&-4,O=p+3&-4,L=new Array(_);let X=d*p;a===0&&(X=R*O);let N;if(a!==0?N_[a]?N=N_[a]*VP[u]:N=WP[a]:N=Sh[c],N===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const Z=r?KP(n,E,s):null;let ie=X*N,re=d,_e=p,oe=R,ee=O,me=Cg+E;for(let ue=0;ue<S;ue++){const Ae=n.getUint32(me,s);let H=me+4;for(let j=0;j<_;j++){let F=L[j];F||(F=L[j]=new Array(S)),F[ue]={levelID:ue,levelWidth:S>1||a!==0?re:oe,levelHeight:S>1||a!==0?_e:ee,levelBuffer:new Uint8Array(e,H,ie)},H+=ie}me+=Ae+4,me=me%4!==0?me+4-me%4:me,re=re>>1||1,_e=_e>>1||1,oe=re+I-1&~(I-1),ee=_e+A-1&~(A-1),ie=oe*ee*N}return a!==0?{uncompressed:L.map(ue=>{let Ae=ue[0].levelBuffer,H=!1;return a===ht.FLOAT?Ae=new Float32Array(ue[0].levelBuffer.buffer,ue[0].levelBuffer.byteOffset,ue[0].levelBuffer.byteLength/4):a===ht.UNSIGNED_INT?(H=!0,Ae=new Uint32Array(ue[0].levelBuffer.buffer,ue[0].levelBuffer.byteOffset,ue[0].levelBuffer.byteLength/4)):a===ht.INT&&(H=!0,Ae=new Int32Array(ue[0].levelBuffer.buffer,ue[0].levelBuffer.byteOffset,ue[0].levelBuffer.byteLength/4)),{resource:new Dl(Ae,{width:ue[0].levelWidth,height:ue[0].levelHeight}),type:a,format:H?YP(u):u}}),kvData:Z}:{compressed:L.map(ue=>new go(null,{format:c,width:d,height:p,levels:S,levelBuffers:ue})),kvData:Z}}function qP(t,e){for(let r=0;r<L_.length;r++)if(e.getUint8(r)!==L_[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function YP(t){switch(t){case ze.RGBA:return ze.RGBA_INTEGER;case ze.RGB:return ze.RGB_INTEGER;case ze.RG:return ze.RG_INTEGER;case ze.RED:return ze.RED_INTEGER;default:return t}}function KP(t,e,r){const n=new Map;let s=0;for(;s<e;){const a=t.getUint32(Cg+s,r),u=Cg+s+4,c=3-(a+3)%4;if(a===0||a>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let d=0;for(;d<a&&t.getUint8(u+d)!==0;d++);if(d===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const p=new TextDecoder().decode(new Uint8Array(t.buffer,u,d)),m=new DataView(t.buffer,u+d+1,a-d-1);n.set(p,m),s+=4+a+c}return n}const ZP={extension:{type:$e.LoadParser,priority:Di.High},name:"loadDDS",test(t){return bo(t,".dds")},async load(t,e,r){const s=await(await We.ADAPTER.fetch(t)).arrayBuffer(),u=zP(s).map(c=>{const d=new pt(c,{mipmap:Mi.OFF,alphaMode:yi.NO_PREMULTIPLIED_ALPHA,resolution:ts(t),...e.data});return Lh(d,r,t)});return u.length===1?u[0]:u},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Ke.add(ZP);const QP={extension:{type:$e.LoadParser,priority:Di.High},name:"loadKTX",test(t){return bo(t,".ktx")},async load(t,e,r){const s=await(await We.ADAPTER.fetch(t)).arrayBuffer(),{compressed:a,uncompressed:u,kvData:c}=XP(t,s),d=a??u,p={mipmap:Mi.OFF,alphaMode:yi.NO_PREMULTIPLIED_ALPHA,resolution:ts(t),...e.data},m=d.map(_=>{d===u&&Object.assign(p,{type:_.type,format:_.format});const x=new pt(_,p);return x.ktxKeyValueData=c,Lh(x,r,t)});return m.length===1?m[0]:m},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Ke.add(QP);const JP={extension:$e.ResolveParser,test:t=>{const r=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:t=>{var n,s;if(t.split("?")[0].split(".").pop()==="ktx"){const a=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(a.some(u=>t.endsWith(u)))return{resolution:parseFloat(((n=We.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:a.find(u=>t.endsWith(u)),src:t}}return{resolution:parseFloat(((s=We.RETINA_PREFIX.exec(t))==null?void 0:s[1])??"1"),format:t.split(".").pop(),src:t}}};Ke.add(JP);const e2=new Rt,t2=4,ml=class{constructor(t){this.renderer=t}async image(t,e,r){const n=new Image;return n.src=await this.base64(t,e,r),n}async base64(t,e,r){const n=this.canvas(t);if(n.toBlob!==void 0)return new Promise((s,a)=>{n.toBlob(u=>{if(!u){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>s(c.result),c.onerror=a,c.readAsDataURL(u)},e,r)});if(n.toDataURL!==void 0)return n.toDataURL(e,r);if(n.convertToBlob!==void 0){const s=await n.convertToBlob({type:e,quality:r});return new Promise((a,u)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=u,c.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:r,width:n,height:s,flipY:a}=this._rawPixels(t,e);a&&ml._flipY(r,n,s),ml._unpremultiplyAlpha(r);const u=new Fl(n,s,1),c=new ImageData(new Uint8ClampedArray(r.buffer),n,s);return u.context.putImageData(c,0,0),u.canvas}pixels(t,e){const{pixels:r,width:n,height:s,flipY:a}=this._rawPixels(t,e);return a&&ml._flipY(r,n,s),ml._unpremultiplyAlpha(r),r}_rawPixels(t,e){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,s=!1,a,u=!1;if(t&&(t instanceof ki?a=t:(a=r.generateTexture(t,{resolution:r.resolution,multisample:r.multisample}),u=!0)),a){if(n=a.baseTexture.resolution,e=e??a.frame,s=!1,!u){r.renderTexture.bind(a);const _=a.framebuffer.glFramebuffers[r.CONTEXT_UID];_.blitFramebuffer&&r.framebuffer.bind(_.blitFramebuffer)}}else n=r.resolution,e||(e=e2,e.width=r.width/n,e.height=r.height/n),s=!0,r.renderTexture.bind();const c=Math.round(e.width*n),d=Math.round(e.height*n),p=new Uint8Array(t2*c*d),m=r.gl;return m.readPixels(Math.round(e.x*n),Math.round(e.y*n),c,d,m.RGBA,m.UNSIGNED_BYTE,p),u&&(a==null||a.destroy(!0)),{pixels:p,width:c,height:d,flipY:s}}destroy(){this.renderer=null}static _flipY(t,e,r){const n=e<<2,s=r>>1,a=new Uint8Array(n);for(let u=0;u<s;u++){const c=u*n,d=(r-u-1)*n;a.set(t.subarray(c,c+n)),t.copyWithin(c,d,d+n),t.set(a,d)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const n=t[r+3];if(n!==0){const s=255.001/n;t[r]=t[r]*s+.5,t[r+1]=t[r+1]*s+.5,t[r+2]=t[r+2]*s+.5}}}};let Fw=ml;Fw.extension={name:"extract",type:$e.RendererSystem};Ke.add(Fw);const Eh={build(t){const e=t.points;let r,n,s,a,u,c;if(t.type===Wt.CIRC){const E=t.shape;r=E.x,n=E.y,u=c=E.radius,s=a=0}else if(t.type===Wt.ELIP){const E=t.shape;r=E.x,n=E.y,u=E.width,c=E.height,s=a=0}else{const E=t.shape,I=E.width/2,A=E.height/2;r=E.x+I,n=E.y+A,u=c=Math.max(0,Math.min(E.radius,Math.min(I,A))),s=I-u,a=A-c}if(!(u>=0&&c>=0&&s>=0&&a>=0)){e.length=0;return}const d=Math.ceil(2.3*Math.sqrt(u+c)),p=d*8+(s?4:0)+(a?4:0);if(e.length=p,p===0)return;if(d===0){e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=n+a,e[2]=e[4]=r-s,e[5]=e[7]=n-a;return}let m=0,_=d*4+(s?2:0)+2,x=_,S=p;{const E=s+u,I=a,A=r+E,R=r-E,O=n+I;if(e[m++]=A,e[m++]=O,e[--_]=O,e[--_]=R,a){const L=n-I;e[x++]=R,e[x++]=L,e[--S]=L,e[--S]=A}}for(let E=1;E<d;E++){const I=Math.PI/2*(E/d),A=s+Math.cos(I)*u,R=a+Math.sin(I)*c,O=r+A,L=r-A,X=n+R,N=n-R;e[m++]=O,e[m++]=X,e[--_]=X,e[--_]=L,e[x++]=L,e[x++]=N,e[--S]=N,e[--S]=O}{const E=s,I=a+c,A=r+E,R=r-E,O=n+I,L=n-I;e[m++]=A,e[m++]=O,e[--S]=L,e[--S]=A,s&&(e[m++]=R,e[m++]=O,e[--S]=L,e[--S]=R)}},triangulate(t,e){const r=t.points,n=e.points,s=e.indices;if(r.length===0)return;let a=n.length/2;const u=a;let c,d;if(t.type!==Wt.RREC){const m=t.shape;c=m.x,d=m.y}else{const m=t.shape;c=m.x+m.width/2,d=m.y+m.height/2}const p=t.matrix;n.push(t.matrix?p.a*c+p.c*d+p.tx:c,t.matrix?p.b*c+p.d*d+p.ty:d),a++,n.push(r[0],r[1]);for(let m=2;m<r.length;m+=2)n.push(r[m],r[m+1]),s.push(a++,u,a);s.push(u+1,u,a)}};function U_(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let s=0,a=t[r-2],u=t[r-1];s<r;s+=2){const c=t[s],d=t[s+1];n+=(c-a)*(d+u),a=c,u=d}if(!e&&n>0||e&&n<=0){const s=r/2;for(let a=s+s%2;a<r;a+=2){const u=r-a-2,c=r-a-1,d=a,p=a+1;[t[u],t[d]]=[t[d],t[u]],[t[c],t[p]]=[t[p],t[c]]}}}const Dw={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,s=e.points,a=e.indices;if(r.length>=6){U_(r,!1);const u=[];for(let p=0;p<n.length;p++){const m=n[p];U_(m.points,!0),u.push(r.length/2),r=r.concat(m.points)}const c=ub(r,u,2);if(!c)return;const d=s.length/2;for(let p=0;p<c.length;p+=3)a.push(c[p]+d),a.push(c[p+1]+d),a.push(c[p+2]+d);for(let p=0;p<r.length;p++)s.push(r[p])}}},r2={build(t){const e=t.shape,r=e.x,n=e.y,s=e.width,a=e.height,u=t.points;u.length=0,s>=0&&a>=0&&u.push(r,n,r+s,n,r+s,n+a,r,n+a)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const s=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},n2={build(t){Eh.build(t)},triangulate(t,e){Eh.triangulate(t,e)}};var li=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(li||{}),po=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(po||{});const da={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class G_{static curveTo(e,r,n,s,a,u){const c=u[u.length-2],p=u[u.length-1]-r,m=c-e,_=s-r,x=n-e,S=Math.abs(p*x-m*_);if(S<1e-8||a===0)return(u[u.length-2]!==e||u[u.length-1]!==r)&&u.push(e,r),null;const E=p*p+m*m,I=_*_+x*x,A=p*_+m*x,R=a*Math.sqrt(E)/S,O=a*Math.sqrt(I)/S,L=R*A/E,X=O*A/I,N=R*x+O*m,Z=R*_+O*p,G=m*(O+L),ie=p*(O+L),re=x*(R+X),_e=_*(R+X),oe=Math.atan2(ie-Z,G-N),ee=Math.atan2(_e-Z,re-N);return{cx:N+e,cy:Z+r,radius:a,startAngle:oe,endAngle:ee,anticlockwise:m*_>x*p}}static arc(e,r,n,s,a,u,c,d,p){const m=c-u,_=da._segmentsCount(Math.abs(m)*a,Math.ceil(Math.abs(m)/xh)*40),x=m/(_*2),S=x*2,E=Math.cos(x),I=Math.sin(x),A=_-1,R=A%1/A;for(let O=0;O<=A;++O){const L=O+R*O,X=x+u+S*L,N=Math.cos(X),Z=-Math.sin(X);p.push((E*N+I*Z)*a+n,(E*-Z+I*N)*a+s)}}}class i2{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class zg{static curveLength(e,r,n,s,a,u,c,d){let m=0,_=0,x=0,S=0,E=0,I=0,A=0,R=0,O=0,L=0,X=0,N=e,Z=r;for(let G=1;G<=10;++G)_=G/10,x=_*_,S=x*_,E=1-_,I=E*E,A=I*E,R=A*e+3*I*_*n+3*E*x*a+S*c,O=A*r+3*I*_*s+3*E*x*u+S*d,L=N-R,X=Z-O,N=R,Z=O,m+=Math.sqrt(L*L+X*X);return m}static curveTo(e,r,n,s,a,u,c){const d=c[c.length-2],p=c[c.length-1];c.length-=2;const m=da._segmentsCount(zg.curveLength(d,p,e,r,n,s,a,u));let _=0,x=0,S=0,E=0,I=0;c.push(d,p);for(let A=1,R=0;A<=m;++A)R=A/m,_=1-R,x=_*_,S=x*_,E=R*R,I=E*R,c.push(S*d+3*x*R*e+3*_*E*n+I*a,S*p+3*x*R*r+3*_*E*s+I*u)}}function H_(t,e,r,n,s,a,u,c){const d=t-r*s,p=e-n*s,m=t+r*a,_=e+n*a;let x,S;u?(x=n,S=-r):(x=-n,S=r);const E=d+x,I=p+S,A=m+x,R=_+S;return c.push(E,I,A,R),2}function ao(t,e,r,n,s,a,u,c){const d=r-t,p=n-e;let m=Math.atan2(d,p),_=Math.atan2(s-t,a-e);c&&m<_?m+=Math.PI*2:!c&&m>_&&(_+=Math.PI*2);let x=m;const S=_-m,E=Math.abs(S),I=Math.sqrt(d*d+p*p),A=(15*E*Math.sqrt(I)/Math.PI>>0)+1,R=S/A;if(x+=R,c){u.push(t,e,r,n);for(let O=1,L=x;O<A;O++,L+=R)u.push(t,e,t+Math.sin(L)*I,e+Math.cos(L)*I);u.push(t,e,s,a)}else{u.push(r,n,t,e);for(let O=1,L=x;O<A;O++,L+=R)u.push(t+Math.sin(L)*I,e+Math.cos(L)*I,t,e);u.push(s,a,t,e)}return A*2}function s2(t,e){const r=t.shape;let n=t.points||r.points.slice();const s=e.closePointEps;if(n.length===0)return;const a=t.lineStyle,u=new Pt(n[0],n[1]),c=new Pt(n[n.length-2],n[n.length-1]),d=r.type!==Wt.POLY||r.closeStroke,p=Math.abs(u.x-c.x)<s&&Math.abs(u.y-c.y)<s;if(d){n=n.slice(),p&&(n.pop(),n.pop(),c.set(n[n.length-2],n[n.length-1]));const j=(u.x+c.x)*.5,F=(c.y+u.y)*.5;n.unshift(j,F),n.push(j,F)}const m=e.points,_=n.length/2;let x=n.length;const S=m.length/2,E=a.width/2,I=E*E,A=a.miterLimit*a.miterLimit;let R=n[0],O=n[1],L=n[2],X=n[3],N=0,Z=0,G=-(O-X),ie=R-L,re=0,_e=0,oe=Math.sqrt(G*G+ie*ie);G/=oe,ie/=oe,G*=E,ie*=E;const ee=a.alignment,me=(1-ee)*2,ue=ee*2;d||(a.cap===po.ROUND?x+=ao(R-G*(me-ue)*.5,O-ie*(me-ue)*.5,R-G*me,O-ie*me,R+G*ue,O+ie*ue,m,!0)+2:a.cap===po.SQUARE&&(x+=H_(R,O,G,ie,me,ue,!0,m))),m.push(R-G*me,O-ie*me,R+G*ue,O+ie*ue);for(let j=1;j<_-1;++j){R=n[(j-1)*2],O=n[(j-1)*2+1],L=n[j*2],X=n[j*2+1],N=n[(j+1)*2],Z=n[(j+1)*2+1],G=-(O-X),ie=R-L,oe=Math.sqrt(G*G+ie*ie),G/=oe,ie/=oe,G*=E,ie*=E,re=-(X-Z),_e=L-N,oe=Math.sqrt(re*re+_e*_e),re/=oe,_e/=oe,re*=E,_e*=E;const F=L-R,K=O-X,U=L-N,B=Z-X,z=F*U+K*B,te=K*U-B*F,he=te<0;if(Math.abs(te)<.001*Math.abs(z)){m.push(L-G*me,X-ie*me,L+G*ue,X+ie*ue),z>=0&&(a.join===li.ROUND?x+=ao(L,X,L-G*me,X-ie*me,L-re*me,X-_e*me,m,!1)+4:x+=2,m.push(L-re*ue,X-_e*ue,L+re*me,X+_e*me));continue}const xe=(-G+R)*(-ie+X)-(-G+L)*(-ie+O),Ce=(-re+N)*(-_e+X)-(-re+L)*(-_e+Z),Me=(F*Ce-U*xe)/te,ke=(B*xe-K*Ce)/te,Ne=(Me-L)*(Me-L)+(ke-X)*(ke-X),Oe=L+(Me-L)*me,ot=X+(ke-X)*me,ft=L-(Me-L)*ue,St=X-(ke-X)*ue,Dt=Math.min(F*F+K*K,U*U+B*B),je=he?me:ue,tt=Dt+je*je*I,at=Ne<=tt;let tr=a.join;if(tr===li.MITER&&Ne/I>A&&(tr=li.BEVEL),at)switch(tr){case li.MITER:{m.push(Oe,ot,ft,St);break}case li.BEVEL:{he?m.push(Oe,ot,L+G*ue,X+ie*ue,Oe,ot,L+re*ue,X+_e*ue):m.push(L-G*me,X-ie*me,ft,St,L-re*me,X-_e*me,ft,St),x+=2;break}case li.ROUND:{he?(m.push(Oe,ot,L+G*ue,X+ie*ue),x+=ao(L,X,L+G*ue,X+ie*ue,L+re*ue,X+_e*ue,m,!0)+4,m.push(Oe,ot,L+re*ue,X+_e*ue)):(m.push(L-G*me,X-ie*me,ft,St),x+=ao(L,X,L-G*me,X-ie*me,L-re*me,X-_e*me,m,!1)+4,m.push(L-re*me,X-_e*me,ft,St));break}}else{switch(m.push(L-G*me,X-ie*me,L+G*ue,X+ie*ue),tr){case li.MITER:{he?m.push(ft,St,ft,St):m.push(Oe,ot,Oe,ot),x+=2;break}case li.ROUND:{he?x+=ao(L,X,L+G*ue,X+ie*ue,L+re*ue,X+_e*ue,m,!0)+2:x+=ao(L,X,L-G*me,X-ie*me,L-re*me,X-_e*me,m,!1)+2;break}}m.push(L-re*me,X-_e*me,L+re*ue,X+_e*ue),x+=2}}R=n[(_-2)*2],O=n[(_-2)*2+1],L=n[(_-1)*2],X=n[(_-1)*2+1],G=-(O-X),ie=R-L,oe=Math.sqrt(G*G+ie*ie),G/=oe,ie/=oe,G*=E,ie*=E,m.push(L-G*me,X-ie*me,L+G*ue,X+ie*ue),d||(a.cap===po.ROUND?x+=ao(L-G*(me-ue)*.5,X-ie*(me-ue)*.5,L-G*me,X-ie*me,L+G*ue,X+ie*ue,m,!1)+2:a.cap===po.SQUARE&&(x+=H_(L,X,G,ie,me,ue,!1,m)));const Ae=e.indices,H=da.epsilon*da.epsilon;for(let j=S;j<x+S-2;++j)R=m[j*2],O=m[j*2+1],L=m[(j+1)*2],X=m[(j+1)*2+1],N=m[(j+2)*2],Z=m[(j+2)*2+1],!(Math.abs(R*(X-Z)+L*(Z-O)+N*(O-X))<H)&&Ae.push(j,j+1,j+2)}function o2(t,e){let r=0;const n=t.shape,s=t.points||n.points,a=n.type!==Wt.POLY||n.closeStroke;if(s.length===0)return;const u=e.points,c=e.indices,d=s.length/2,p=u.length/2;let m=p;for(u.push(s[0],s[1]),r=1;r<d;r++)u.push(s[r*2],s[r*2+1]),c.push(m,m+1),m++;a&&c.push(m,p)}function j_(t,e){t.lineStyle.native?o2(t,e):s2(t,e)}class $g{static curveLength(e,r,n,s,a,u){const c=e-2*n+a,d=r-2*s+u,p=2*n-2*e,m=2*s-2*r,_=4*(c*c+d*d),x=4*(c*p+d*m),S=p*p+m*m,E=2*Math.sqrt(_+x+S),I=Math.sqrt(_),A=2*_*I,R=2*Math.sqrt(S),O=x/I;return(A*E+I*x*(E-R)+(4*S*_-x*x)*Math.log((2*I+O+E)/(O+R)))/(4*A)}static curveTo(e,r,n,s,a){const u=a[a.length-2],c=a[a.length-1],d=da._segmentsCount($g.curveLength(u,c,e,r,n,s));let p=0,m=0;for(let _=1;_<=d;++_){const x=_/d;p=u+(e-u)*x,m=c+(r-c)*x,a.push(p+(e+(n-e)*x-p)*x,m+(r+(s-r)*x-m)*x)}}}const Ud={[Wt.POLY]:Dw,[Wt.CIRC]:Eh,[Wt.ELIP]:Eh,[Wt.RECT]:r2,[Wt.RREC]:n2},z_=[],uh=[];class Al{constructor(e,r=null,n=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=s,this.type=e.type}clone(){return new Al(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ra=new Pt,Bw=class extends Mb{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new bh,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),uh.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),z_.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const s=new Al(t,e,r,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new Al(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,ra):ra.copyFrom(t),n.shape.contains(ra.x,ra.y))){let s=!1;if(n.holes){for(let a=0;a<n.holes.length;a++)if(n.holes[a].shape.contains(ra.x,ra.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let c=this.shapeIndex;c<e.length;c++){this.shapeIndex++;const d=e[c],p=d.fillStyle,m=d.lineStyle;Ud[d.type].build(d),d.matrix&&this.transformPoints(d.points,d.matrix),(p.visible||m.visible)&&this.processHoles(d.holes);for(let x=0;x<2;x++){const S=x===0?p:m;if(!S.visible)continue;const E=S.texture.baseTexture,I=this.indices.length,A=this.points.length/2;E.wrapMode=Ji.REPEAT,x===0?this.processFill(d):this.processLine(d);const R=this.points.length/2-A;R!==0&&(r&&!this._compareStyles(n,S)&&(r.end(I,A),r=null),r||(r=z_.pop()||new i2,r.begin(S,I,A),this.batches.push(r),n=S),this.addUvs(this.points,t,S.texture,A,R,S.matrix))}}const s=this.indices.length,a=this.points.length/2;if(r&&r.end(s,a),this.batches.length===0){this.batchable=!0;return}const u=a>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&u===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=u?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const r=this.graphicsData[t],n=r.fillStyle,s=r.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const n=t[e];for(let s=0;s<n.size;s++){const a=n.start+s;this.indicesUint16[a]=this.indicesUint16[a]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Bw.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++pt._globalBatch;for(let m=0;m<this.drawCalls.length;m++)this.drawCalls[m].texArray.clear(),uh.push(this.drawCalls[m]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=uh.pop();n||(n=new ug,n.texArray=new dg),n.texArray.count=0,n.start=0,n.size=0,n.type=fi.TRIANGLES;let s=0,a=null,u=0,c=!1,d=fi.TRIANGLES,p=0;this.drawCalls.push(n);for(let m=0;m<this.batches.length;m++){const _=this.batches[m],x=8,S=_.style,E=S.texture.baseTexture;c!==!!S.native&&(c=!!S.native,d=c?fi.LINES:fi.TRIANGLES,a=null,s=x,t++),a!==E&&(a=E,E._batchEnabled!==t&&(s===x&&(t++,s=0,n.size>0&&(n=uh.pop(),n||(n=new ug,n.texArray=new dg),this.drawCalls.push(n)),n.start=p,n.size=0,n.texArray.count=0,n.type=d),E.touched=1,E._batchEnabled=t,E._batchLocation=s,E.wrapMode=Ji.REPEAT,n.texArray.elements[n.texArray.count++]=E,s++)),n.size+=_.size,p+=_.size,u=E._batchLocation,this.addColors(e,S.color,S.alpha,_.attribSize,_.attribStart),this.addTextureIds(r,u,_.attribSize,_.attribStart)}pt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,s=new ArrayBuffer(t.length*3*4),a=new Float32Array(s),u=new Uint32Array(s);let c=0;for(let d=0;d<t.length/2;d++)a[c++]=t[d*2],a[c++]=t[d*2+1],a[c++]=e[d*2],a[c++]=e[d*2+1],u[c++]=r[d],a[c++]=n[d];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Dw.triangulate(t,this):Ud[t.type].triangulate(t,this)}processLine(t){j_(t,this);for(let e=0;e<t.holes.length;e++)j_(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];Ud[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[r*2],s=t[r*2+1];t[r*2]=e.a*n+e.c*s+e.tx,t[r*2+1]=e.b*n+e.d*s+e.ty}}addColors(t,e,r,n,s=0){const a=Tt.shared.setValue(e).toLittleEndianNumber(),u=Tt.shared.setValue(a).toPremultiplied(r);t.length=Math.max(t.length,s+n);for(let c=0;c<n;c++)t[s+c]=u}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let s=0;s<r;s++)t[n+s]=e}addUvs(t,e,r,n,s,a=null){let u=0;const c=e.length,d=r.frame;for(;u<s;){let m=t[(n+u)*2],_=t[(n+u)*2+1];if(a){const x=a.a*m+a.c*_+a.tx;_=a.b*m+a.d*_+a.ty,m=x}u++,e.push(m/d.width,_/d.height)}const p=r.baseTexture;(d.width<p.width||d.height<p.height)&&this.adjustUvs(e,r,c,s)}adjustUvs(t,e,r,n){const s=e.baseTexture,a=1e-6,u=r+n*2,c=e.frame,d=c.width/s.width,p=c.height/s.height;let m=c.x/c.width,_=c.y/c.height,x=Math.floor(t[r]+a),S=Math.floor(t[r+1]+a);for(let E=r+2;E<u;E+=2)x=Math.min(x,Math.floor(t[E]+a)),S=Math.min(S,Math.floor(t[E+1]+a));m-=x,_-=S;for(let E=r;E<u;E+=2)t[E]=(t[E]+m)*d,t[E+1]=(t[E+1]+_)*p}};let Ow=Bw;Ow.BATCHABLE_SIZE=100;let Lw=class Nw{constructor(){this.color=16777215,this.alpha=1,this.texture=qe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Nw;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=qe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}};class Vg extends Lw{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=po.BUTT,this.join=li.MITER,this.miterLimit=10}clone(){const e=new Vg;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Gd={},mh=class extends lr{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Lw,this._lineStyle=new Vg,this._matrix=null,this._holeMode=!1,this.state=ns.for2d(),this._geometry=t||new Ow,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Tt(16777215),this.blendMode=Fe.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new mh(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r,n=.5,s=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:r,alignment:n,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:qe.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:po.BUTT,join:li.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new bl,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new bl,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],s=r[r.length-1];return(n!==t||s!==e)&&r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),$g.curveTo(t,e,r,n,s),this}bezierCurveTo(t,e,r,n,s,a){return this._initCurve(),zg.curveTo(t,e,r,n,s,a,this.currentPath.points),this}arcTo(t,e,r,n,s){this._initCurve(t,e);const a=this.currentPath.points,u=G_.curveTo(t,e,r,n,s,a);if(u){const{cx:c,cy:d,radius:p,startAngle:m,endAngle:_,anticlockwise:x}=u;this.arc(c,d,p,m,_,x)}return this}arc(t,e,r,n,s,a=!1){if(n===s)return this;if(!a&&s<=n?s+=xh:a&&n<=s&&(n+=xh),s-n===0)return this;const c=t+Math.cos(n)*r,d=e+Math.sin(n)*r,p=this._geometry.closePointEps;let m=this.currentPath?this.currentPath.points:null;if(m){const _=Math.abs(m[m.length-2]-c),x=Math.abs(m[m.length-1]-d);_<p&&x<p||m.push(c,d)}else this.moveTo(c,d),m=this.currentPath.points;return G_.arc(c,d,t,e,r,n,s,a,m),this}beginFill(t=0,e){return this.beginTextureFill({texture:qe.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Tt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:qe.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new Rt(t,e,r,n))}drawRoundedRect(t,e,r,n,s){return this.drawShape(new Lb(t,e,r,n,s))}drawCircle(t,e,r){return this.drawShape(new kb(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new Db(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const s=new bl(e);return s.closeStroke=r,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Wt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const s=t.batches[n],a=s.style.color,u=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),c=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),d=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),p={vertexData:u,blendMode:e,indices:d,uvs:c,_batchRGB:Tt.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=p}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.worldAlpha,s=e.uniforms,a=r.drawCalls;s.translationMatrix=this.transform.worldTransform,Tt.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let u=0,c=a.length;u<c;u++)this._renderDrawCallDirect(t,r.drawCalls[u])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:s,start:a}=e,u=r.count;for(let c=0;c<u;c++)t.texture.bind(r.elements[c],c);t.geometry.draw(n,s,a)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!Gd[r]){const{maxTextures:n}=t.plugins[r],s=new Int32Array(n);for(let c=0;c<n;c++)s[c]=c;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:gi.from({uSamplers:s},!0)},u=t.plugins[r]._shader.program;Gd[r]=new Ii(u,a)}e=Gd[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,s)}containsPoint(t){return this.worldTransform.applyInverse(t,mh._TEMP_POINT),this._geometry.containsPoint(mh._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Tt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,s=e.c,a=e.d,u=e.tx,c=e.ty,d=this._geometry.points,p=this.vertexData;let m=0;for(let _=0;_<d.length;_+=2){const x=d[_],S=d[_+1];p[m++]=r*x+s*S+u,p[m++]=a*S+n*x+c}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let yn=mh;yn.curves=da;yn._TEMP_POINT=new Pt;class a2{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Hd=new Pt,$_=new bl,Uw=class extends lr{constructor(t,e,r,n=fi.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||ns.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=We.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===fi.TRIANGLES&&e.length<Uw.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const s=this.transform.worldTransform,a=s.a,u=s.b,c=s.c,d=s.d,p=s.tx,m=s.ty,_=this.vertexData;for(let x=0;x<_.length/2;x++){const S=r[x*2],E=r[x*2+1];_[x*2]=a*S+c*E+p,_[x*2+1]=u*S+d*E+m}if(this._roundPixels){const x=We.RESOLUTION;for(let S=0;S<_.length;++S)_[S]=Math.round(_[S]*x)/x}this.vertexDirty=n}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new a2(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Hd);const e=this.geometry.getBuffer("aVertexPosition").data,r=$_.points,n=this.geometry.getIndex().data,s=n.length,a=this.drawMode===4?3:1;for(let u=0;u+2<s;u+=a){const c=n[u]*2,d=n[u+1]*2,p=n[u+2]*2;if(r[0]=e[c],r[1]=e[c+1],r[2]=e[d],r[3]=e[d+1],r[4]=e[p],r[5]=e[p+1],$_.contains(Hd.x,Hd.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Zr=Uw;Zr.BATCHABLE_SIZE=100;class Uh extends Bl{constructor(e,r,n){super();const s=new Er(e),a=new Er(r,!0),u=new Er(n,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,ht.FLOAT).addAttribute("aTextureCoord",a,2,!1,ht.FLOAT).addIndex(u),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var l2=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,u2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class pa extends Ii{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:Nt.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||pi.from(u2,l2),n),this._colorDirty=!1,this.uvMatrix=new Ug(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new Tt(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const r=this.texture.baseTexture.alphaMode;Tt.shared.setValue(this._tintColor).premultiply(this._alpha,r).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class h2 extends Uh{constructor(e=100,r=100,n=10,s=10){super(),this.segWidth=n,this.segHeight=s,this.width=e,this.height=r,this.build()}build(){const e=this.segWidth*this.segHeight,r=[],n=[],s=[],a=this.segWidth-1,u=this.segHeight-1,c=this.width/a,d=this.height/u;for(let m=0;m<e;m++){const _=m%this.segWidth,x=m/this.segWidth|0;r.push(_*c,x*d),n.push(_/a,x/u)}const p=a*u;for(let m=0;m<p;m++){const _=m%a,x=m/a|0,S=x*this.segWidth+_,E=x*this.segWidth+_+1,I=(x+1)*this.segWidth+_,A=(x+1)*this.segWidth+_+1;s.push(S,E,I,E,A,I)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class c2 extends Uh{constructor(e=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const a=n.data,u=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let c=0,d=e[0];const p=this._width*this.textureScale,m=e.length;for(let x=0;x<m;x++){const S=x*4;if(this.textureScale>0){const E=d.x-e[x].x,I=d.y-e[x].y,A=Math.sqrt(E*E+I*I);d=e[x],c+=A/p}else c=x/(m-1);a[S]=c,a[S+1]=0,a[S+2]=c,a[S+3]=1}let _=0;for(let x=0;x<m-1;x++){const S=x*2;u[_++]=S,u[_++]=S+1,u[_++]=S+2,u[_++]=S+2,u[_++]=S+1,u[_++]=S+3}n.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],n,s=0,a=0;const u=this.buffers[0].data,c=e.length,d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let p=0;p<c;p++){const m=e[p],_=p*4;p<e.length-1?n=e[p+1]:n=m,a=-(n.x-r.x),s=n.y-r.y;const x=Math.sqrt(s*s+a*a);x<1e-6?(s=0,a=0):(s/=x,a/=x,s*=d,a*=d),u[_]=m.x+s,u[_+1]=m.y+a,u[_+2]=m.x-s,u[_+3]=m.y-a,r=m}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class f2 extends Zr{constructor(e,r,n){const s=new h2(e.width,e.height,r,n),a=new pa(qe.WHITE);super(s,a),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const hh=10;class Gh extends f2{constructor(e,r,n,s,a){var u,c,d,p;super(qe.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??((u=e.defaultBorders)==null?void 0:u.left)??hh,this._rightWidth=s??((c=e.defaultBorders)==null?void 0:c.right)??hh,this._topHeight=n??((d=e.defaultBorders)==null?void 0:d.top)??hh,this._bottomHeight=a??((p=e.defaultBorders)==null?void 0:p.bottom)??hh,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n;return Math.min(r,s)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,s=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=s*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class d2 extends Zr{constructor(e=qe.EMPTY,r,n,s,a){const u=new Uh(r,n,s);u.getBuffer("aVertexPosition").static=!1;const c=new pa(e);super(u,c,null,a),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class p2 extends Zr{constructor(e,r,n=0){const s=new c2(e.height,r,n),a=new pa(e);n>0&&(e.baseTexture.wrapMode=Ji.REPEAT),super(s,a),this.autoUpdate=!0}_render(e){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(e)}}class m2{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function g2(t,e){var n;let r=!1;if((n=t==null?void 0:t._textures)!=null&&n.length){for(let s=0;s<t._textures.length;s++)if(t._textures[s]instanceof qe){const a=t._textures[s].baseTexture;e.includes(a)||(e.push(a),r=!0)}}return r}function y2(t,e){if(t.baseTexture instanceof pt){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function v2(t,e){if(t._texture&&t._texture instanceof qe){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function _2(t,e){return e instanceof Oh?(e.updateText(!0),!0):!1}function x2(t,e){if(e instanceof rs){const r=e.toFontString();return Nr.measureFont(r),!0}return!1}function b2(t,e){if(t instanceof Oh){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function w2(t,e){return t instanceof rs?(e.includes(t)||e.push(t),!0):!1}const Gw=class{constructor(t){this.limiter=new m2(Gw.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(b2),this.registerFindHook(w2),this.registerFindHook(g2),this.registerFindHook(y2),this.registerFindHook(v2),this.registerUploadHook(_2),this.registerUploadHook(x2)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Kr.system.addOnce(this.tick,this,yo.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Kr.system.addOnce(this.tick,this,yo.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof lr)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Kr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Pl=Gw;Pl.uploadsPerFrame=4;Object.defineProperties(We,{UPLOADS_PER_FRAME:{get(){return Pl.uploadsPerFrame},set(t){yt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Pl.uploadsPerFrame=t}}});function Hw(t,e){return e instanceof pt?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function T2(t,e){if(!(e instanceof yn))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let s=0;s<n.length;s++){const{texture:a}=n[s].style;a&&Hw(t,a.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function S2(t,e){return t instanceof yn?(e.push(t),!0):!1}class jw extends Pl{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(S2),this.registerUploadHook(Hw),this.registerUploadHook(T2)}}jw.extension={name:"prepare",type:$e.RendererSystem};Ke.add(jw);const gl=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof qe?t:null,this.baseTexture=t instanceof pt?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=ts(t,null);return r===null&&(r=parseFloat(e??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=gl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=gl.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const n=this._frameKeys[e],s=this._frames[n],a=s.frame;if(a){let u=null,c=null;const d=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,p=new Rt(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);s.rotated?u=new Rt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):u=new Rt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(c=new Rt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new qe(this.baseTexture,u,p,c,s.rotated?2:0,s.anchor,s.borders),qe.addToCache(this.textures[n],n)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*gl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*gl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Ag=gl;Ag.BATCH_SIZE=1e3;const E2=["jpg","png","jpeg","avif","webp"];function zw(t,e,r){const n={};if(t.forEach(s=>{n[s]=e}),Object.keys(e.textures).forEach(s=>{n[s]=e.textures[s]}),!r){const s=Gr.dirname(t[0]);e.linkedSheets.forEach((a,u)=>{const c=zw([`${s}/${e.data.meta.related_multi_packs[u]}`],a,!0);Object.assign(n,c)})}return n}const C2={extension:$e.Asset,cache:{test:t=>t instanceof Ag,getCacheableAssets:(t,e)=>zw(t,e,!1)},resolver:{test:t=>{const r=t.split("?")[0].split("."),n=r.pop(),s=r.pop();return n==="json"&&E2.includes(s)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=We.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:$e.LoadParser,priority:Di.Normal},async testParse(t,e){return Gr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var p,m;let n=Gr.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let s=n+t.meta.image;s=Eg(s,e.src);const u=(await r.load([s]))[s],c=new Ag(u.baseTexture,t,e.src);await c.parse();const d=(p=t==null?void 0:t.meta)==null?void 0:p.related_multi_packs;if(Array.isArray(d)){const _=[];for(const S of d){if(typeof S!="string")continue;let E=n+S;(m=e.data)!=null&&m.ignoreMultiPack||(E=Eg(E,e.src),_.push(r.load({src:E,data:{ignoreMultiPack:!0}})))}const x=await Promise.all(_);c.linkedSheets=x,x.forEach(S=>{S.linkedSheets=[c].concat(c.linkedSheets.filter(E=>E!==S))})}return c},unload(t){t.destroy(!0)}}};Ke.add(C2);class Ch{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class gh{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const a in r){const u=r[a].match(/^[a-z]+/gm)[0],c=r[a].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),d={};for(const p in c){const m=c[p].split("="),_=m[0],x=m[1].replace(/"/gm,""),S=parseFloat(x),E=isNaN(S)?x:S;d[_]=E}n[u].push(d)}const s=new Ch;return n.info.forEach(a=>s.info.push({face:a.face,size:parseInt(a.size,10)})),n.common.forEach(a=>s.common.push({lineHeight:parseInt(a.lineHeight,10)})),n.page.forEach(a=>s.page.push({id:parseInt(a.id,10),file:a.file})),n.char.forEach(a=>s.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})),n.kerning.forEach(a=>s.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})),n.distanceField.forEach(a=>s.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})),s}}class Pg{static test(e){const r=e;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new Ch,n=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),u=e.getElementsByTagName("char"),c=e.getElementsByTagName("kerning"),d=e.getElementsByTagName("distanceField");for(let p=0;p<n.length;p++)r.info.push({face:n[p].getAttribute("face"),size:parseInt(n[p].getAttribute("size"),10)});for(let p=0;p<s.length;p++)r.common.push({lineHeight:parseInt(s[p].getAttribute("lineHeight"),10)});for(let p=0;p<a.length;p++)r.page.push({id:parseInt(a[p].getAttribute("id"),10)||0,file:a[p].getAttribute("file")});for(let p=0;p<u.length;p++){const m=u[p];r.char.push({id:parseInt(m.getAttribute("id"),10),page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xoffset:parseInt(m.getAttribute("xoffset"),10),yoffset:parseInt(m.getAttribute("yoffset"),10),xadvance:parseInt(m.getAttribute("xadvance"),10)})}for(let p=0;p<c.length;p++)r.kerning.push({first:parseInt(c[p].getAttribute("first"),10),second:parseInt(c[p].getAttribute("second"),10),amount:parseInt(c[p].getAttribute("amount"),10)});for(let p=0;p<d.length;p++)r.distanceField.push({fieldType:d[p].getAttribute("fieldType"),distanceRange:parseInt(d[p].getAttribute("distanceRange"),10)});return r}}class Rg{static test(e){return typeof e=="string"&&e.includes("<font>")?Pg.test(We.ADAPTER.parseXML(e)):!1}static parse(e){return Pg.parse(We.ADAPTER.parseXML(e))}}const jd=[gh,Pg,Rg];function A2(t){for(let e=0;e<jd.length;e++)if(jd[e].test(t))return jd[e];return null}function P2(t,e,r,n,s,a){const u=r.fill;if(Array.isArray(u)){if(u.length===1)return u[0]}else return u;let c;const d=r.dropShadow?r.dropShadowDistance:0,p=r.padding||0,m=t.width/n-d-p*2,_=t.height/n-d-p*2,x=u.slice(),S=r.fillGradientStops.slice();if(!S.length){const E=x.length+1;for(let I=1;I<E;++I)S.push(I/E)}if(x.unshift(u[0]),S.unshift(0),x.push(u[u.length-1]),S.push(1),r.fillGradientType===Bh.LINEAR_VERTICAL){c=e.createLinearGradient(m/2,p,m/2,_+p);let E=0;const A=(a.fontProperties.fontSize+r.strokeThickness)/_;for(let R=0;R<s.length;R++){const O=a.lineHeight*R;for(let L=0;L<x.length;L++){let X=0;typeof S[L]=="number"?X=S[L]:X=L/x.length;const N=O/_+X*A;let Z=Math.max(E,N);Z=Math.min(Z,1),c.addColorStop(Z,x[L]),E=Z}}}else{c=e.createLinearGradient(p,_/2,m+p,_/2);const E=x.length+1;let I=1;for(let A=0;A<x.length;A++){let R;typeof S[A]=="number"?R=S[A]:R=I/E,c.addColorStop(R,x[A]),I++}}return c}function R2(t,e,r,n,s,a,u){const c=r.text,d=r.fontProperties;e.translate(n,s),e.scale(a,a);const p=u.strokeThickness/2,m=-(u.strokeThickness/2);if(e.font=u.toFontString(),e.lineWidth=u.strokeThickness,e.textBaseline=u.textBaseline,e.lineJoin=u.lineJoin,e.miterLimit=u.miterLimit,e.fillStyle=P2(t,e,u,a,[c],r),e.strokeStyle=u.stroke,u.dropShadow){const _=u.dropShadowColor,x=u.dropShadowBlur*a,S=u.dropShadowDistance*a;e.shadowColor=Tt.shared.setValue(_).setAlpha(u.dropShadowAlpha).toRgbaString(),e.shadowBlur=x,e.shadowOffsetX=Math.cos(u.dropShadowAngle)*S,e.shadowOffsetY=Math.sin(u.dropShadowAngle)*S}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;u.stroke&&u.strokeThickness&&e.strokeText(c,p,m+r.lineHeight-d.descent),u.fill&&e.fillText(c,p,m+r.lineHeight-d.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function yh(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function $w(t){return Array.from?Array.from(t):t.split("")}function I2(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const s=t[r];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const a=s[0].charCodeAt(0),u=s[1].charCodeAt(0);if(u<a)throw new Error("[BitmapFont]: Invalid character range.");for(let c=a,d=u;c<=d;c++)e.push(String.fromCharCode(c))}else e.push(...$w(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const ai=class{constructor(t,e,r){var p;const[n]=t.info,[s]=t.common,[a]=t.page,[u]=t.distanceField,c=ts(a.file),d={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/c,this.chars={},this.pageTextures=d;for(let m=0;m<t.page.length;m++){const{id:_,file:x}=t.page[m];d[_]=e instanceof Array?e[m]:e[x],u!=null&&u.fieldType&&u.fieldType!=="none"&&(d[_].baseTexture.alphaMode=yi.NO_PREMULTIPLIED_ALPHA,d[_].baseTexture.mipmap=Mi.OFF)}for(let m=0;m<t.char.length;m++){const{id:_,page:x}=t.char[m];let{x:S,y:E,width:I,height:A,xoffset:R,yoffset:O,xadvance:L}=t.char[m];S/=c,E/=c,I/=c,A/=c,R/=c,O/=c,L/=c;const X=new Rt(S+d[x].frame.x/c,E+d[x].frame.y/c,I,A);this.chars[_]={xOffset:R,yOffset:O,xAdvance:L,kerning:{},texture:new qe(d[x].baseTexture,X),page:x}}for(let m=0;m<t.kerning.length;m++){let{first:_,second:x,amount:S}=t.kerning[m];_/=c,x/=c,S/=c,this.chars[x]&&(this.chars[x].kerning[_]=S)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=((p=u==null?void 0:u.fieldType)==null?void 0:p.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let n;if(t instanceof Ch)n=t;else{const a=A2(t);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(t)}e instanceof qe&&(e=[e]);const s=new ai(n,e,r);return ai.available[s.font]=s,s}static uninstall(t){const e=ai.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete ai.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:a,textureWidth:u,textureHeight:c,...d}=Object.assign({},ai.defaultOptions,r),p=I2(n),m=e instanceof rs?e:new rs(e),_=u,x=new Ch;x.info[0]={face:m.fontFamily,size:m.fontSize},x.common[0]={lineHeight:m.fontSize};let S=0,E=0,I,A,R,O=0;const L=[];for(let N=0;N<p.length;N++){I||(I=We.ADAPTER.createCanvas(),I.width=u,I.height=c,A=I.getContext("2d"),R=new pt(I,{resolution:a,...d}),L.push(new qe(R)),x.page.push({id:L.length-1,file:""}));const Z=p[N],G=Nr.measureText(Z,m,!1,I),ie=G.width,re=Math.ceil(G.height),_e=Math.ceil((m.fontStyle==="italic"?2:1)*ie);if(E>=c-re*a){if(E===0)throw new Error(`[BitmapFont] textureHeight ${c}px is too small (fontFamily: '${m.fontFamily}', fontSize: ${m.fontSize}px, char: '${Z}')`);--N,I=null,A=null,R=null,E=0,S=0,O=0;continue}if(O=Math.max(re+G.fontProperties.descent,O),_e*a+S>=_){if(S===0)throw new Error(`[BitmapFont] textureWidth ${u}px is too small (fontFamily: '${m.fontFamily}', fontSize: ${m.fontSize}px, char: '${Z}')`);--N,E+=O*a,E=Math.ceil(E),S=0,O=0;continue}R2(I,A,G,S,E,a,m);const oe=yh(G.text);x.char.push({id:oe,page:L.length-1,x:S/a,y:E/a,width:_e,height:re,xoffset:0,yoffset:0,xadvance:ie-(m.dropShadow?m.dropShadowDistance:0)-(m.stroke?m.strokeThickness:0)}),S+=(_e+2*s)*a,S=Math.ceil(S)}for(let N=0,Z=p.length;N<Z;N++){const G=p[N];for(let ie=0;ie<Z;ie++){const re=p[ie],_e=A.measureText(G).width,oe=A.measureText(re).width,me=A.measureText(G+re).width-(_e+oe);me&&x.kerning.push({first:yh(G),second:yh(re),amount:me})}}const X=new ai(x,L,!0);return ai.available[t]!==void 0&&ai.uninstall(t),ai.available[t]=X,X}};let gn=ai;gn.ALPHA=[["a","z"],["A","Z"]," "];gn.NUMERIC=[["0","9"]];gn.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];gn.ASCII=[[" ","~"]];gn.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ai.ALPHANUMERIC};gn.available={};var M2=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,k2=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const V_=[],W_=[],X_=[],Vw=class extends lr{constructor(t,e={}){super();const{align:r,tint:n,maxWidth:s,letterSpacing:a,fontName:u,fontSize:c}=Object.assign({},Vw.styleDefaults,e);if(!gn.available[u])throw new Error(`Missing BitmapFont "${u}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Tt(n),this._font=void 0,this._fontName=u,this._fontSize=c,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=a,this._anchor=new Ms(()=>{this.dirty=!0},this,0,0),this._roundPixels=We.ROUND_PIXELS,this.dirty=!0,this._resolution=We.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var _e;const t=gn.available[this._fontName],e=this.fontSize,r=e/t.size,n=new Pt,s=[],a=[],u=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",d=$w(c),p=this._maxWidth*t.size/e,m=t.distanceFieldType==="none"?V_:W_;let _=null,x=0,S=0,E=0,I=-1,A=0,R=0,O=0,L=0;for(let oe=0;oe<d.length;oe++){const ee=d[oe],me=yh(ee);if(/(?:\s)/.test(ee)&&(I=oe,A=x,L++),ee==="\r"||ee===`
`){a.push(x),u.push(-1),S=Math.max(S,x),++E,++R,n.x=0,n.y+=t.lineHeight,_=null,L=0;continue}const ue=t.chars[me];if(!ue)continue;_&&ue.kerning[_]&&(n.x+=ue.kerning[_]);const Ae=X_.pop()||{texture:qe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Pt};Ae.texture=ue.texture,Ae.line=E,Ae.charCode=me,Ae.position.x=Math.round(n.x+ue.xOffset+this._letterSpacing/2),Ae.position.y=Math.round(n.y+ue.yOffset),Ae.prevSpaces=L,s.push(Ae),x=Ae.position.x+Math.max(ue.xAdvance-ue.xOffset,ue.texture.orig.width),n.x+=ue.xAdvance+this._letterSpacing,O=Math.max(O,ue.yOffset+ue.texture.height),_=me,I!==-1&&p>0&&n.x>p&&(++R,mo(s,1+I-R,1+oe-I),oe=I,I=-1,a.push(A),u.push(s.length>0?s[s.length-1].prevSpaces:0),S=Math.max(S,A),E++,n.x=0,n.y+=t.lineHeight,_=null,L=0)}const X=d[d.length-1];X!=="\r"&&X!==`
`&&(/(?:\s)/.test(X)&&(x=A),a.push(x),S=Math.max(S,x),u.push(-1));const N=[];for(let oe=0;oe<=E;oe++){let ee=0;this._align==="right"?ee=S-a[oe]:this._align==="center"?ee=(S-a[oe])/2:this._align==="justify"&&(ee=u[oe]<0?0:(S-a[oe])/u[oe]),N.push(ee)}const Z=s.length,G={},ie=[],re=this._activePagesMeshData;m.push(...re);for(let oe=0;oe<Z;oe++){const ee=s[oe].texture,me=ee.baseTexture.uid;if(!G[me]){let ue=m.pop();if(!ue){const H=new Uh;let j,F;t.distanceFieldType==="none"?(j=new pa(qe.EMPTY),F=Fe.NORMAL):(j=new pa(qe.EMPTY,{program:pi.from(k2,M2),uniforms:{uFWidth:0}}),F=Fe.NORMAL_NPM);const K=new Zr(H,j);K.blendMode=F,ue={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:K,vertices:null,uvs:null,indices:null}}ue.index=0,ue.indexCount=0,ue.vertexCount=0,ue.uvsCount=0,ue.total=0;const{_textureCache:Ae}=this;Ae[me]=Ae[me]||new qe(ee.baseTexture),ue.mesh.texture=Ae[me],ue.mesh.tint=this._tintColor.value,ie.push(ue),G[me]=ue}G[me].total++}for(let oe=0;oe<re.length;oe++)ie.includes(re[oe])||this.removeChild(re[oe].mesh);for(let oe=0;oe<ie.length;oe++)ie[oe].mesh.parent!==this&&this.addChild(ie[oe].mesh);this._activePagesMeshData=ie;for(const oe in G){const ee=G[oe],me=ee.total;if(!(((_e=ee.indices)==null?void 0:_e.length)>6*me)||ee.vertices.length<Zr.BATCHABLE_SIZE*2)ee.vertices=new Float32Array(4*2*me),ee.uvs=new Float32Array(4*2*me),ee.indices=new Uint16Array(6*me);else{const ue=ee.total,Ae=ee.vertices;for(let H=ue*4*2;H<Ae.length;H++)Ae[H]=0}ee.mesh.size=6*me}for(let oe=0;oe<Z;oe++){const ee=s[oe];let me=ee.position.x+N[ee.line]*(this._align==="justify"?ee.prevSpaces:1);this._roundPixels&&(me=Math.round(me));const ue=me*r,Ae=ee.position.y*r,H=ee.texture,j=G[H.baseTexture.uid],F=H.frame,K=H._uvs,U=j.index++;j.indices[U*6+0]=0+U*4,j.indices[U*6+1]=1+U*4,j.indices[U*6+2]=2+U*4,j.indices[U*6+3]=0+U*4,j.indices[U*6+4]=2+U*4,j.indices[U*6+5]=3+U*4,j.vertices[U*8+0]=ue,j.vertices[U*8+1]=Ae,j.vertices[U*8+2]=ue+F.width*r,j.vertices[U*8+3]=Ae,j.vertices[U*8+4]=ue+F.width*r,j.vertices[U*8+5]=Ae+F.height*r,j.vertices[U*8+6]=ue,j.vertices[U*8+7]=Ae+F.height*r,j.uvs[U*8+0]=K.x0,j.uvs[U*8+1]=K.y0,j.uvs[U*8+2]=K.x1,j.uvs[U*8+3]=K.y1,j.uvs[U*8+4]=K.x2,j.uvs[U*8+5]=K.y2,j.uvs[U*8+6]=K.x3,j.uvs[U*8+7]=K.y3}this._textWidth=S*r,this._textHeight=(n.y+t.lineHeight)*r;for(const oe in G){const ee=G[oe];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const j=this._textWidth*this.anchor.x,F=this._textHeight*this.anchor.y;for(let K=0;K<ee.total;K++)ee.vertices[H++]-=j,ee.vertices[H++]-=F,ee.vertices[H++]-=j,ee.vertices[H++]-=F,ee.vertices[H++]-=j,ee.vertices[H++]-=F,ee.vertices[H++]-=j,ee.vertices[H++]-=F}this._maxLineHeight=O*r;const me=ee.mesh.geometry.getBuffer("aVertexPosition"),ue=ee.mesh.geometry.getBuffer("aTextureCoord"),Ae=ee.mesh.geometry.getIndex();me.data=ee.vertices,ue.data=ee.uvs,Ae.data=ee.indices,me.update(),ue.update(),Ae.update()}for(let oe=0;oe<s.length;oe++)X_.push(s[oe]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:n}=gn.available[this._fontName];if(r!=="none"){const{a:s,b:a,c:u,d:c}=this.worldTransform,d=Math.sqrt(s*s+a*a),p=Math.sqrt(u*u+c*c),m=(Math.abs(d)+Math.abs(p))/2,_=this.fontSize/n,x=t._view.resolution;for(const S of this._activePagesMeshData)S.mesh.shader.uniforms.uFWidth=m*e*_*x}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=gn.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!gn.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??gn.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,n=gn.available[this._fontName].distanceFieldType==="none"?V_:W_;n.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],n.filter(s=>e[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=qe.EMPTY});for(const s in e)e[s].destroy(),delete e[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};let F2=Vw;F2.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const D2=[".xml",".fnt"],B2={extension:{type:$e.LoadParser,priority:Di.Normal},name:"loadBitmapFont",test(t){return D2.includes(Gr.extname(t).toLowerCase())},async testParse(t){return gh.test(t)||Rg.test(t)},async parse(t,e,r){const n=gh.test(t)?gh.parse(t):Rg.parse(t),{src:s}=e,{page:a}=n,u=[];for(let p=0;p<a.length;++p){const m=a[p].file;let _=Gr.join(Gr.dirname(s),m);_=Eg(_,s),u.push(_)}const c=await r.load(u),d=u.map(p=>c[p]);return gn.install(n,d,!0)},async load(t,e){return(await We.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};Ke.add(B2);const oa=class extends rs{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new oa(Object.keys(oa.defaultOptions).reduce((e,r)=>({...e,[r]:t[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete oa.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:r}=oa;if(r[t]){const n=r[t];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return We.ADAPTER.fetch(t).then(n=>n.blob()).then(async n=>new Promise((s,a)=>{const u=URL.createObjectURL(n),c=new FileReader;c.onload=()=>s([u,c.result]),c.onerror=a,c.readAsDataURL(n)})).then(async([n,s])=>{const a=Object.assign({family:Gr.basename(t,Gr.extname(t)),weight:"normal",style:"normal",src:n,dataSrc:s,refs:1,originalUrl:t,fontFace:null},e);r[t]=a,this._fonts.push(a),this.styleID++;const u=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style});a.fontFace=u,await u.load(),document.fonts.add(u),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(r=>!this._overrides.includes(r));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(r=>this._overrides.includes(r));e.length>0&&(this._overrides=this._overrides.filter(r=>!e.includes(r)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=wb(t)),typeof t=="number"?bb(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${s} ${t}`}reset(){Object.assign(this,oa.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=We.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let wl=oa;wl.availableFonts={};wl.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const aa=class extends Fi{constructor(t="",e={}){super(qe.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const r=new Image,n=qe.from(r,{scaleMode:We.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new Rt,n.trim=new Rt,this.texture=n;const s="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xhtml",u=document.createElementNS(s,"svg"),c=document.createElementNS(s,"foreignObject"),d=document.createElementNS(a,"div"),p=document.createElementNS(a,"style");c.setAttribute("width","10000"),c.setAttribute("height","10000"),c.style.overflow="hidden",u.appendChild(c),this.maxWidth=aa.defaultMaxWidth,this.maxHeight=aa.defaultMaxHeight,this._domElement=d,this._styleElement=p,this._svgRoot=u,this._foreignObject=c,this._foreignObject.appendChild(p),this._foreignObject.appendChild(d),this._image=r,this._loadImage=new Image,this._autoResolution=aa.defaultAutoResolution,this._resolution=aa.defaultResolution??We.RESOLUTION,this.text=t,this.style=e}measureText(t){var c,d;const{text:e,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const a=Math.min(this.maxWidth,Math.ceil(s.width)),u=Math.min(this.maxHeight,Math.ceil(s.height));return this._svgRoot.setAttribute("width",a.toString()),this._svgRoot.setAttribute("height",u.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(n)}),this._styleElement.textContent=(d=this._style)==null?void 0:d.toGlobalCSS()),{width:a+r.padding*2,height:u+r.padding*2}}async updateText(t=!0){const{style:e,_image:r,_loadImage:n}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:s,height:a}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,s)),r.height=n.height=Math.ceil(Math.max(1,a)),this._loading||(this._loading=!0,await new Promise(u=>{n.onload=async()=>{await e.onBeforeDraw(),this._loading=!1,r.src=n.src,n.onload=null,n.src="",this.updateTexture(),u()};const c=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`}))}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:r,resolution:n}=this,{padding:s}=t,{baseTexture:a}=e;e.trim.width=e._frame.width=r.width/n,e.trim.height=e._frame.height=r.height/n,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(r.width,r.height,n),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var r,n,s,a,u;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},aa.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=e,(n=this._svgRoot)==null||n.remove(),this._svgRoot=e,(s=this._domElement)==null||s.remove(),this._domElement=e,(a=this._foreignObject)==null||a.remove(),this._foreignObject=e,(u=this._styleElement)==null||u.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Qi(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Qi(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof wl?(this.ownsStyle=!1,this._style=t):t instanceof rs?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=wl.from(t)):(this.ownsStyle=!0,this._style=new wl(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Hh=aa;Hh.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Hh.defaultMaxWidth=2024;Hh.defaultMaxHeight=2024;Hh.defaultAutoResolution=!0;const q_=new Rt;class Ww{constructor(e){this.renderer=e}async image(e,r,n){const s=new Image;return s.src=await this.base64(e,r,n),s}async base64(e,r,n){const s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((a,u)=>{s.toBlob(c=>{if(!c){u(new Error("ICanvas.toBlob failed!"));return}const d=new FileReader;d.onload=()=>a(d.result),d.onerror=u,d.readAsDataURL(c)},r,n)});if(s.toDataURL!==void 0)return s.toDataURL(r,n);if(s.convertToBlob!==void 0){const a=await s.convertToBlob({type:r,quality:n});return new Promise((u,c)=>{const d=new FileReader;d.onload=()=>u(d.result),d.onerror=c,d.readAsDataURL(a)})}throw new Error("CanvasExtract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const n=this.renderer;if(!n)throw new Error("The CanvasExtract has already been destroyed");let s,a,u;e&&(e instanceof ki?u=e:u=n.generateTexture(e,{resolution:n.resolution})),u?(s=u.baseTexture._canvasRenderTarget.context,a=u.baseTexture._canvasRenderTarget.resolution,r=r??u.frame):(s=n.canvasContext.rootContext,a=n._view.resolution,r||(r=q_,r.width=n.width/a,r.height=n.height/a));const c=Math.round(r.x*a),d=Math.round(r.y*a),p=Math.round(r.width*a),m=Math.round(r.height*a),_=new Fl(p,m,1),x=s.getImageData(c,d,p,m);return _.context.putImageData(x,0,0),_.canvas}pixels(e,r){const n=this.renderer;if(!n)throw new Error("The CanvasExtract has already been destroyed");let s,a,u;e&&(e instanceof ki?u=e:u=n.generateTexture(e,{resolution:n.resolution})),u?(s=u.baseTexture._canvasRenderTarget.context,a=u.baseTexture._canvasRenderTarget.resolution,r=r??u.frame):(s=n.canvasContext.rootContext,a=n.resolution,r||(r=q_,r.width=n.width/a,r.height=n.height/a));const c=Math.round(r.x*a),d=Math.round(r.y*a),p=Math.round(r.width*a),m=Math.round(r.height*a);return s.getImageData(c,d,p,m).data}destroy(){this.renderer=null}}Ww.extension={name:"extract",type:$e.CanvasRendererSystem};Ke.add(Ww);let zd;const hl=new Nt;yn.prototype.generateCanvasTexture=function(e,r=1){const n=this.getLocalBounds(),s=ki.create({width:n.width,height:n.height,scaleMode:e,resolution:r});zd||(zd=new xo),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(hl),hl.invert(),hl.tx-=n.x,hl.ty-=n.y,zd.render(this,{renderTexture:s,clear:!0,transform:hl});const a=qe.from(s.baseTexture._canvasRenderTarget.canvas,{scaleMode:e});return a.baseTexture.setResolution(r),a};yn.prototype.cachedGraphicsData=[];yn.prototype._renderCanvas=function(e){this.isMask!==!0&&(this.finishPoly(),e.plugins.graphics.render(this))};class Rl{static offsetPolygon(e,r){const n=[],s=e.length;r=Rl.isPolygonClockwise(e)?r:-1*r;for(let a=0;a<s;a+=2){let u=a-2;u<0&&(u+=s);const c=(a+2)%s;let d=e[a]-e[u],p=e[a+1]-e[u+1],m=Math.sqrt(d*d+p*p);d/=m,p/=m,d*=r,p*=r;const _=-p,x=d,S=[e[u]+_,e[u+1]+x],E=[e[a]+_,e[a+1]+x];let I=e[c]-e[a],A=e[c+1]-e[a+1];m=Math.sqrt(I*I+A*A),I/=m,A/=m,I*=r,A*=r;const R=-A,O=I,L=[e[a]+R,e[a+1]+O],X=[e[c]+R,e[c+1]+O],N=Rl.findIntersection(S[0],S[1],E[0],E[1],L[0],L[1],X[0],X[1]);N&&n.push(...N)}return n}static findIntersection(e,r,n,s,a,u,c,d){const p=(d-u)*(n-e)-(c-a)*(s-r),m=(c-a)*(r-u)-(d-u)*(e-a),_=(n-e)*(r-u)-(s-r)*(e-a);if(p===0)return m===0&&_===0?[(e+n)/2,(r+s)/2]:null;const x=m/p;return[e+x*(n-e),r+x*(s-r)]}static isPolygonClockwise(e){let r=0;for(let n=0,s=e.length-2;n<e.length;s=n,n+=2)r+=(e[n]-e[s])*(e[n+1]+e[s+1]);return r>0}}class Xw{constructor(e){this._svgMatrix=null,this._tempMatrix=new Nt,this.renderer=e}_calcCanvasStyle(e,r){let n;return e.texture&&e.texture.baseTexture!==qe.WHITE.baseTexture?e.texture.valid?(n=Sr.getTintedPattern(e.texture,r),this.setPatternTransform(n,e.matrix||Nt.IDENTITY)):n="#808080":n=`#${`00000${(r|0).toString(16)}`.slice(-6)}`,n}render(e){const r=this.renderer,n=r.canvasContext.activeContext,s=e.worldAlpha,a=e.transform.worldTransform;r.canvasContext.setContextTransform(a),r.canvasContext.setBlendMode(e.blendMode);const u=e.geometry.graphicsData;let c,d;const p=Tt.shared.setValue(e.tint).toArray();for(let m=0;m<u.length;m++){const _=u[m],x=_.shape,S=_.fillStyle,E=_.lineStyle,I=_.fillStyle.color|0,A=_.lineStyle.color|0;if(_.matrix&&r.canvasContext.setContextTransform(a.copyTo(this._tempMatrix).append(_.matrix)),S.visible&&(c=this._calcCanvasStyle(S,Tt.shared.setValue(I).multiply(p).toNumber())),E.visible&&(d=this._calcCanvasStyle(E,Tt.shared.setValue(A).multiply(p).toNumber())),n.lineWidth=E.width,n.lineCap=E.cap,n.lineJoin=E.join,n.miterLimit=E.miterLimit,_.type===Wt.POLY){n.beginPath();const R=x;let O=R.points;const L=_.holes;let X,N,Z,G,ie;n.moveTo(O[0],O[1]);for(let re=2;re<O.length;re+=2)n.lineTo(O[re],O[re+1]);if(R.closeStroke&&n.closePath(),L.length>0){ie=[],X=0,Z=O[0],G=O[1];for(let re=2;re+2<O.length;re+=2)X+=(O[re]-Z)*(O[re+3]-G)-(O[re+2]-Z)*(O[re+1]-G);for(let re=0;re<L.length;re++)if(O=L[re].shape.points,!!O){N=0,Z=O[0],G=O[1];for(let _e=2;_e+2<O.length;_e+=2)N+=(O[_e]-Z)*(O[_e+3]-G)-(O[_e+2]-Z)*(O[_e+1]-G);if(N*X<0){n.moveTo(O[0],O[1]);for(let _e=2;_e<O.length;_e+=2)n.lineTo(O[_e],O[_e+1])}else{n.moveTo(O[O.length-2],O[O.length-1]);for(let _e=O.length-4;_e>=0;_e-=2)n.lineTo(O[_e],O[_e+1])}L[re].shape.closeStroke&&n.closePath(),ie[re]=N*X<0}}S.visible&&(n.globalAlpha=S.alpha*s,n.fillStyle=c,n.fill()),E.visible&&this.paintPolygonStroke(R,E,d,L,ie,s,n)}else if(_.type===Wt.RECT){const R=x;if(S.visible&&(n.globalAlpha=S.alpha*s,n.fillStyle=c,n.fillRect(R.x,R.y,R.width,R.height)),E.visible){const O=E.width*(.5-(1-E.alignment)),L=R.width+2*O,X=R.height+2*O;n.globalAlpha=E.alpha*s,n.strokeStyle=d,n.strokeRect(R.x-O,R.y-O,L,X)}}else if(_.type===Wt.CIRC){const R=x;if(n.beginPath(),n.arc(R.x,R.y,R.radius,0,2*Math.PI),n.closePath(),S.visible&&(n.globalAlpha=S.alpha*s,n.fillStyle=c,n.fill()),E.visible){if(E.alignment!==.5){const O=E.width*(.5-(1-E.alignment));n.beginPath(),n.arc(R.x,R.y,R.radius+O,0,2*Math.PI),n.closePath()}n.globalAlpha=E.alpha*s,n.strokeStyle=d,n.stroke()}}else if(_.type===Wt.ELIP){const R=x,O=E.alignment===1;if(O||this.paintEllipse(R,S,E,c,s,n),E.visible){if(E.alignment!==.5){const L=.5522848,X=E.width*(.5-(1-E.alignment)),N=(R.width+X)*2,Z=(R.height+X)*2,G=R.x-N/2,ie=R.y-Z/2,re=N/2*L,_e=Z/2*L,oe=G+N,ee=ie+Z,me=G+N/2,ue=ie+Z/2;n.beginPath(),n.moveTo(G,ue),n.bezierCurveTo(G,ue-_e,me-re,ie,me,ie),n.bezierCurveTo(me+re,ie,oe,ue-_e,oe,ue),n.bezierCurveTo(oe,ue+_e,me+re,ee,me,ee),n.bezierCurveTo(me-re,ee,G,ue+_e,G,ue),n.closePath()}n.globalAlpha=E.alpha*s,n.strokeStyle=d,n.stroke()}O&&this.paintEllipse(R,S,E,c,s,n)}else if(_.type===Wt.RREC){const R=x,O=E.alignment===1;if(O||this.paintRoundedRectangle(R,S,E,c,s,n),E.visible){if(E.alignment!==.5){const L=R.width,X=R.height,N=E.width*(.5-(1-E.alignment)),Z=R.x-N,G=R.y-N,ie=R.width+2*N,re=R.height+2*N,_e=N*(E.alignment>=1?Math.min(ie/L,re/X):Math.min(L/ie,X/re));let oe=R.radius+_e;const ee=Math.min(ie,re)/2;oe=oe>ee?ee:oe,n.beginPath(),n.moveTo(Z,G+oe),n.lineTo(Z,G+re-oe),n.quadraticCurveTo(Z,G+re,Z+oe,G+re),n.lineTo(Z+ie-oe,G+re),n.quadraticCurveTo(Z+ie,G+re,Z+ie,G+re-oe),n.lineTo(Z+ie,G+oe),n.quadraticCurveTo(Z+ie,G,Z+ie-oe,G),n.lineTo(Z+oe,G),n.quadraticCurveTo(Z,G,Z,G+oe),n.closePath()}n.globalAlpha=E.alpha*s,n.strokeStyle=d,n.stroke()}O&&this.paintRoundedRectangle(R,S,E,c,s,n)}}}paintPolygonStroke(e,r,n,s,a,u,c){if(r.alignment!==.5){const d=r.width*(.5-(1-r.alignment));let p=Rl.offsetPolygon(e.points,d),m;c.beginPath(),c.moveTo(p[0],p[1]);for(let _=2;_<p.length;_+=2)c.lineTo(p[_],p[_+1]);e.closeStroke&&c.closePath();for(let _=0;_<s.length;_++){if(m=s[_].shape.points,p=Rl.offsetPolygon(m,d),a[_]){c.moveTo(p[0],p[1]);for(let x=2;x<p.length;x+=2)c.lineTo(p[x],p[x+1])}else{c.moveTo(p[p.length-2],p[p.length-1]);for(let x=p.length-4;x>=0;x-=2)c.lineTo(p[x],p[x+1])}s[_].shape.closeStroke&&c.closePath()}}c.globalAlpha=r.alpha*u,c.strokeStyle=n,c.stroke()}paintEllipse(e,r,n,s,a,u){const c=e.width*2,d=e.height*2,p=e.x-c/2,m=e.y-d/2,_=.5522848,x=c/2*_,S=d/2*_,E=p+c,I=m+d,A=p+c/2,R=m+d/2;n.alignment===0&&u.save(),u.beginPath(),u.moveTo(p,R),u.bezierCurveTo(p,R-S,A-x,m,A,m),u.bezierCurveTo(A+x,m,E,R-S,E,R),u.bezierCurveTo(E,R+S,A+x,I,A,I),u.bezierCurveTo(A-x,I,p,R+S,p,R),u.closePath(),n.alignment===0&&u.clip(),r.visible&&(u.globalAlpha=r.alpha*a,u.fillStyle=s,u.fill()),n.alignment===0&&u.restore()}paintRoundedRectangle(e,r,n,s,a,u){const c=e.x,d=e.y,p=e.width,m=e.height;let _=e.radius;const x=Math.min(p,m)/2;_=_>x?x:_,n.alignment===0&&u.save(),u.beginPath(),u.moveTo(c,d+_),u.lineTo(c,d+m-_),u.quadraticCurveTo(c,d+m,c+_,d+m),u.lineTo(c+p-_,d+m),u.quadraticCurveTo(c+p,d+m,c+p,d+m-_),u.lineTo(c+p,d+_),u.quadraticCurveTo(c+p,d,c+p-_,d),u.lineTo(c+_,d),u.quadraticCurveTo(c,d,c,d+_),u.closePath(),n.alignment===0&&u.clip(),r.visible&&(u.globalAlpha=r.alpha*a,u.fillStyle=s,u.fill()),n.alignment===0&&u.restore()}setPatternTransform(e,r){if(this._svgMatrix!==!1){if(!this._svgMatrix){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n!=null&&n.createSVGMatrix&&(this._svgMatrix=n.createSVGMatrix()),!this._svgMatrix||!e.setTransform){this._svgMatrix=!1;return}}this._svgMatrix.a=r.a,this._svgMatrix.b=r.b,this._svgMatrix.c=r.c,this._svgMatrix.d=r.d,this._svgMatrix.e=r.tx,this._svgMatrix.f=r.ty,e.setTransform(this._svgMatrix.inverse())}}destroy(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null}}Xw.extension={name:"graphics",type:$e.CanvasRendererPlugin};Ke.add(Xw);Object.defineProperties(We,{MESH_CANVAS_PADDING:{get(){return Zr.defaultCanvasPadding},set(t){yt("7.1.0","settings.MESH_CANVAS_PADDING is deprecated, use Mesh.defaultCanvasPadding"),Zr.defaultCanvasPadding=t}}});pa.prototype._renderCanvas=function(e,r){e.plugins.mesh.render(r)};Gh.prototype._cachedTint=16777215;Gh.prototype._tintedCanvas=null;Gh.prototype._canvasUvs=null;Gh.prototype._renderCanvas=function(e){const r=e.canvasContext.activeContext,n=this.worldTransform,s=this.tintValue!==16777215,a=this.texture;if(!a.valid)return;s&&this._cachedTint!==this.tintValue&&(this._cachedTint=this.tintValue,this._tintedCanvas=Sr.getTintedCanvas(this,this.tintValue));const u=s?this._tintedCanvas:a.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);const c=this.vertices,d=this._canvasUvs,p=s?0:a.frame.x,m=s?0:a.frame.y,_=p+a.frame.width,x=m+a.frame.height;d[0]=p,d[1]=p+this._leftWidth,d[2]=_-this._rightWidth,d[3]=_,d[4]=m,d[5]=m+this._topHeight,d[6]=x-this._bottomHeight,d[7]=x;for(let S=0;S<8;S++)d[S]*=a.baseTexture.resolution;r.globalAlpha=this.worldAlpha,e.canvasContext.setBlendMode(this.blendMode),e.canvasContext.setContextTransform(n,this.roundPixels);for(let S=0;S<3;S++)for(let E=0;E<3;E++){const I=E*2+S*8,A=Math.max(1,d[E+1]-d[E]),R=Math.max(1,d[S+5]-d[S+4]),O=Math.max(1,c[I+10]-c[I]),L=Math.max(1,c[I+11]-c[I+1]);r.drawImage(u,d[E],d[S+4],A,R,c[I],c[I+1],O,L)}};let Y_=!1;Zr.prototype._cachedTint=16777215;Zr.prototype._tintedCanvas=null;Zr.prototype._cachedTexture=null;Zr.prototype._renderCanvas=function(e){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(e,this):Y_||(Y_=!0,globalThis.console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))};Zr.prototype._canvasPadding=null;Zr.defaultCanvasPadding=0;Object.defineProperty(Zr.prototype,"canvasPadding",{get(){return this._canvasPadding??Zr.defaultCanvasPadding},set(t){this._canvasPadding=t}});d2.prototype._renderCanvas=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(e,this)};p2.prototype._renderCanvas=function(e){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(e,this)};class qw{constructor(e){this.renderer=e}render(e){const r=this.renderer,n=e.worldTransform;r.canvasContext.activeContext.globalAlpha=e.worldAlpha,r.canvasContext.setBlendMode(e.blendMode),r.canvasContext.setContextTransform(n,e.roundPixels),e.drawMode!==fi.TRIANGLES?this._renderTriangleMesh(e):this._renderTriangles(e)}_renderTriangleMesh(e){const r=e.geometry.buffers[0].data.length;for(let n=0;n<r-2;n++){const s=n*2;this._renderDrawTriangle(e,s,s+2,s+4)}}_renderTriangles(e){const r=e.geometry.getIndex().data,n=r.length;for(let s=0;s<n;s+=3){const a=r[s]*2,u=r[s+1]*2,c=r[s+2]*2;this._renderDrawTriangle(e,a,u,c)}}_renderDrawTriangle(e,r,n,s){var F;const a=this.renderer.canvasContext.activeContext,u=e.geometry.buffers[0].data,{uvs:c,texture:d}=e;if(!d.valid)return;const p=e.tintValue!==16777215,m=d.baseTexture,_=m.width,x=m.height;e._cachedTexture&&e._cachedTexture.baseTexture!==m&&(e._cachedTint=16777215,(F=e._cachedTexture)==null||F.destroy(),e._cachedTexture=null,e._tintedCanvas=null),p&&e._cachedTint!==e.tintValue&&(e._cachedTint=e.tintValue,e._cachedTexture=e._cachedTexture||new qe(m),e._tintedCanvas=Sr.getTintedCanvas({texture:e._cachedTexture},e.tintValue));const S=p?e._tintedCanvas:m.getDrawableSource(),E=c[r]*m.width,I=c[n]*m.width,A=c[s]*m.width,R=c[r+1]*m.height,O=c[n+1]*m.height,L=c[s+1]*m.height;let X=u[r],N=u[n],Z=u[s],G=u[r+1],ie=u[n+1],re=u[s+1];const _e=e.canvasPadding/this.renderer.canvasContext.activeResolution;if(_e>0){const{a:K,b:U,c:B,d:z}=e.worldTransform,te=(X+N+Z)/3,he=(G+ie+re)/3;let xe=X-te,Ce=G-he,Me=K*xe+B*Ce,ke=U*xe+z*Ce,Ne=Math.sqrt(Me*Me+ke*ke),Oe=1+_e/Ne;X=te+xe*Oe,G=he+Ce*Oe,xe=N-te,Ce=ie-he,Me=K*xe+B*Ce,ke=U*xe+z*Ce,Ne=Math.sqrt(Me*Me+ke*ke),Oe=1+_e/Ne,N=te+xe*Oe,ie=he+Ce*Oe,xe=Z-te,Ce=re-he,Me=K*xe+B*Ce,ke=U*xe+z*Ce,Ne=Math.sqrt(Me*Me+ke*ke),Oe=1+_e/Ne,Z=te+xe*Oe,re=he+Ce*Oe}a.save(),a.beginPath(),a.moveTo(X,G),a.lineTo(N,ie),a.lineTo(Z,re),a.closePath(),a.clip();const oe=E*O+R*A+I*L-O*A-R*I-E*L,ee=X*O+R*Z+N*L-O*Z-R*N-X*L,me=E*N+X*A+I*Z-N*A-X*I-E*Z,ue=E*O*Z+R*N*A+X*I*L-X*O*A-R*I*Z-E*N*L,Ae=G*O+R*re+ie*L-O*re-R*ie-G*L,H=E*ie+G*A+I*re-ie*A-G*I-E*re,j=E*O*re+R*ie*A+G*I*L-G*O*A-R*I*re-E*ie*L;a.transform(ee/oe,Ae/oe,me/oe,H/oe,ue/oe,j/oe),a.drawImage(S,0,0,_*m.resolution,x*m.resolution,0,0,_,x),a.restore(),this.renderer.canvasContext.invalidateBlendMode()}renderMeshFlat(e){const r=this.renderer.canvasContext.activeContext,n=e.geometry.getBuffer("aVertexPosition").data,s=n.length/2;r.beginPath();for(let a=1;a<s-2;++a){const u=a*2,c=n[u],d=n[u+1],p=n[u+2],m=n[u+3],_=n[u+4],x=n[u+5];r.moveTo(c,d),r.lineTo(p,m),r.lineTo(_,x)}r.fillStyle="#FF0000",r.fill(),r.closePath()}destroy(){this.renderer=null}}qw.extension={name:"mesh",type:$e.CanvasRendererPlugin};Ke.add(qw);const K_=16;function O2(t,e){const r=t;if(e instanceof pt){const n=e.source,s=n.width===0?r.canvas.width:Math.min(r.canvas.width,n.width),a=n.height===0?r.canvas.height:Math.min(r.canvas.height,n.height);return r.ctx.drawImage(n,0,0,s,a,0,0,r.canvas.width,r.canvas.height),!0}return!1}class Yw extends Pl{constructor(e){super(e),this.uploadHookHelper=this,this.canvas=We.ADAPTER.createCanvas(K_,K_),this.ctx=this.canvas.getContext("2d"),this.registerUploadHook(O2)}destroy(){super.destroy(),this.ctx=null,this.canvas=null}}Yw.extension={name:"prepare",type:$e.CanvasRendererSystem};Ke.add(Yw);Fi.prototype._tintedCanvas=null;Fi.prototype._renderCanvas=function(e){e.plugins.sprite.render(this)};const Z_=new Nt;class Kw{constructor(e){this.renderer=e}render(e){const r=e._texture,n=this.renderer,s=n.canvasContext.activeContext,a=n.canvasContext.activeResolution;if(!r.valid)return;const u=r._frame.width,c=r._frame.height;let d=r._frame.width,p=r._frame.height;r.trim&&(d=r.trim.width,p=r.trim.height);let m=e.transform.worldTransform,_=0,x=0;const S=r.baseTexture.getDrawableSource();if(r.orig.width<=0||r.orig.height<=0||!r.valid||!S)return;n.canvasContext.setBlendMode(e.blendMode,!0),s.globalAlpha=e.worldAlpha;const E=r.baseTexture.scaleMode===di.LINEAR,I=n.canvasContext.smoothProperty;I&&s[I]!==E&&(s[I]=E),r.trim?(_=r.trim.width/2+r.trim.x-e.anchor.x*r.orig.width,x=r.trim.height/2+r.trim.y-e.anchor.y*r.orig.height):(_=(.5-e.anchor.x)*r.orig.width,x=(.5-e.anchor.y)*r.orig.height),r.rotate&&(m.copyTo(Z_),m=Z_,Jt.matrixAppendRotationInv(m,r.rotate,_,x),_=0,x=0),_-=d/2,x-=p/2,n.canvasContext.setContextTransform(m,e.roundPixels,1),e.roundPixels&&(_=_|0,x=x|0);const A=r.baseTexture.resolution,R=n.canvasContext._outerBlend;R&&(s.save(),s.beginPath(),s.rect(_*a,x*a,d*a,p*a),s.clip()),e.tint!==16777215?((e._cachedTint!==e.tintValue||e._tintedCanvas.tintId!==e._texture._updateID)&&(e._cachedTint=e.tintValue,e._tintedCanvas=Sr.getTintedCanvas(e,e.tintValue)),s.drawImage(e._tintedCanvas,0,0,Math.floor(u*A),Math.floor(c*A),Math.floor(_*a),Math.floor(x*a),Math.floor(d*a),Math.floor(p*a))):s.drawImage(S,r._frame.x*A,r._frame.y*A,Math.floor(u*A),Math.floor(c*A),Math.floor(_*a),Math.floor(x*a),Math.floor(d*a),Math.floor(p*a)),R&&s.restore(),n.canvasContext.setBlendMode(Fe.NORMAL)}destroy(){this.renderer=null}}Kw.extension={name:"sprite",type:$e.CanvasRendererPlugin};Ke.add(Kw);function $d(t){return typeof t>"u"}function Q_(t,e=0){return{a:1,c:0,e:t,b:0,d:1,f:e}}function Wg(...t){t=Array.isArray(t[0])?t[0]:t;const e=(r,n)=>({a:r.a*n.a+r.c*n.b,c:r.a*n.c+r.c*n.d,e:r.a*n.e+r.c*n.f+r.e,b:r.b*n.a+r.d*n.b,d:r.b*n.c+r.d*n.d,f:r.b*n.e+r.d*n.f+r.f});switch(t.length){case 0:throw new Error("no matrices provided");case 1:return t[0];case 2:return e(t[0],t[1]);default:{const[r,n,...s]=t,a=e(r,n);return Wg(a,...s)}}}function L2(...t){return Wg(...t)}function N2(t,e=void 0,r=void 0,n=void 0){$d(e)&&(e=t);const s={a:t,c:0,e:0,b:0,d:e,f:0};return $d(r)||$d(n)?s:Wg([Q_(r,n),s,Q_(-r,-n)])}function U2(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function jh(t,e,r,n){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,jh.prototype),s.expected=e,s.found=r,s.location=n,s.name="SyntaxError",s}U2(jh,Error);function Vd(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,r+=r.repeat(e),t+r.slice(0,e))}jh.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var r=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,u=this.location.source+":"+a.line+":"+a.column;if(r){var c=this.location.end,d=Vd("",a.line.toString().length," "),p=r[s.line-1],m=s.line===c.line?c.column:p.length+1,_=m-s.column||1;e+=`
 --> `+u+`
`+d+` |
`+a.line+" | "+p+`
`+d+" | "+Vd("",s.column-1," ")+Vd("",_,"^")}else e+=`
 at `+u}return e};jh.buildMessage=function(t,e){var r={literal:function(p){return'"'+s(p.text)+'"'},class:function(p){var m=p.parts.map(function(_){return Array.isArray(_)?a(_[0])+"-"+a(_[1]):a(_)});return"["+(p.inverted?"^":"")+m.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(p){return p.description}};function n(p){return p.charCodeAt(0).toString(16).toUpperCase()}function s(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+n(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+n(m)})}function a(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+n(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+n(m)})}function u(p){return r[p.type](p)}function c(p){var m=p.map(u),_,x;if(m.sort(),m.length>0){for(_=1,x=1;_<m.length;_++)m[_-1]!==m[_]&&(m[x]=m[_],x++);m.length=x}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function d(p){return p?'"'+s(p)+'"':"end of input"}return"Expected "+c(t)+" but "+d(e)+" found."};const Zw=()=>[1,0,0,0,1,0,0,0,1],G2=(t,e,r)=>{const n={a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]},s=L2(N2(t,e),n);return[s.a,s.b,s.c,s.d,s.e,s.f,0,0,1]};var Wd,J_;function H2(){if(J_)return Wd;J_=1;function t(){this.__data__=[],this.size=0}return Wd=t,Wd}var Xd,e1;function Qw(){if(e1)return Xd;e1=1;function t(e,r){return e===r||e!==e&&r!==r}return Xd=t,Xd}var qd,t1;function zh(){if(t1)return qd;t1=1;var t=Qw();function e(r,n){for(var s=r.length;s--;)if(t(r[s][0],n))return s;return-1}return qd=e,qd}var Yd,r1;function j2(){if(r1)return Yd;r1=1;var t=zh(),e=Array.prototype,r=e.splice;function n(s){var a=this.__data__,u=t(a,s);if(u<0)return!1;var c=a.length-1;return u==c?a.pop():r.call(a,u,1),--this.size,!0}return Yd=n,Yd}var Kd,n1;function z2(){if(n1)return Kd;n1=1;var t=zh();function e(r){var n=this.__data__,s=t(n,r);return s<0?void 0:n[s][1]}return Kd=e,Kd}var Zd,i1;function $2(){if(i1)return Zd;i1=1;var t=zh();function e(r){return t(this.__data__,r)>-1}return Zd=e,Zd}var Qd,s1;function V2(){if(s1)return Qd;s1=1;var t=zh();function e(r,n){var s=this.__data__,a=t(s,r);return a<0?(++this.size,s.push([r,n])):s[a][1]=n,this}return Qd=e,Qd}var Jd,o1;function $h(){if(o1)return Jd;o1=1;var t=H2(),e=j2(),r=z2(),n=$2(),s=V2();function a(u){var c=-1,d=u==null?0:u.length;for(this.clear();++c<d;){var p=u[c];this.set(p[0],p[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,Jd=a,Jd}var ep,a1;function W2(){if(a1)return ep;a1=1;var t=$h();function e(){this.__data__=new t,this.size=0}return ep=e,ep}var tp,l1;function X2(){if(l1)return tp;l1=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return tp=t,tp}var rp,u1;function q2(){if(u1)return rp;u1=1;function t(e){return this.__data__.get(e)}return rp=t,rp}var np,h1;function Y2(){if(h1)return np;h1=1;function t(e){return this.__data__.has(e)}return np=t,np}var ip,c1;function Jw(){if(c1)return ip;c1=1;var t=typeof ci=="object"&&ci&&ci.Object===Object&&ci;return ip=t,ip}var sp,f1;function Bi(){if(f1)return sp;f1=1;var t=Jw(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return sp=r,sp}var op,d1;function Xg(){if(d1)return op;d1=1;var t=Bi(),e=t.Symbol;return op=e,op}var ap,p1;function K2(){if(p1)return ap;p1=1;var t=Xg(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,s=t?t.toStringTag:void 0;function a(u){var c=r.call(u,s),d=u[s];try{u[s]=void 0;var p=!0}catch{}var m=n.call(u);return p&&(c?u[s]=d:delete u[s]),m}return ap=a,ap}var lp,m1;function Z2(){if(m1)return lp;m1=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return lp=r,lp}var up,g1;function Vh(){if(g1)return up;g1=1;var t=Xg(),e=K2(),r=Z2(),n="[object Null]",s="[object Undefined]",a=t?t.toStringTag:void 0;function u(c){return c==null?c===void 0?s:n:a&&a in Object(c)?e(c):r(c)}return up=u,up}var hp,y1;function Nl(){if(y1)return hp;y1=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return hp=t,hp}var cp,v1;function eT(){if(v1)return cp;v1=1;var t=Vh(),e=Nl(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function u(c){if(!e(c))return!1;var d=t(c);return d==n||d==s||d==r||d==a}return cp=u,cp}var fp,_1;function Q2(){if(_1)return fp;_1=1;var t=Bi(),e=t["__core-js_shared__"];return fp=e,fp}var dp,x1;function J2(){if(x1)return dp;x1=1;var t=Q2(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return dp=r,dp}var pp,b1;function tT(){if(b1)return pp;b1=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return pp=r,pp}var mp,w1;function eR(){if(w1)return mp;w1=1;var t=eT(),e=J2(),r=Nl(),n=tT(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,d=u.toString,p=c.hasOwnProperty,m=RegExp("^"+d.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(x){if(!r(x)||e(x))return!1;var S=t(x)?m:a;return S.test(n(x))}return mp=_,mp}var gp,T1;function tR(){if(T1)return gp;T1=1;function t(e,r){return e==null?void 0:e[r]}return gp=t,gp}var yp,S1;function wo(){if(S1)return yp;S1=1;var t=eR(),e=tR();function r(n,s){var a=e(n,s);return t(a)?a:void 0}return yp=r,yp}var vp,E1;function qg(){if(E1)return vp;E1=1;var t=wo(),e=Bi(),r=t(e,"Map");return vp=r,vp}var _p,C1;function Wh(){if(C1)return _p;C1=1;var t=wo(),e=t(Object,"create");return _p=e,_p}var xp,A1;function rR(){if(A1)return xp;A1=1;var t=Wh();function e(){this.__data__=t?t(null):{},this.size=0}return xp=e,xp}var bp,P1;function nR(){if(P1)return bp;P1=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return bp=t,bp}var wp,R1;function iR(){if(R1)return wp;R1=1;var t=Wh(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(a){var u=this.__data__;if(t){var c=u[a];return c===e?void 0:c}return n.call(u,a)?u[a]:void 0}return wp=s,wp}var Tp,I1;function sR(){if(I1)return Tp;I1=1;var t=Wh(),e=Object.prototype,r=e.hasOwnProperty;function n(s){var a=this.__data__;return t?a[s]!==void 0:r.call(a,s)}return Tp=n,Tp}var Sp,M1;function oR(){if(M1)return Sp;M1=1;var t=Wh(),e="__lodash_hash_undefined__";function r(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&s===void 0?e:s,this}return Sp=r,Sp}var Ep,k1;function aR(){if(k1)return Ep;k1=1;var t=rR(),e=nR(),r=iR(),n=sR(),s=oR();function a(u){var c=-1,d=u==null?0:u.length;for(this.clear();++c<d;){var p=u[c];this.set(p[0],p[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,Ep=a,Ep}var Cp,F1;function lR(){if(F1)return Cp;F1=1;var t=aR(),e=$h(),r=qg();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Cp=n,Cp}var Ap,D1;function uR(){if(D1)return Ap;D1=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Ap=t,Ap}var Pp,B1;function Xh(){if(B1)return Pp;B1=1;var t=uR();function e(r,n){var s=r.__data__;return t(n)?s[typeof n=="string"?"string":"hash"]:s.map}return Pp=e,Pp}var Rp,O1;function hR(){if(O1)return Rp;O1=1;var t=Xh();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Rp=e,Rp}var Ip,L1;function cR(){if(L1)return Ip;L1=1;var t=Xh();function e(r){return t(this,r).get(r)}return Ip=e,Ip}var Mp,N1;function fR(){if(N1)return Mp;N1=1;var t=Xh();function e(r){return t(this,r).has(r)}return Mp=e,Mp}var kp,U1;function dR(){if(U1)return kp;U1=1;var t=Xh();function e(r,n){var s=t(this,r),a=s.size;return s.set(r,n),this.size+=s.size==a?0:1,this}return kp=e,kp}var Fp,G1;function pR(){if(G1)return Fp;G1=1;var t=lR(),e=hR(),r=cR(),n=fR(),s=dR();function a(u){var c=-1,d=u==null?0:u.length;for(this.clear();++c<d;){var p=u[c];this.set(p[0],p[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,Fp=a,Fp}var Dp,H1;function mR(){if(H1)return Dp;H1=1;var t=$h(),e=qg(),r=pR(),n=200;function s(a,u){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([a,u]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(a,u),this.size=c.size,this}return Dp=s,Dp}var Bp,j1;function gR(){if(j1)return Bp;j1=1;var t=$h(),e=W2(),r=X2(),n=q2(),s=Y2(),a=mR();function u(c){var d=this.__data__=new t(c);this.size=d.size}return u.prototype.clear=e,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=s,u.prototype.set=a,Bp=u,Bp}var Op,z1;function yR(){if(z1)return Op;z1=1;function t(e,r){for(var n=-1,s=e==null?0:e.length;++n<s&&r(e[n],n,e)!==!1;);return e}return Op=t,Op}var Lp,$1;function vR(){if($1)return Lp;$1=1;var t=wo(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Lp=e,Lp}var Np,V1;function rT(){if(V1)return Np;V1=1;var t=vR();function e(r,n,s){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return Np=e,Np}var Up,W1;function nT(){if(W1)return Up;W1=1;var t=rT(),e=Qw(),r=Object.prototype,n=r.hasOwnProperty;function s(a,u,c){var d=a[u];(!(n.call(a,u)&&e(d,c))||c===void 0&&!(u in a))&&t(a,u,c)}return Up=s,Up}var Gp,X1;function qh(){if(X1)return Gp;X1=1;var t=nT(),e=rT();function r(n,s,a,u){var c=!a;a||(a={});for(var d=-1,p=s.length;++d<p;){var m=s[d],_=u?u(a[m],n[m],m,a,n):void 0;_===void 0&&(_=n[m]),c?e(a,m,_):t(a,m,_)}return a}return Gp=r,Gp}var Hp,q1;function _R(){if(q1)return Hp;q1=1;function t(e,r){for(var n=-1,s=Array(e);++n<e;)s[n]=r(n);return s}return Hp=t,Hp}var jp,Y1;function Ul(){if(Y1)return jp;Y1=1;function t(e){return e!=null&&typeof e=="object"}return jp=t,jp}var zp,K1;function xR(){if(K1)return zp;K1=1;var t=Vh(),e=Ul(),r="[object Arguments]";function n(s){return e(s)&&t(s)==r}return zp=n,zp}var $p,Z1;function bR(){if(Z1)return $p;Z1=1;var t=xR(),e=Ul(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(u){return e(u)&&n.call(u,"callee")&&!s.call(u,"callee")};return $p=a,$p}var Vp,Q1;function Yh(){if(Q1)return Vp;Q1=1;var t=Array.isArray;return Vp=t,Vp}var yl={exports:{}},Wp,J1;function wR(){if(J1)return Wp;J1=1;function t(){return!1}return Wp=t,Wp}yl.exports;var ex;function iT(){return ex||(ex=1,function(t,e){var r=Bi(),n=wR(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,u=a&&a.exports===s,c=u?r.Buffer:void 0,d=c?c.isBuffer:void 0,p=d||n;t.exports=p}(yl,yl.exports)),yl.exports}var Xp,tx;function TR(){if(tx)return Xp;tx=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,s){var a=typeof n;return s=s??t,!!s&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<s}return Xp=r,Xp}var qp,rx;function sT(){if(rx)return qp;rx=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return qp=e,qp}var Yp,nx;function SR(){if(nx)return Yp;nx=1;var t=Vh(),e=sT(),r=Ul(),n="[object Arguments]",s="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",p="[object Map]",m="[object Number]",_="[object Object]",x="[object RegExp]",S="[object Set]",E="[object String]",I="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",L="[object Float64Array]",X="[object Int8Array]",N="[object Int16Array]",Z="[object Int32Array]",G="[object Uint8Array]",ie="[object Uint8ClampedArray]",re="[object Uint16Array]",_e="[object Uint32Array]",oe={};oe[O]=oe[L]=oe[X]=oe[N]=oe[Z]=oe[G]=oe[ie]=oe[re]=oe[_e]=!0,oe[n]=oe[s]=oe[A]=oe[a]=oe[R]=oe[u]=oe[c]=oe[d]=oe[p]=oe[m]=oe[_]=oe[x]=oe[S]=oe[E]=oe[I]=!1;function ee(me){return r(me)&&e(me.length)&&!!oe[t(me)]}return Yp=ee,Yp}var Kp,ix;function Yg(){if(ix)return Kp;ix=1;function t(e){return function(r){return e(r)}}return Kp=t,Kp}var vl={exports:{}};vl.exports;var sx;function Kg(){return sx||(sx=1,function(t,e){var r=Jw(),n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===n,u=a&&r.process,c=function(){try{var d=s&&s.require&&s.require("util").types;return d||u&&u.binding&&u.binding("util")}catch{}}();t.exports=c}(vl,vl.exports)),vl.exports}var Zp,ox;function ER(){if(ox)return Zp;ox=1;var t=SR(),e=Yg(),r=Kg(),n=r&&r.isTypedArray,s=n?e(n):t;return Zp=s,Zp}var Qp,ax;function oT(){if(ax)return Qp;ax=1;var t=_R(),e=bR(),r=Yh(),n=iT(),s=TR(),a=ER(),u=Object.prototype,c=u.hasOwnProperty;function d(p,m){var _=r(p),x=!_&&e(p),S=!_&&!x&&n(p),E=!_&&!x&&!S&&a(p),I=_||x||S||E,A=I?t(p.length,String):[],R=A.length;for(var O in p)(m||c.call(p,O))&&!(I&&(O=="length"||S&&(O=="offset"||O=="parent")||E&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||s(O,R)))&&A.push(O);return A}return Qp=d,Qp}var Jp,lx;function Zg(){if(lx)return Jp;lx=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||t;return r===s}return Jp=e,Jp}var em,ux;function aT(){if(ux)return em;ux=1;function t(e,r){return function(n){return e(r(n))}}return em=t,em}var tm,hx;function CR(){if(hx)return tm;hx=1;var t=aT(),e=t(Object.keys,Object);return tm=e,tm}var rm,cx;function AR(){if(cx)return rm;cx=1;var t=Zg(),e=CR(),r=Object.prototype,n=r.hasOwnProperty;function s(a){if(!t(a))return e(a);var u=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&u.push(c);return u}return rm=s,rm}var nm,fx;function lT(){if(fx)return nm;fx=1;var t=eT(),e=sT();function r(n){return n!=null&&e(n.length)&&!t(n)}return nm=r,nm}var im,dx;function Kh(){if(dx)return im;dx=1;var t=oT(),e=AR(),r=lT();function n(s){return r(s)?t(s):e(s)}return im=n,im}var sm,px;function PR(){if(px)return sm;px=1;var t=qh(),e=Kh();function r(n,s){return n&&t(s,e(s),n)}return sm=r,sm}var om,mx;function RR(){if(mx)return om;mx=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return om=t,om}var am,gx;function IR(){if(gx)return am;gx=1;var t=Nl(),e=Zg(),r=RR(),n=Object.prototype,s=n.hasOwnProperty;function a(u){if(!t(u))return r(u);var c=e(u),d=[];for(var p in u)p=="constructor"&&(c||!s.call(u,p))||d.push(p);return d}return am=a,am}var lm,yx;function Qg(){if(yx)return lm;yx=1;var t=oT(),e=IR(),r=lT();function n(s){return r(s)?t(s,!0):e(s)}return lm=n,lm}var um,vx;function MR(){if(vx)return um;vx=1;var t=qh(),e=Qg();function r(n,s){return n&&t(s,e(s),n)}return um=r,um}var _l={exports:{}};_l.exports;var _x;function kR(){return _x||(_x=1,function(t,e){var r=Bi(),n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===n,u=a?r.Buffer:void 0,c=u?u.allocUnsafe:void 0;function d(p,m){if(m)return p.slice();var _=p.length,x=c?c(_):new p.constructor(_);return p.copy(x),x}t.exports=d}(_l,_l.exports)),_l.exports}var hm,xx;function uT(){if(xx)return hm;xx=1;function t(e,r){var n=-1,s=e.length;for(r||(r=Array(s));++n<s;)r[n]=e[n];return r}return hm=t,hm}var cm,bx;function FR(){if(bx)return cm;bx=1;function t(e,r){for(var n=-1,s=e==null?0:e.length,a=0,u=[];++n<s;){var c=e[n];r(c,n,e)&&(u[a++]=c)}return u}return cm=t,cm}var fm,wx;function hT(){if(wx)return fm;wx=1;function t(){return[]}return fm=t,fm}var dm,Tx;function Jg(){if(Tx)return dm;Tx=1;var t=FR(),e=hT(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(u){return u==null?[]:(u=Object(u),t(s(u),function(c){return n.call(u,c)}))}:e;return dm=a,dm}var pm,Sx;function DR(){if(Sx)return pm;Sx=1;var t=qh(),e=Jg();function r(n,s){return t(n,e(n),s)}return pm=r,pm}var mm,Ex;function cT(){if(Ex)return mm;Ex=1;function t(e,r){for(var n=-1,s=r.length,a=e.length;++n<s;)e[a+n]=r[n];return e}return mm=t,mm}var gm,Cx;function fT(){if(Cx)return gm;Cx=1;var t=aT(),e=t(Object.getPrototypeOf,Object);return gm=e,gm}var ym,Ax;function dT(){if(Ax)return ym;Ax=1;var t=cT(),e=fT(),r=Jg(),n=hT(),s=Object.getOwnPropertySymbols,a=s?function(u){for(var c=[];u;)t(c,r(u)),u=e(u);return c}:n;return ym=a,ym}var vm,Px;function BR(){if(Px)return vm;Px=1;var t=qh(),e=dT();function r(n,s){return t(n,e(n),s)}return vm=r,vm}var _m,Rx;function pT(){if(Rx)return _m;Rx=1;var t=cT(),e=Yh();function r(n,s,a){var u=s(n);return e(n)?u:t(u,a(n))}return _m=r,_m}var xm,Ix;function OR(){if(Ix)return xm;Ix=1;var t=pT(),e=Jg(),r=Kh();function n(s){return t(s,r,e)}return xm=n,xm}var bm,Mx;function LR(){if(Mx)return bm;Mx=1;var t=pT(),e=dT(),r=Qg();function n(s){return t(s,r,e)}return bm=n,bm}var wm,kx;function NR(){if(kx)return wm;kx=1;var t=wo(),e=Bi(),r=t(e,"DataView");return wm=r,wm}var Tm,Fx;function UR(){if(Fx)return Tm;Fx=1;var t=wo(),e=Bi(),r=t(e,"Promise");return Tm=r,Tm}var Sm,Dx;function GR(){if(Dx)return Sm;Dx=1;var t=wo(),e=Bi(),r=t(e,"Set");return Sm=r,Sm}var Em,Bx;function HR(){if(Bx)return Em;Bx=1;var t=wo(),e=Bi(),r=t(e,"WeakMap");return Em=r,Em}var Cm,Ox;function ey(){if(Ox)return Cm;Ox=1;var t=NR(),e=qg(),r=UR(),n=GR(),s=HR(),a=Vh(),u=tT(),c="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",_="[object WeakMap]",x="[object DataView]",S=u(t),E=u(e),I=u(r),A=u(n),R=u(s),O=a;return(t&&O(new t(new ArrayBuffer(1)))!=x||e&&O(new e)!=c||r&&O(r.resolve())!=p||n&&O(new n)!=m||s&&O(new s)!=_)&&(O=function(L){var X=a(L),N=X==d?L.constructor:void 0,Z=N?u(N):"";if(Z)switch(Z){case S:return x;case E:return c;case I:return p;case A:return m;case R:return _}return X}),Cm=O,Cm}var Am,Lx;function jR(){if(Lx)return Am;Lx=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var s=n.length,a=new n.constructor(s);return s&&typeof n[0]=="string"&&e.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return Am=r,Am}var Pm,Nx;function zR(){if(Nx)return Pm;Nx=1;var t=Bi(),e=t.Uint8Array;return Pm=e,Pm}var Rm,Ux;function ty(){if(Ux)return Rm;Ux=1;var t=zR();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Rm=e,Rm}var Im,Gx;function $R(){if(Gx)return Im;Gx=1;var t=ty();function e(r,n){var s=n?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return Im=e,Im}var Mm,Hx;function VR(){if(Hx)return Mm;Hx=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return Mm=e,Mm}var km,jx;function WR(){if(jx)return km;jx=1;var t=Xg(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(s){return r?Object(r.call(s)):{}}return km=n,km}var Fm,zx;function XR(){if(zx)return Fm;zx=1;var t=ty();function e(r,n){var s=n?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return Fm=e,Fm}var Dm,$x;function qR(){if($x)return Dm;$x=1;var t=ty(),e=$R(),r=VR(),n=WR(),s=XR(),a="[object Boolean]",u="[object Date]",c="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",_="[object String]",x="[object Symbol]",S="[object ArrayBuffer]",E="[object DataView]",I="[object Float32Array]",A="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",X="[object Uint8Array]",N="[object Uint8ClampedArray]",Z="[object Uint16Array]",G="[object Uint32Array]";function ie(re,_e,oe){var ee=re.constructor;switch(_e){case S:return t(re);case a:case u:return new ee(+re);case E:return e(re,oe);case I:case A:case R:case O:case L:case X:case N:case Z:case G:return s(re,oe);case c:return new ee;case d:case _:return new ee(re);case p:return r(re);case m:return new ee;case x:return n(re)}}return Dm=ie,Dm}var Bm,Vx;function YR(){if(Vx)return Bm;Vx=1;var t=Nl(),e=Object.create,r=function(){function n(){}return function(s){if(!t(s))return{};if(e)return e(s);n.prototype=s;var a=new n;return n.prototype=void 0,a}}();return Bm=r,Bm}var Om,Wx;function KR(){if(Wx)return Om;Wx=1;var t=YR(),e=fT(),r=Zg();function n(s){return typeof s.constructor=="function"&&!r(s)?t(e(s)):{}}return Om=n,Om}var Lm,Xx;function ZR(){if(Xx)return Lm;Xx=1;var t=ey(),e=Ul(),r="[object Map]";function n(s){return e(s)&&t(s)==r}return Lm=n,Lm}var Nm,qx;function QR(){if(qx)return Nm;qx=1;var t=ZR(),e=Yg(),r=Kg(),n=r&&r.isMap,s=n?e(n):t;return Nm=s,Nm}var Um,Yx;function JR(){if(Yx)return Um;Yx=1;var t=ey(),e=Ul(),r="[object Set]";function n(s){return e(s)&&t(s)==r}return Um=n,Um}var Gm,Kx;function eI(){if(Kx)return Gm;Kx=1;var t=JR(),e=Yg(),r=Kg(),n=r&&r.isSet,s=n?e(n):t;return Gm=s,Gm}var Hm,Zx;function tI(){if(Zx)return Hm;Zx=1;var t=gR(),e=yR(),r=nT(),n=PR(),s=MR(),a=kR(),u=uT(),c=DR(),d=BR(),p=OR(),m=LR(),_=ey(),x=jR(),S=qR(),E=KR(),I=Yh(),A=iT(),R=QR(),O=Nl(),L=eI(),X=Kh(),N=Qg(),Z=1,G=2,ie=4,re="[object Arguments]",_e="[object Array]",oe="[object Boolean]",ee="[object Date]",me="[object Error]",ue="[object Function]",Ae="[object GeneratorFunction]",H="[object Map]",j="[object Number]",F="[object Object]",K="[object RegExp]",U="[object Set]",B="[object String]",z="[object Symbol]",te="[object WeakMap]",he="[object ArrayBuffer]",xe="[object DataView]",Ce="[object Float32Array]",Me="[object Float64Array]",ke="[object Int8Array]",Ne="[object Int16Array]",Oe="[object Int32Array]",ot="[object Uint8Array]",ft="[object Uint8ClampedArray]",St="[object Uint16Array]",Dt="[object Uint32Array]",je={};je[re]=je[_e]=je[he]=je[xe]=je[oe]=je[ee]=je[Ce]=je[Me]=je[ke]=je[Ne]=je[Oe]=je[H]=je[j]=je[F]=je[K]=je[U]=je[B]=je[z]=je[ot]=je[ft]=je[St]=je[Dt]=!0,je[me]=je[ue]=je[te]=!1;function tt(at,tr,Cr,vn,vr,ur){var $t,on=tr&Z,Bn=tr&G,On=tr&ie;if(Cr&&($t=vr?Cr(at,vn,vr,ur):Cr(at)),$t!==void 0)return $t;if(!O(at))return at;var dr=I(at);if(dr){if($t=x(at),!on)return u(at,$t)}else{var sr=_(at),Ln=sr==ue||sr==Ae;if(A(at))return a(at,on);if(sr==F||sr==re||Ln&&!vr){if($t=Bn||Ln?{}:E(at),!on)return Bn?d(at,s($t,at)):c(at,n($t,at))}else{if(!je[sr])return vr?at:{};$t=S(at,sr,on)}}ur||(ur=new t);var Mt=ur.get(at);if(Mt)return Mt;ur.set(at,$t),L(at)?at.forEach(function(kr){$t.add(tt(kr,tr,Cr,kr,at,ur))}):R(at)&&at.forEach(function(kr,Xt){$t.set(Xt,tt(kr,tr,Cr,Xt,at,ur))});var Hr=On?Bn?m:p:Bn?N:X,Et=dr?void 0:Hr(at);return e(Et||at,function(kr,Xt){Et&&(Xt=kr,kr=at[Xt]),r($t,Xt,tt(kr,tr,Cr,Xt,at,ur))}),$t}return Hm=tt,Hm}var jm,Qx;function rI(){if(Qx)return jm;Qx=1;var t=tI(),e=1,r=4;function n(s){return t(s,e|r)}return jm=n,jm}var nI=rI();const iI=Il(nI);class ry{constructor(e,r){this.transform=e,this.childrens=r}addChild(e){this.childrens.push(e)}clone(){return iI(this)}*[Symbol.iterator](){yield this;for(const e of this.childrens)yield*e}}class Zh extends ry{}class mT extends ry{constructor(e,r,n,s){super(e,r),this.transform=e,this.childrens=r,this.assetId=n,this.size=s}}class gT extends ry{constructor(e,r,n){super(e,r),this.transform=e,this.childrens=r,this.geometries=n}}class Gl{}class yT extends Gl{constructor(e){super(),this.points=e}}class vT extends Gl{constructor(e,r){super(),this.center=e,this.r=r}}class _T extends Gl{constructor(e,r){super(),this.center=e,this.size=r}}class xT extends Gl{constructor(e,r){super(),this.position=e,this.size=r}}class bT extends Gl{constructor(e,r,n){super(),this.position=e,this.size=r,this.r=n}}class sI{constructor(e){this.color=e}}class oI{constructor(e,r,n){this.color=e,this.alpha=r,this.width=n}}class aI{constructor(e,r){this.shape=e,this.styles=r}}function Ds(t,e){if(t===!1)throw new Error(e)}class vo{constructor(e,r,n){this.r=e,this.g=r,this.b=n}static decToHex(e){return`#${e.toString(16).toUpperCase().padStart(6,"0")}`}static fromDecimal(e){const r=e>>16&255,n=e>>8&255,s=e&255;return new vo(r,n,s)}static fromHex(e){if(!/^#?[0-9A-Fa-f]{6}$/.test(e))throw new Error("Invalid hex color format");const r=e.startsWith("#")?e.slice(1):e,n=parseInt(r.slice(0,2),16),s=parseInt(r.slice(2,4),16),a=parseInt(r.slice(4,6),16);return new vo(n,s,a)}}class wT{constructor(e){this.source=e}download(e,r){const n=new Blob([this.source],{type:r}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=e,a.click(),URL.revokeObjectURL(s)}}el(wT,"fileTypes",{pdf:"application/pdf"});function lI(t){const e=window.devicePixelRatio||1,r=t.getBoundingClientRect();t.width=r.width*e,t.height=r.height*e;const n=t.getContext("2d");return Ds(n,"Unable to get canvas 2d ctx"),n.scale(2,2),n}lr.prototype.toSceneObject=function(){return new Zh(this.transform.worldTransform.toSceneMatrix(),[])};lr.prototype.toSceneObjectRecursive=function(){const t=this.toSceneObject();for(const e of this.children)Ds(e instanceof lr,"Unexpected DisplayObject type"),t.childrens.push(e.toSceneObjectRecursive());return t};Fi.prototype.toSceneObject=function(){const{width:t,height:e,...r}=this.texture.baseTexture,{src:n}=r.resource,s=new URL(n).pathname;return new mT(this.transform.worldTransform.toSceneMatrix(),[],s,{width:t,height:e})};yn.prototype.toSceneObject=function(){const t=[];for(const e of this.geometry.graphicsData)t.push(e.toSceneGeometry());return new gT(this.transform.worldTransform.toSceneMatrix(),[],t)};kb.prototype.toSceneShape=function(){const{x:t,y:e,radius:r}=this;return new vT({x:t,y:e},r)};Db.prototype.toSceneShape=function(){const{x:t,y:e,width:r,height:n}=this;return new _T({x:t,y:e},{height:n,width:r})};Rt.prototype.toSceneShape=function(){const{x:t,y:e,width:r,height:n}=this;return new xT({x:t,y:e},{height:n,width:r})};Lb.prototype.toSceneShape=function(){const{x:t,y:e,width:r,height:n,radius:s}=this;return new bT({x:t,y:e},{height:n,width:r},s)};bl.prototype.toSceneShape=function(){const{points:t}=this,e=[];if(t.length>=4)for(let r=0;r<t.length;r+=2){const n=t[r],s=t[r+1];e.push({x:n,y:s})}return new yT(e)};Al.prototype.toSceneGeometry=function(){const{shape:t,fillStyle:e,lineStyle:r}=this,n=new sI(vo.fromDecimal(e.color)),s=new oI(vo.fromDecimal(r.color),r.alpha,r.width);return new aI(t.toSceneShape(),{fill:n,stroke:s})};Nt.prototype.toSceneMatrix=function(){const{a:t,b:e,c:r,d:n,tx:s,ty:a}=this;return[t,r,s,e,n,a,0,0,1]};class TT{constructor(e=new Map){this.map=e}addRenderer(e,r){this.map.set(e.name,r)}getRenderer(e){const r=e.constructor.name,n=this.map.has(r);return Ds(n,`Missing scene object renderer for ${r}`),this.map.get(r)}}const ya=new TT,Qh=new TT,uI=(t,{am:e,canvas:r})=>{const n=e.getResourcePointer(t.assetId);r.save(),r.setMatrix(...t.transform),r.drawImage(n,0,0),r.restore()},hI=(t,{canvas:e,ck:r})=>{e.save(),e.setMatrix(...t.transform);const n=new r.Paint;for(const s of t.geometries){const{shape:a,styles:u}=s,{fill:c,stroke:d}=u,p=ya.getRenderer(a);n.setStyle(r.PaintStyle.Fill),n.setColor(r.Color(c.color.r,c.color.g,c.color.b)),p(a,{canvas:e,ck:r,paint:n}),n.setStyle(r.PaintStyle.Stroke),n.setStrokeWidth(d.width),n.setColor(r.Color(d.color.r,d.color.g,d.color.b)),p(a,{canvas:e,ck:r,paint:n})}e.restore()};Qh.addRenderer(mT,uI);Qh.addRenderer(gT,hI);Qh.addRenderer(Zh,()=>{});const cI=(t,{canvas:e,paint:r})=>{e.drawCircle(t.center.x,t.center.y,t.r,r)},fI=(t,{canvas:e,ck:r,paint:n})=>{const{position:s,size:a}=t,u=r.XYWHRect(s.x,s.y,a.width,a.height);e.drawRect(u,n)},dI=(t,{canvas:e,ck:r,paint:n})=>{const{center:s,size:a}=t,u=r.LTRBRect(s.x-a.width,s.y-a.height,s.x+a.width,s.y+a.height);e.drawOval(u,n)},pI=(t,{canvas:e,ck:r,paint:n})=>{const{position:s,size:a}=t,u=r.XYWHRect(s.x,s.y,a.width,a.height);e.drawRRect(u,n)},mI=(t,{canvas:e,ck:r,paint:n})=>{const{points:s}=t;if(!s.length)return;const[a,...u]=s,c=new r.Path;c.moveTo(a.x,a.y);for(const d of u)c.lineTo(d.x,d.y);e.drawPath(c,n)};ya.addRenderer(vT,cI);ya.addRenderer(xT,fI);ya.addRenderer(_T,dI);ya.addRenderer(yT,mI);ya.addRenderer(bT,pI);class ST{constructor(e,r,n){this.canvas=e,this.am=r,this.ck=n}render(e){Qh.getRenderer(e)(e,{am:this.am,canvas:this.canvas,ck:this.ck});for(const n of e.childrens)this.render(n)}}class gI{constructor(e,r=new Map,n=new Map){this.ck=e,this.cache=r,this.resourcePointers=n}async load(e){const r=await Promise.all(e.map(s=>fetch(s))),n=await Promise.all(r.map(s=>s.arrayBuffer()));return e.forEach((s,a)=>this.cache.set(s,n[a])),this}getResourcePointer(e){if(!this.resourcePointers.has(e)){const r=this.cache.get(e);Ds(r,`Missing resource buffer with id - ${e}`);const n=this.ck.MakeImageFromEncoded(r);Ds(n,`Cannot consume resource buffer with id - ${e}`),this.resourcePointers.set(e,n),this.cache.delete(e)}return this.resourcePointers.get(e)}}var zm={exports:{}},Jx;function yI(){return Jx||(Jx=1,function(t,e){var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(s={}){var a=s,u,c;a.ready=new Promise((h,w)=>{u=h,c=w}),function(h){h.ib=h.ib||[],h.ib.push(function(){h.MakeSWCanvasSurface=function(w){var C=w,D=typeof OffscreenCanvas<"u"&&C instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||D||(C=document.getElementById(w),C)))throw"Canvas with id "+w+" was not found";return(w=h.MakeSurface(C.width,C.height))&&(w.cb=C),w},h.MakeCanvasSurface||(h.MakeCanvasSurface=h.MakeSWCanvasSurface),h.MakeSurface=function(w,C){var D={width:w,height:C,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB},q=w*C*4,Q=h._malloc(q);return(D=h.Surface._makeRasterDirect(D,Q,4*w))&&(D.cb=null,D.Ic=w,D.Ec=C,D.Gc=q,D.mc=Q,D.getCanvas().clear(h.TRANSPARENT)),D},h.MakeRasterDirectSurface=function(w,C,D){return h.Surface._makeRasterDirect(w,C.byteOffset,D)},h.Surface.prototype.flush=function(w){if(this._flush(),this.cb){var C=new Uint8ClampedArray(h.HEAPU8.buffer,this.mc,this.Gc);C=new ImageData(C,this.Ic,this.Ec),w?this.cb.getContext("2d").putImageData(C,0,0,w[0],w[1],w[2]-w[0],w[3]-w[1]):this.cb.getContext("2d").putImageData(C,0,0)}},h.Surface.prototype.dispose=function(){this.mc&&h._free(this.mc),this.delete()},h.gd=h.gd||function(){},h.pc=h.pc||function(){return null}})}(a),function(h){function w(y,g,T,k,V){for(var se=0;se<y.length;se++)g[se*T+(se*V+k+T)%T]=y[se];return g}function C(y){for(var g=y*y,T=Array(g);g--;)T[g]=g%(y+1)===0?1:0;return T}function D(y){return y?y.constructor===Float32Array&&y.length===4:!1}function q(y){return(ye(255*y[3])<<24|ye(255*y[0])<<16|ye(255*y[1])<<8|ye(255*y[2])<<0)>>>0}function Q(y){if(y&&y._ck)return y;if(y instanceof Float32Array){for(var g=Math.floor(y.length/4),T=new Uint32Array(g),k=0;k<g;k++)T[k]=q(y.slice(4*k,4*(k+1)));return T}if(y instanceof Uint32Array)return y;if(y instanceof Array&&y[0]instanceof Float32Array)return y.map(q)}function be(y){if(y===void 0)return 1;var g=parseFloat(y);return y&&y.indexOf("%")!==-1?g/100:g}function ye(y){return Math.round(Math.max(0,Math.min(y||0,255)))}function ve(y,g){g&&g._ck||h._free(y)}function ae(y,g,T){if(!y||!y.length)return vt;if(y&&y._ck)return y.byteOffset;var k=h[g].BYTES_PER_ELEMENT;return T||(T=h._malloc(y.length*k)),h[g].set(y,T/k),T}function Ve(y){var g={tb:vt,count:y.length,colorType:h.ColorType.RGBA_F32};if(y instanceof Float32Array)g.tb=ae(y,"HEAPF32"),g.count=y.length/4;else if(y instanceof Uint32Array)g.tb=ae(y,"HEAPU32"),g.colorType=h.ColorType.RGBA_8888;else if(y instanceof Array){if(y&&y.length){for(var T=h._malloc(16*y.length),k=0,V=T/4,se=0;se<y.length;se++)for(var Te=0;4>Te;Te++)h.HEAPF32[V+k]=y[se][Te],k++;y=T}else y=vt;g.tb=y}else throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof y;return g}function He(y){if(!y)return vt;var g=Aa.toTypedArray();if(y.length){if(y.length===6||y.length===9)return ae(y,"HEAPF32",Kn),y.length===6&&h.HEAPF32.set(Fa,6+Kn/4),Kn;if(y.length===16)return g[0]=y[0],g[1]=y[1],g[2]=y[3],g[3]=y[4],g[4]=y[5],g[5]=y[7],g[6]=y[12],g[7]=y[13],g[8]=y[15],Kn;throw"invalid matrix size"}if(y.m11===void 0)throw"invalid matrix argument";return g[0]=y.m11,g[1]=y.m21,g[2]=y.m41,g[3]=y.m12,g[4]=y.m22,g[5]=y.m42,g[6]=y.m14,g[7]=y.m24,g[8]=y.m44,Kn}function ct(y){if(!y)return vt;var g=ko.toTypedArray();if(y.length){if(y.length!==16&&y.length!==6&&y.length!==9)throw"invalid matrix size";return y.length===16?ae(y,"HEAPF32",ds):(g.fill(0),g[0]=y[0],g[1]=y[1],g[3]=y[2],g[4]=y[3],g[5]=y[4],g[7]=y[5],g[10]=1,g[12]=y[6],g[13]=y[7],g[15]=y[8],y.length===6&&(g[12]=0,g[13]=0,g[15]=1),ds)}if(y.m11===void 0)throw"invalid matrix argument";return g[0]=y.m11,g[1]=y.m21,g[2]=y.m31,g[3]=y.m41,g[4]=y.m12,g[5]=y.m22,g[6]=y.m32,g[7]=y.m42,g[8]=y.m13,g[9]=y.m23,g[10]=y.m33,g[11]=y.m43,g[12]=y.m14,g[13]=y.m24,g[14]=y.m34,g[15]=y.m44,ds}function le(y,g){return ae(y,"HEAPF32",g||Gn)}function Je(y,g,T,k){var V=Pa.toTypedArray();return V[0]=y,V[1]=g,V[2]=T,V[3]=k,Gn}function xt(y){for(var g=new Float32Array(4),T=0;4>T;T++)g[T]=h.HEAPF32[y/4+T];return g}function gt(y,g){return ae(y,"HEAPF32",g||Ht)}function zr(y,g){return ae(y,"HEAPF32",g||ka)}function cr(){for(var y=0,g=0;g<arguments.length-1;g+=2)y+=arguments[g]*arguments[g+1];return y}function zs(y,g,T){for(var k=Array(y.length),V=0;V<T;V++)for(var se=0;se<T;se++){for(var Te=0,Ue=0;Ue<T;Ue++)Te+=y[T*V+Ue]*g[T*Ue+se];k[V*T+se]=Te}return k}function $s(y,g){for(var T=zs(g[0],g[1],y),k=2;k<g.length;)T=zs(T,g[k],y),k++;return T}h.Color=function(y,g,T,k){return k===void 0&&(k=1),h.Color4f(ye(y)/255,ye(g)/255,ye(T)/255,k)},h.ColorAsInt=function(y,g,T,k){return k===void 0&&(k=255),(ye(k)<<24|ye(y)<<16|ye(g)<<8|ye(T)<<0&268435455)>>>0},h.Color4f=function(y,g,T,k){return k===void 0&&(k=1),Float32Array.of(y,g,T,k)},Object.defineProperty(h,"TRANSPARENT",{get:function(){return h.Color4f(0,0,0,0)}}),Object.defineProperty(h,"BLACK",{get:function(){return h.Color4f(0,0,0,1)}}),Object.defineProperty(h,"WHITE",{get:function(){return h.Color4f(1,1,1,1)}}),Object.defineProperty(h,"RED",{get:function(){return h.Color4f(1,0,0,1)}}),Object.defineProperty(h,"GREEN",{get:function(){return h.Color4f(0,1,0,1)}}),Object.defineProperty(h,"BLUE",{get:function(){return h.Color4f(0,0,1,1)}}),Object.defineProperty(h,"YELLOW",{get:function(){return h.Color4f(1,1,0,1)}}),Object.defineProperty(h,"CYAN",{get:function(){return h.Color4f(0,1,1,1)}}),Object.defineProperty(h,"MAGENTA",{get:function(){return h.Color4f(1,0,1,1)}}),h.getColorComponents=function(y){return[Math.floor(255*y[0]),Math.floor(255*y[1]),Math.floor(255*y[2]),y[3]]},h.parseColorString=function(y,g){if(y=y.toLowerCase(),y.startsWith("#")){switch(g=255,y.length){case 9:g=parseInt(y.slice(7,9),16);case 7:var T=parseInt(y.slice(1,3),16),k=parseInt(y.slice(3,5),16),V=parseInt(y.slice(5,7),16);break;case 5:g=17*parseInt(y.slice(4,5),16);case 4:T=17*parseInt(y.slice(1,2),16),k=17*parseInt(y.slice(2,3),16),V=17*parseInt(y.slice(3,4),16)}return h.Color(T,k,V,g/255)}return y.startsWith("rgba")?(y=y.slice(5,-1),y=y.split(","),h.Color(+y[0],+y[1],+y[2],be(y[3]))):y.startsWith("rgb")?(y=y.slice(4,-1),y=y.split(","),h.Color(+y[0],+y[1],+y[2],be(y[3]))):y.startsWith("gray(")||y.startsWith("hsl")||!g||(y=g[y],y===void 0)?h.BLACK:y},h.multiplyByAlpha=function(y,g){return y=y.slice(),y[3]=Math.max(0,Math.min(y[3]*g,1)),y},h.Malloc=function(y,g){var T=h._malloc(g*y.BYTES_PER_ELEMENT);return{_ck:!0,length:g,byteOffset:T,Ib:null,subarray:function(k,V){return k=this.toTypedArray().subarray(k,V),k._ck=!0,k},toTypedArray:function(){return this.Ib&&this.Ib.length?this.Ib:(this.Ib=new y(h.HEAPU8.buffer,T,g),this.Ib._ck=!0,this.Ib)}}},h.Free=function(y){h._free(y.byteOffset),y.byteOffset=vt,y.toTypedArray=null,y.Ib=null};var Kn=vt,Aa,ds=vt,ko,Gn=vt,Pa,Br,Ht=vt,Fo,Zn=vt,Ra,ps=vt,Ia,Ma=vt,Do,Vs=vt,ql,ka=vt,Yl,Kl=vt,Fa=Float32Array.of(0,0,1),vt=0;h.onRuntimeInitialized=function(){function y(g,T,k,V,se,Te,Ue){Te||(Te=4*V.width,V.colorType===h.ColorType.RGBA_F16?Te*=2:V.colorType===h.ColorType.RGBA_F32&&(Te*=4));var nt=Te*V.height,et=se?se.byteOffset:h._malloc(nt);if(Ue?!g._readPixels(V,et,Te,T,k,Ue):!g._readPixels(V,et,Te,T,k))return se||h._free(et),null;if(se)return se.toTypedArray();switch(V.colorType){case h.ColorType.RGBA_8888:case h.ColorType.RGBA_F16:g=new Uint8Array(h.HEAPU8.buffer,et,nt).slice();break;case h.ColorType.RGBA_F32:g=new Float32Array(h.HEAPU8.buffer,et,nt).slice();break;default:return null}return h._free(et),g}Pa=h.Malloc(Float32Array,4),Gn=Pa.byteOffset,ko=h.Malloc(Float32Array,16),ds=ko.byteOffset,Aa=h.Malloc(Float32Array,9),Kn=Aa.byteOffset,ql=h.Malloc(Float32Array,12),ka=ql.byteOffset,Yl=h.Malloc(Float32Array,12),Kl=Yl.byteOffset,Br=h.Malloc(Float32Array,4),Ht=Br.byteOffset,Fo=h.Malloc(Float32Array,4),Zn=Fo.byteOffset,Ra=h.Malloc(Float32Array,3),ps=Ra.byteOffset,Ia=h.Malloc(Float32Array,3),Ma=Ia.byteOffset,Do=h.Malloc(Int32Array,4),Vs=Do.byteOffset,h.ColorSpace.SRGB=h.ColorSpace._MakeSRGB(),h.ColorSpace.DISPLAY_P3=h.ColorSpace._MakeDisplayP3(),h.ColorSpace.ADOBE_RGB=h.ColorSpace._MakeAdobeRGB(),h.GlyphRunFlags={IsWhiteSpace:h._GlyphRunFlags_isWhiteSpace},h.Path.MakeFromCmds=function(g){var T=ae(g,"HEAPF32"),k=h.Path._MakeFromCmds(T,g.length);return ve(T,g),k},h.Path.MakeFromVerbsPointsWeights=function(g,T,k){var V=ae(g,"HEAPU8"),se=ae(T,"HEAPF32"),Te=ae(k,"HEAPF32"),Ue=h.Path._MakeFromVerbsPointsWeights(V,g.length,se,T.length,Te,k&&k.length||0);return ve(V,g),ve(se,T),ve(Te,k),Ue},h.Path.prototype.addArc=function(g,T,k){return g=gt(g),this._addArc(g,T,k),this},h.Path.prototype.addCircle=function(g,T,k,V){return this._addCircle(g,T,k,!!V),this},h.Path.prototype.addOval=function(g,T,k){return k===void 0&&(k=1),g=gt(g),this._addOval(g,!!T,k),this},h.Path.prototype.addPath=function(){var g=Array.prototype.slice.call(arguments),T=g[0],k=!1;if(typeof g[g.length-1]=="boolean"&&(k=g.pop()),g.length===1)this._addPath(T,1,0,0,0,1,0,0,0,1,k);else if(g.length===2)g=g[1],this._addPath(T,g[0],g[1],g[2],g[3],g[4],g[5],g[6]||0,g[7]||0,g[8]||1,k);else if(g.length===7||g.length===10)this._addPath(T,g[1],g[2],g[3],g[4],g[5],g[6],g[7]||0,g[8]||0,g[9]||1,k);else return null;return this},h.Path.prototype.addPoly=function(g,T){var k=ae(g,"HEAPF32");return this._addPoly(k,g.length/2,T),ve(k,g),this},h.Path.prototype.addRect=function(g,T){return g=gt(g),this._addRect(g,!!T),this},h.Path.prototype.addRRect=function(g,T){return g=zr(g),this._addRRect(g,!!T),this},h.Path.prototype.addVerbsPointsWeights=function(g,T,k){var V=ae(g,"HEAPU8"),se=ae(T,"HEAPF32"),Te=ae(k,"HEAPF32");this._addVerbsPointsWeights(V,g.length,se,T.length,Te,k&&k.length||0),ve(V,g),ve(se,T),ve(Te,k)},h.Path.prototype.arc=function(g,T,k,V,se,Te){return g=h.LTRBRect(g-k,T-k,g+k,T+k),se=(se-V)/Math.PI*180-360*!!Te,Te=new h.Path,Te.addArc(g,V/Math.PI*180,se),this.addPath(Te,!0),Te.delete(),this},h.Path.prototype.arcToOval=function(g,T,k,V){return g=gt(g),this._arcToOval(g,T,k,V),this},h.Path.prototype.arcToRotated=function(g,T,k,V,se,Te,Ue){return this._arcToRotated(g,T,k,!!V,!!se,Te,Ue),this},h.Path.prototype.arcToTangent=function(g,T,k,V,se){return this._arcToTangent(g,T,k,V,se),this},h.Path.prototype.close=function(){return this._close(),this},h.Path.prototype.conicTo=function(g,T,k,V,se){return this._conicTo(g,T,k,V,se),this},h.Path.prototype.computeTightBounds=function(g){this._computeTightBounds(Ht);var T=Br.toTypedArray();return g?(g.set(T),g):T.slice()},h.Path.prototype.cubicTo=function(g,T,k,V,se,Te){return this._cubicTo(g,T,k,V,se,Te),this},h.Path.prototype.dash=function(g,T,k){return this._dash(g,T,k)?this:null},h.Path.prototype.getBounds=function(g){this._getBounds(Ht);var T=Br.toTypedArray();return g?(g.set(T),g):T.slice()},h.Path.prototype.lineTo=function(g,T){return this._lineTo(g,T),this},h.Path.prototype.moveTo=function(g,T){return this._moveTo(g,T),this},h.Path.prototype.offset=function(g,T){return this._transform(1,0,g,0,1,T,0,0,1),this},h.Path.prototype.quadTo=function(g,T,k,V){return this._quadTo(g,T,k,V),this},h.Path.prototype.rArcTo=function(g,T,k,V,se,Te,Ue){return this._rArcTo(g,T,k,V,se,Te,Ue),this},h.Path.prototype.rConicTo=function(g,T,k,V,se){return this._rConicTo(g,T,k,V,se),this},h.Path.prototype.rCubicTo=function(g,T,k,V,se,Te){return this._rCubicTo(g,T,k,V,se,Te),this},h.Path.prototype.rLineTo=function(g,T){return this._rLineTo(g,T),this},h.Path.prototype.rMoveTo=function(g,T){return this._rMoveTo(g,T),this},h.Path.prototype.rQuadTo=function(g,T,k,V){return this._rQuadTo(g,T,k,V),this},h.Path.prototype.stroke=function(g){return g=g||{},g.width=g.width||1,g.miter_limit=g.miter_limit||4,g.cap=g.cap||h.StrokeCap.Butt,g.join=g.join||h.StrokeJoin.Miter,g.precision=g.precision||1,this._stroke(g)?this:null},h.Path.prototype.transform=function(){if(arguments.length===1){var g=arguments[0];this._transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6]||0,g[7]||0,g[8]||1)}else if(arguments.length===6||arguments.length===9)g=arguments,this._transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6]||0,g[7]||0,g[8]||1);else throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;return this},h.Path.prototype.trim=function(g,T,k){return this._trim(g,T,!!k)?this:null},h.Image.prototype.encodeToBytes=function(g,T){var k=h.pc();return g=g||h.ImageFormat.PNG,T=T||100,k?this._encodeToBytes(g,T,k):this._encodeToBytes(g,T)},h.Image.prototype.makeShaderCubic=function(g,T,k,V,se){return se=He(se),this._makeShaderCubic(g,T,k,V,se)},h.Image.prototype.makeShaderOptions=function(g,T,k,V,se){return se=He(se),this._makeShaderOptions(g,T,k,V,se)},h.Image.prototype.readPixels=function(g,T,k,V,se){return y(this,g,T,k,V,se,h.pc())},h.SinglePagePDF.prototype.export=function(){return this._export()},h.Canvas.prototype.setMatrix=function(g,T,k,V,se,Te,Ue,nt,et){this._setMatrix(g,T,k,V,se,Te,Ue,nt,et)},h.Canvas.prototype.clear=function(g){g=le(g),this._clear(g)},h.Canvas.prototype.clipRRect=function(g,T,k){g=zr(g),this._clipRRect(g,T,k)},h.Canvas.prototype.clipRect=function(g,T,k){g=gt(g),this._clipRect(g,T,k)},h.Canvas.prototype.concat=function(g){g=ct(g),this._concat(g)},h.Canvas.prototype.drawArc=function(g,T,k,V,se){g=gt(g),this._drawArc(g,T,k,V,se)},h.Canvas.prototype.drawAtlas=function(g,T,k,V,se,Te,Ue){if(g&&V&&T&&k&&T.length===k.length){se||(se=h.BlendMode.SrcOver);var nt=ae(T,"HEAPF32"),et=ae(k,"HEAPF32"),bt=k.length/4,_t=ae(Q(Te),"HEAPU32");if(Ue&&"B"in Ue&&"C"in Ue)this._drawAtlasCubic(g,et,nt,_t,bt,se,Ue.B,Ue.C,V);else{let W=h.FilterMode.Linear,Ee=h.MipmapMode.None;Ue&&(W=Ue.filter,"mipmap"in Ue&&(Ee=Ue.mipmap)),this._drawAtlasOptions(g,et,nt,_t,bt,se,W,Ee,V)}ve(nt,T),ve(et,k),ve(_t,Te)}},h.Canvas.prototype.drawCircle=function(g,T,k,V){this._drawCircle(g,T,k,V)},h.Canvas.prototype.drawColor=function(g,T){g=le(g),T!==void 0?this._drawColor(g,T):this._drawColor(g)},h.Canvas.prototype.drawColorInt=function(g,T){this._drawColorInt(g,T||h.BlendMode.SrcOver)},h.Canvas.prototype.drawColorComponents=function(g,T,k,V,se){g=Je(g,T,k,V),se!==void 0?this._drawColor(g,se):this._drawColor(g)},h.Canvas.prototype.drawDRRect=function(g,T,k){g=zr(g,ka),T=zr(T,Kl),this._drawDRRect(g,T,k)},h.Canvas.prototype.drawImage=function(g,T,k,V){this._drawImage(g,T,k,V||null)},h.Canvas.prototype.drawImageCubic=function(g,T,k,V,se,Te){this._drawImageCubic(g,T,k,V,se,Te||null)},h.Canvas.prototype.drawImageOptions=function(g,T,k,V,se,Te){this._drawImageOptions(g,T,k,V,se,Te||null)},h.Canvas.prototype.drawImageNine=function(g,T,k,V,se){T=ae(T,"HEAP32",Vs),k=gt(k),this._drawImageNine(g,T,k,V,se||null)},h.Canvas.prototype.drawImageRect=function(g,T,k,V,se){gt(T,Ht),gt(k,Zn),this._drawImageRect(g,Ht,Zn,V,!!se)},h.Canvas.prototype.drawImageRectCubic=function(g,T,k,V,se,Te){gt(T,Ht),gt(k,Zn),this._drawImageRectCubic(g,Ht,Zn,V,se,Te||null)},h.Canvas.prototype.drawImageRectOptions=function(g,T,k,V,se,Te){gt(T,Ht),gt(k,Zn),this._drawImageRectOptions(g,Ht,Zn,V,se,Te||null)},h.Canvas.prototype.drawLine=function(g,T,k,V,se){this._drawLine(g,T,k,V,se)},h.Canvas.prototype.drawOval=function(g,T){g=gt(g),this._drawOval(g,T)},h.Canvas.prototype.drawPaint=function(g){this._drawPaint(g)},h.Canvas.prototype.drawParagraph=function(g,T,k){this._drawParagraph(g,T,k)},h.Canvas.prototype.drawPatch=function(g,T,k,V,se){if(24>g.length)throw"Need 12 cubic points";if(T&&4>T.length)throw"Need 4 colors";if(k&&8>k.length)throw"Need 4 shader coordinates";const Te=ae(g,"HEAPF32"),Ue=T?ae(Q(T),"HEAPU32"):vt,nt=k?ae(k,"HEAPF32"):vt;V||(V=h.BlendMode.Modulate),this._drawPatch(Te,Ue,nt,V,se),ve(nt,k),ve(Ue,T),ve(Te,g)},h.Canvas.prototype.drawPath=function(g,T){this._drawPath(g,T)},h.Canvas.prototype.drawPicture=function(g){this._drawPicture(g)},h.Canvas.prototype.drawPoints=function(g,T,k){var V=ae(T,"HEAPF32");this._drawPoints(g,V,T.length/2,k),ve(V,T)},h.Canvas.prototype.drawRRect=function(g,T){g=zr(g),this._drawRRect(g,T)},h.Canvas.prototype.drawRect=function(g,T){g=gt(g),this._drawRect(g,T)},h.Canvas.prototype.drawRect4f=function(g,T,k,V,se){this._drawRect4f(g,T,k,V,se)},h.Canvas.prototype.drawShadow=function(g,T,k,V,se,Te,Ue){var nt=ae(se,"HEAPF32"),et=ae(Te,"HEAPF32");T=ae(T,"HEAPF32",ps),k=ae(k,"HEAPF32",Ma),this._drawShadow(g,T,k,V,nt,et,Ue),ve(nt,se),ve(et,Te)},h.getShadowLocalBounds=function(g,T,k,V,se,Te,Ue){return g=He(g),k=ae(k,"HEAPF32",ps),V=ae(V,"HEAPF32",Ma),this._getShadowLocalBounds(g,T,k,V,se,Te,Ht)?(T=Br.toTypedArray(),Ue?(Ue.set(T),Ue):T.slice()):null},h.Canvas.prototype.drawTextBlob=function(g,T,k,V){this._drawTextBlob(g,T,k,V)},h.Canvas.prototype.drawVertices=function(g,T,k){this._drawVertices(g,T,k)},h.Canvas.prototype.getDeviceClipBounds=function(g){this._getDeviceClipBounds(Vs);var T=Do.toTypedArray();return g?g.set(T):g=T.slice(),g},h.Canvas.prototype.getLocalToDevice=function(){this._getLocalToDevice(ds);for(var g=ds,T=Array(16),k=0;16>k;k++)T[k]=h.HEAPF32[g/4+k];return T},h.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(Kn);for(var g=Array(9),T=0;9>T;T++)g[T]=h.HEAPF32[Kn/4+T];return g},h.Canvas.prototype.makeSurface=function(g){return g=this._makeSurface(g),g.Cb=this.Cb,g},h.Canvas.prototype.readPixels=function(g,T,k,V,se){return y(this,g,T,k,V,se)},h.Canvas.prototype.saveLayer=function(g,T,k,V){return T=gt(T),this._saveLayer(g||null,T,k||null,V||0)},h.Canvas.prototype.writePixels=function(g,T,k,V,se,Te,Ue,nt){if(g.byteLength%(T*k))throw"pixels length must be a multiple of the srcWidth * srcHeight";var et=g.byteLength/(T*k);Te=Te||h.AlphaType.Unpremul,Ue=Ue||h.ColorType.RGBA_8888,nt=nt||h.ColorSpace.SRGB;var bt=et*T;return et=ae(g,"HEAPU8"),T=this._writePixels({width:T,height:k,colorType:Ue,alphaType:Te,colorSpace:nt},et,bt,V,se),ve(et,g),T},h.ColorFilter.MakeBlend=function(g,T,k){return g=le(g),k=k||h.ColorSpace.SRGB,h.ColorFilter._MakeBlend(g,T,k)},h.ColorFilter.MakeMatrix=function(g){if(!g||g.length!==20)throw"invalid color matrix";var T=ae(g,"HEAPF32"),k=h.ColorFilter._makeMatrix(T);return ve(T,g),k},h.ContourMeasure.prototype.getPosTan=function(g,T){return this._getPosTan(g,Ht),g=Br.toTypedArray(),T?(T.set(g),T):g.slice()},h.ImageFilter.prototype.getOutputBounds=function(g,T,k){return g=gt(g,Ht),T=He(T),this._getOutputBounds(g,T,Vs),T=Do.toTypedArray(),k?(k.set(T),k):T.slice()},h.ImageFilter.MakeDropShadow=function(g,T,k,V,se,Te){return se=le(se,Gn),h.ImageFilter._MakeDropShadow(g,T,k,V,se,Te)},h.ImageFilter.MakeDropShadowOnly=function(g,T,k,V,se,Te){return se=le(se,Gn),h.ImageFilter._MakeDropShadowOnly(g,T,k,V,se,Te)},h.ImageFilter.MakeImage=function(g,T,k,V){if(k=gt(k,Ht),V=gt(V,Zn),"B"in T&&"C"in T)return h.ImageFilter._MakeImageCubic(g,T.B,T.C,k,V);const se=T.filter;let Te=h.MipmapMode.None;return"mipmap"in T&&(Te=T.mipmap),h.ImageFilter._MakeImageOptions(g,se,Te,k,V)},h.ImageFilter.MakeMatrixTransform=function(g,T,k){if(g=He(g),"B"in T&&"C"in T)return h.ImageFilter._MakeMatrixTransformCubic(g,T.B,T.C,k);const V=T.filter;let se=h.MipmapMode.None;return"mipmap"in T&&(se=T.mipmap),h.ImageFilter._MakeMatrixTransformOptions(g,V,se,k)},h.Paint.prototype.getColor=function(){return this._getColor(Gn),xt(Gn)},h.Paint.prototype.setColor=function(g,T){T=T||null,g=le(g),this._setColor(g,T)},h.Paint.prototype.setColorComponents=function(g,T,k,V,se){se=se||null,g=Je(g,T,k,V),this._setColor(g,se)},h.Path.prototype.getPoint=function(g,T){return this._getPoint(g,Ht),g=Br.toTypedArray(),T?(T[0]=g[0],T[1]=g[1],T):g.slice(0,2)},h.Picture.prototype.makeShader=function(g,T,k,V,se){return V=He(V),se=gt(se),this._makeShader(g,T,k,V,se)},h.Picture.prototype.cullRect=function(g){this._cullRect(Ht);var T=Br.toTypedArray();return g?(g.set(T),g):T.slice()},h.PictureRecorder.prototype.beginRecording=function(g,T){return g=gt(g),this._beginRecording(g,!!T)},h.Surface.prototype.getCanvas=function(){var g=this._getCanvas();return g.Cb=this.Cb,g},h.Surface.prototype.makeImageSnapshot=function(g){return g=ae(g,"HEAP32",Vs),this._makeImageSnapshot(g)},h.Surface.prototype.makeSurface=function(g){return g=this._makeSurface(g),g.Cb=this.Cb,g},h.Surface.prototype.Hc=function(g,T){return this.Xb||(this.Xb=this.getCanvas()),requestAnimationFrame((function(){g(this.Xb),this.flush(T)}).bind(this))},h.Surface.prototype.requestAnimationFrame||(h.Surface.prototype.requestAnimationFrame=h.Surface.prototype.Hc),h.Surface.prototype.Dc=function(g,T){this.Xb||(this.Xb=this.getCanvas()),requestAnimationFrame((function(){g(this.Xb),this.flush(T),this.dispose()}).bind(this))},h.Surface.prototype.drawOnce||(h.Surface.prototype.drawOnce=h.Surface.prototype.Dc),h.PathEffect.MakeDash=function(g,T){if(T||(T=0),!g.length||g.length%2===1)throw"Intervals array must have even length";var k=ae(g,"HEAPF32");return T=h.PathEffect._MakeDash(k,g.length,T),ve(k,g),T},h.PathEffect.MakeLine2D=function(g,T){return T=He(T),h.PathEffect._MakeLine2D(g,T)},h.PathEffect.MakePath2D=function(g,T){return g=He(g),h.PathEffect._MakePath2D(g,T)},h.Shader.MakeColor=function(g,T){return T=T||null,g=le(g),h.Shader._MakeColor(g,T)},h.Shader.Blend=h.Shader.MakeBlend,h.Shader.Color=h.Shader.MakeColor,h.Shader.MakeLinearGradient=function(g,T,k,V,se,Te,Ue,nt){nt=nt||null;var et=Ve(k),bt=ae(V,"HEAPF32");Ue=Ue||0,Te=He(Te);var _t=Br.toTypedArray();return _t.set(g),_t.set(T,2),g=h.Shader._MakeLinearGradient(Ht,et.tb,et.colorType,bt,et.count,se,Ue,Te,nt),ve(et.tb,k),V&&ve(bt,V),g},h.Shader.MakeRadialGradient=function(g,T,k,V,se,Te,Ue,nt){nt=nt||null;var et=Ve(k),bt=ae(V,"HEAPF32");return Ue=Ue||0,Te=He(Te),g=h.Shader._MakeRadialGradient(g[0],g[1],T,et.tb,et.colorType,bt,et.count,se,Ue,Te,nt),ve(et.tb,k),V&&ve(bt,V),g},h.Shader.MakeSweepGradient=function(g,T,k,V,se,Te,Ue,nt,et,bt){bt=bt||null;var _t=Ve(k),W=ae(V,"HEAPF32");return Ue=Ue||0,nt=nt||0,et=et||360,Te=He(Te),g=h.Shader._MakeSweepGradient(g,T,_t.tb,_t.colorType,W,_t.count,se,nt,et,Ue,Te,bt),ve(_t.tb,k),V&&ve(W,V),g},h.Shader.MakeTwoPointConicalGradient=function(g,T,k,V,se,Te,Ue,nt,et,bt){bt=bt||null;var _t=Ve(se),W=ae(Te,"HEAPF32");et=et||0,nt=He(nt);var Ee=Br.toTypedArray();return Ee.set(g),Ee.set(k,2),g=h.Shader._MakeTwoPointConicalGradient(Ht,T,V,_t.tb,_t.colorType,W,_t.count,Ue,et,nt,bt),ve(_t.tb,se),Te&&ve(W,Te),g},h.Vertices.prototype.bounds=function(g){this._bounds(Ht);var T=Br.toTypedArray();return g?(g.set(T),g):T.slice()},h.ib&&h.ib.forEach(function(g){g()})},h.computeTonalColors=function(y){var g=ae(y.ambient,"HEAPF32"),T=ae(y.spot,"HEAPF32");this._computeTonalColors(g,T);var k={ambient:xt(g),spot:xt(T)};return ve(g,y.ambient),ve(T,y.spot),k},h.LTRBRect=function(y,g,T,k){return Float32Array.of(y,g,T,k)},h.XYWHRect=function(y,g,T,k){return Float32Array.of(y,g,y+T,g+k)},h.LTRBiRect=function(y,g,T,k){return Int32Array.of(y,g,T,k)},h.XYWHiRect=function(y,g,T,k){return Int32Array.of(y,g,y+T,g+k)},h.RRectXY=function(y,g,T){return Float32Array.of(y[0],y[1],y[2],y[3],g,T,g,T,g,T,g,T)},h.MakeAnimatedImageFromEncoded=function(y){y=new Uint8Array(y);var g=h._malloc(y.byteLength);return h.HEAPU8.set(y,g),(y=h._decodeAnimatedImage(g,y.byteLength))?y:null},h.MakeImageFromEncoded=function(y){y=new Uint8Array(y);var g=h._malloc(y.byteLength);return h.HEAPU8.set(y,g),(y=h._decodeImage(g,y.byteLength))?y:null};var Ws=null;h.MakeImageFromCanvasImageSource=function(y){var g=y.width,T=y.height;Ws||(Ws=document.createElement("canvas")),Ws.width=g,Ws.height=T;var k=Ws.getContext("2d",{willReadFrequently:!0});return k.drawImage(y,0,0),y=k.getImageData(0,0,g,T),h.MakeImage({width:g,height:T,alphaType:h.AlphaType.Unpremul,colorType:h.ColorType.RGBA_8888,colorSpace:h.ColorSpace.SRGB},y.data,4*g)},h.MakeImage=function(y,g,T){var k=h._malloc(g.length);return h.HEAPU8.set(g,k),h._MakeImage(y,k,g.length,T)},h.MakeVertices=function(y,g,T,k,V,se){var Te=V&&V.length||0,Ue=0;return T&&T.length&&(Ue|=1),k&&k.length&&(Ue|=2),se===void 0||se||(Ue|=4),y=new h._VerticesBuilder(y,g.length/2,Te,Ue),ae(g,"HEAPF32",y.positions()),y.texCoords()&&ae(T,"HEAPF32",y.texCoords()),y.colors()&&ae(Q(k),"HEAPU32",y.colors()),y.indices()&&ae(V,"HEAPU16",y.indices()),y.detach()},function(y){y.ib=y.ib||[],y.ib.push(function(){y.MakeSinglePagePDF=function(g,{width:T,height:k}){return y.SinglePagePDF._makeSinglePagePDF(T,k)}})}(a),h.Matrix={},h.Matrix.identity=function(){return C(3)},h.Matrix.invert=function(y){var g=y[0]*y[4]*y[8]+y[1]*y[5]*y[6]+y[2]*y[3]*y[7]-y[2]*y[4]*y[6]-y[1]*y[3]*y[8]-y[0]*y[5]*y[7];return g?[(y[4]*y[8]-y[5]*y[7])/g,(y[2]*y[7]-y[1]*y[8])/g,(y[1]*y[5]-y[2]*y[4])/g,(y[5]*y[6]-y[3]*y[8])/g,(y[0]*y[8]-y[2]*y[6])/g,(y[2]*y[3]-y[0]*y[5])/g,(y[3]*y[7]-y[4]*y[6])/g,(y[1]*y[6]-y[0]*y[7])/g,(y[0]*y[4]-y[1]*y[3])/g]:null},h.Matrix.mapPoints=function(y,g){for(var T=0;T<g.length;T+=2){var k=g[T],V=g[T+1],se=y[6]*k+y[7]*V+y[8],Te=y[3]*k+y[4]*V+y[5];g[T]=(y[0]*k+y[1]*V+y[2])/se,g[T+1]=Te/se}return g},h.Matrix.multiply=function(){return $s(3,arguments)},h.Matrix.rotated=function(y,g,T){g=g||0,T=T||0;var k=Math.sin(y);return y=Math.cos(y),[y,-k,cr(k,T,1-y,g),k,y,cr(-k,g,1-y,T),0,0,1]},h.Matrix.scaled=function(y,g,T,k){T=T||0,k=k||0;var V=w([y,g],C(3),3,0,1);return w([T-y*T,k-g*k],V,3,2,0)},h.Matrix.skewed=function(y,g,T,k){T=T||0,k=k||0;var V=w([y,g],C(3),3,1,-1);return w([-y*T,-g*k],V,3,2,0)},h.Matrix.translated=function(y,g){return w(arguments,C(3),3,2,0)},h.Vector={},h.Vector.dot=function(y,g){return y.map(function(T,k){return T*g[k]}).reduce(function(T,k){return T+k})},h.Vector.lengthSquared=function(y){return h.Vector.dot(y,y)},h.Vector.length=function(y){return Math.sqrt(h.Vector.lengthSquared(y))},h.Vector.mulScalar=function(y,g){return y.map(function(T){return T*g})},h.Vector.add=function(y,g){return y.map(function(T,k){return T+g[k]})},h.Vector.sub=function(y,g){return y.map(function(T,k){return T-g[k]})},h.Vector.dist=function(y,g){return h.Vector.length(h.Vector.sub(y,g))},h.Vector.normalize=function(y){return h.Vector.mulScalar(y,1/h.Vector.length(y))},h.Vector.cross=function(y,g){return[y[1]*g[2]-y[2]*g[1],y[2]*g[0]-y[0]*g[2],y[0]*g[1]-y[1]*g[0]]},h.M44={},h.M44.identity=function(){return C(4)},h.M44.translated=function(y){return w(y,C(4),4,3,0)},h.M44.scaled=function(y){return w(y,C(4),4,0,1)},h.M44.rotated=function(y,g){return h.M44.rotatedUnitSinCos(h.Vector.normalize(y),Math.sin(g),Math.cos(g))},h.M44.rotatedUnitSinCos=function(y,g,T){var k=y[0],V=y[1];y=y[2];var se=1-T;return[se*k*k+T,se*k*V-g*y,se*k*y+g*V,0,se*k*V+g*y,se*V*V+T,se*V*y-g*k,0,se*k*y-g*V,se*V*y+g*k,se*y*y+T,0,0,0,0,1]},h.M44.lookat=function(y,g,T){g=h.Vector.normalize(h.Vector.sub(g,y)),T=h.Vector.normalize(T),T=h.Vector.normalize(h.Vector.cross(g,T));var k=h.M44.identity();return w(T,k,4,0,0),w(h.Vector.cross(T,g),k,4,1,0),w(h.Vector.mulScalar(g,-1),k,4,2,0),w(y,k,4,3,0),y=h.M44.invert(k),y===null?h.M44.identity():y},h.M44.perspective=function(y,g,T){var k=1/(g-y);return T/=2,T=Math.cos(T)/Math.sin(T),[T,0,0,0,0,T,0,0,0,0,(g+y)*k,2*g*y*k,0,0,-1,1]},h.M44.rc=function(y,g,T){return y[4*g+T]},h.M44.multiply=function(){return $s(4,arguments)},h.M44.invert=function(y){var g=y[0],T=y[4],k=y[8],V=y[12],se=y[1],Te=y[5],Ue=y[9],nt=y[13],et=y[2],bt=y[6],_t=y[10],W=y[14],Ee=y[3],wt=y[7],Ut=y[11];y=y[15];var rr=g*Te-T*se,$r=g*Ue-k*se,tn=g*nt-V*se,xr=T*Ue-k*Te,Ie=T*nt-V*Te,P=k*nt-V*Ue,$=et*wt-bt*Ee,de=et*Ut-_t*Ee,Se=et*y-W*Ee,Pe=bt*Ut-_t*wt,Re=bt*y-W*wt,Ye=_t*y-W*Ut,jt=rr*Ye-$r*Re+tn*Pe+xr*Se-Ie*de+P*$,zt=1/jt;return jt===0||zt===1/0?null:(rr*=zt,$r*=zt,tn*=zt,xr*=zt,Ie*=zt,P*=zt,$*=zt,de*=zt,Se*=zt,Pe*=zt,Re*=zt,Ye*=zt,g=[Te*Ye-Ue*Re+nt*Pe,Ue*Se-se*Ye-nt*de,se*Re-Te*Se+nt*$,Te*de-se*Pe-Ue*$,k*Re-T*Ye-V*Pe,g*Ye-k*Se+V*de,T*Se-g*Re-V*$,g*Pe-T*de+k*$,wt*P-Ut*Ie+y*xr,Ut*tn-Ee*P-y*$r,Ee*Ie-wt*tn+y*rr,wt*$r-Ee*xr-Ut*rr,_t*Ie-bt*P-W*xr,et*P-_t*tn+W*$r,bt*tn-et*Ie-W*rr,et*xr-bt*$r+_t*rr],g.every(function(Pn){return!isNaN(Pn)&&Pn!==1/0&&Pn!==-1/0})?g:null)},h.M44.transpose=function(y){return[y[0],y[4],y[8],y[12],y[1],y[5],y[9],y[13],y[2],y[6],y[10],y[14],y[3],y[7],y[11],y[15]]},h.M44.mustInvert=function(y){if(y=h.M44.invert(y),y===null)throw"Matrix not invertible";return y},h.M44.setupCamera=function(y,g,T){var k=h.M44.lookat(T.eye,T.coa,T.up);return T=h.M44.perspective(T.near,T.far,T.angle),g=[(y[2]-y[0])/2,(y[3]-y[1])/2,g],y=h.M44.multiply(h.M44.translated([(y[0]+y[2])/2,(y[1]+y[3])/2,0]),h.M44.scaled(g)),h.M44.multiply(y,T,k,h.M44.mustInvert(y))},h.ColorMatrix={},h.ColorMatrix.identity=function(){var y=new Float32Array(20);return y[0]=1,y[6]=1,y[12]=1,y[18]=1,y},h.ColorMatrix.scaled=function(y,g,T,k){var V=new Float32Array(20);return V[0]=y,V[6]=g,V[12]=T,V[18]=k,V};var Zl=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];h.ColorMatrix.rotated=function(y,g,T){var k=h.ColorMatrix.identity();return y=Zl[y],k[y[0]]=T,k[y[1]]=g,k[y[2]]=-g,k[y[3]]=T,k},h.ColorMatrix.postTranslate=function(y,g,T,k,V){return y[4]+=g,y[9]+=T,y[14]+=k,y[19]+=V,y},h.ColorMatrix.concat=function(y,g){for(var T=new Float32Array(20),k=0,V=0;20>V;V+=5){for(var se=0;4>se;se++)T[k++]=y[V]*g[se]+y[V+1]*g[se+5]+y[V+2]*g[se+10]+y[V+3]*g[se+15];T[k++]=y[V]*g[4]+y[V+1]*g[9]+y[V+2]*g[14]+y[V+3]*g[19]+y[V+4]}return T},function(y){y.ib=y.ib||[],y.ib.push(function(){function g(W){return W&&(W.dir=W.dir===0?y.TextDirection.RTL:y.TextDirection.LTR),W}function T(W){if(!W||!W.length)return[];for(var Ee=[],wt=0;wt<W.length;wt+=5){var Ut=y.LTRBRect(W[wt],W[wt+1],W[wt+2],W[wt+3]),rr=y.TextDirection.LTR;W[wt+4]===0&&(rr=y.TextDirection.RTL),Ee.push({rect:Ut,dir:rr})}return y._free(W.byteOffset),Ee}function k(W){return W=W||{},W.weight===void 0&&(W.weight=y.FontWeight.Normal),W.width=W.width||y.FontWidth.Normal,W.slant=W.slant||y.FontSlant.Upright,W}function V(W){if(!W||!W.length)return vt;for(var Ee=[],wt=0;wt<W.length;wt++){var Ut=se(W[wt]);Ee.push(Ut)}return ae(Ee,"HEAPU32")}function se(W){if(nt[W])return nt[W];var Ee=Dr(W)+1,wt=y._malloc(Ee);return wn(W,ee,wt,Ee),nt[W]=wt}function Te(W){if(W._colorPtr=le(W.color),W._foregroundColorPtr=vt,W._backgroundColorPtr=vt,W._decorationColorPtr=vt,W.foregroundColor&&(W._foregroundColorPtr=le(W.foregroundColor,et)),W.backgroundColor&&(W._backgroundColorPtr=le(W.backgroundColor,bt)),W.decorationColor&&(W._decorationColorPtr=le(W.decorationColor,_t)),Array.isArray(W.fontFamilies)&&W.fontFamilies.length?(W._fontFamiliesPtr=V(W.fontFamilies),W._fontFamiliesLen=W.fontFamilies.length):(W._fontFamiliesPtr=vt,W._fontFamiliesLen=0),W.locale){var Ee=W.locale;W._localePtr=se(Ee),W._localeLen=Dr(Ee)+1}else W._localePtr=vt,W._localeLen=0;if(Array.isArray(W.shadows)&&W.shadows.length){Ee=W.shadows;var wt=Ee.map(function(Ie){return Ie.color||y.BLACK}),Ut=Ee.map(function(Ie){return Ie.blurRadius||0});W._shadowLen=Ee.length;for(var rr=y._malloc(8*Ee.length),$r=rr/4,tn=0;tn<Ee.length;tn++){var xr=Ee[tn].offset||[0,0];y.HEAPF32[$r]=xr[0],y.HEAPF32[$r+1]=xr[1],$r+=2}W._shadowColorsPtr=Ve(wt).tb,W._shadowOffsetsPtr=rr,W._shadowBlurRadiiPtr=ae(Ut,"HEAPF32")}else W._shadowLen=0,W._shadowColorsPtr=vt,W._shadowOffsetsPtr=vt,W._shadowBlurRadiiPtr=vt;Array.isArray(W.fontFeatures)&&W.fontFeatures.length?(Ee=W.fontFeatures,wt=Ee.map(function(Ie){return Ie.name}),Ut=Ee.map(function(Ie){return Ie.value}),W._fontFeatureLen=Ee.length,W._fontFeatureNamesPtr=V(wt),W._fontFeatureValuesPtr=ae(Ut,"HEAPU32")):(W._fontFeatureLen=0,W._fontFeatureNamesPtr=vt,W._fontFeatureValuesPtr=vt),Array.isArray(W.fontVariations)&&W.fontVariations.length?(Ee=W.fontVariations,wt=Ee.map(function(Ie){return Ie.axis}),Ut=Ee.map(function(Ie){return Ie.value}),W._fontVariationLen=Ee.length,W._fontVariationAxesPtr=V(wt),W._fontVariationValuesPtr=ae(Ut,"HEAPF32")):(W._fontVariationLen=0,W._fontVariationAxesPtr=vt,W._fontVariationValuesPtr=vt)}function Ue(W){y._free(W._fontFamiliesPtr),y._free(W._shadowColorsPtr),y._free(W._shadowOffsetsPtr),y._free(W._shadowBlurRadiiPtr),y._free(W._fontFeatureNamesPtr),y._free(W._fontFeatureValuesPtr),y._free(W._fontVariationAxesPtr),y._free(W._fontVariationValuesPtr)}y.Paragraph.prototype.getRectsForRange=function(W,Ee,wt,Ut){return W=this._getRectsForRange(W,Ee,wt,Ut),T(W)},y.Paragraph.prototype.getRectsForPlaceholders=function(){var W=this._getRectsForPlaceholders();return T(W)},y.Paragraph.prototype.getGlyphInfoAt=function(W){return g(this._getGlyphInfoAt(W))},y.Paragraph.prototype.getClosestGlyphInfoAtCoordinate=function(W,Ee){return g(this._getClosestGlyphInfoAtCoordinate(W,Ee))},y.TypefaceFontProvider.prototype.registerFont=function(W,Ee){if(W=y.Typeface.MakeFreeTypeFaceFromData(W),!W)return null;Ee=se(Ee),this._registerFont(W,Ee)},y.ParagraphStyle=function(W){if(W.disableHinting=W.disableHinting||!1,W.ellipsis){var Ee=W.ellipsis;W._ellipsisPtr=se(Ee),W._ellipsisLen=Dr(Ee)+1}else W._ellipsisPtr=vt,W._ellipsisLen=0;return W.heightMultiplier==null&&(W.heightMultiplier=-1),W.maxLines=W.maxLines||0,W.replaceTabCharacters=W.replaceTabCharacters||!1,Ee=(Ee=W.strutStyle)||{},Ee.strutEnabled=Ee.strutEnabled||!1,Ee.strutEnabled&&Array.isArray(Ee.fontFamilies)&&Ee.fontFamilies.length?(Ee._fontFamiliesPtr=V(Ee.fontFamilies),Ee._fontFamiliesLen=Ee.fontFamilies.length):(Ee._fontFamiliesPtr=vt,Ee._fontFamiliesLen=0),Ee.fontStyle=k(Ee.fontStyle),Ee.fontSize==null&&(Ee.fontSize=-1),Ee.heightMultiplier==null&&(Ee.heightMultiplier=-1),Ee.halfLeading=Ee.halfLeading||!1,Ee.leading=Ee.leading||0,Ee.forceStrutHeight=Ee.forceStrutHeight||!1,W.strutStyle=Ee,W.textAlign=W.textAlign||y.TextAlign.Start,W.textDirection=W.textDirection||y.TextDirection.LTR,W.textHeightBehavior=W.textHeightBehavior||y.TextHeightBehavior.All,W.textStyle=y.TextStyle(W.textStyle),W.applyRoundingHack=W.applyRoundingHack!==!1,W},y.TextStyle=function(W){return W.color||(W.color=y.BLACK),W.decoration=W.decoration||0,W.decorationThickness=W.decorationThickness||0,W.decorationStyle=W.decorationStyle||y.DecorationStyle.Solid,W.textBaseline=W.textBaseline||y.TextBaseline.Alphabetic,W.fontSize==null&&(W.fontSize=-1),W.letterSpacing=W.letterSpacing||0,W.wordSpacing=W.wordSpacing||0,W.heightMultiplier==null&&(W.heightMultiplier=-1),W.halfLeading=W.halfLeading||!1,W.fontStyle=k(W.fontStyle),W};var nt={},et=y._malloc(16),bt=y._malloc(16),_t=y._malloc(16);y.ParagraphBuilder.Make=function(W,Ee){return Te(W.textStyle),Ee=y.ParagraphBuilder._Make(W,Ee),Ue(W.textStyle),Ee},y.ParagraphBuilder.MakeFromFontProvider=function(W,Ee){return Te(W.textStyle),Ee=y.ParagraphBuilder._MakeFromFontProvider(W,Ee),Ue(W.textStyle),Ee},y.ParagraphBuilder.MakeFromFontCollection=function(W,Ee){return Te(W.textStyle),Ee=y.ParagraphBuilder._MakeFromFontCollection(W,Ee),Ue(W.textStyle),Ee},y.ParagraphBuilder.ShapeText=function(W,Ee,wt){let Ut=0;for(const rr of Ee)Ut+=rr.length;if(Ut!==W.length)throw"Accumulated block lengths must equal text.length";return y.ParagraphBuilder._ShapeText(W,Ee,wt)},y.ParagraphBuilder.prototype.pushStyle=function(W){Te(W),this._pushStyle(W),Ue(W)},y.ParagraphBuilder.prototype.pushPaintStyle=function(W,Ee,wt){Te(W),this._pushPaintStyle(W,Ee,wt),Ue(W)},y.ParagraphBuilder.prototype.addPlaceholder=function(W,Ee,wt,Ut,rr){wt=wt||y.PlaceholderAlignment.Baseline,Ut=Ut||y.TextBaseline.Alphabetic,this._addPlaceholder(W||0,Ee||0,wt,Ut,rr||0)},y.ParagraphBuilder.prototype.setWordsUtf8=function(W){var Ee=ae(W,"HEAPU32");this._setWordsUtf8(Ee,W&&W.length||0),ve(Ee,W)},y.ParagraphBuilder.prototype.setWordsUtf16=function(W){var Ee=ae(W,"HEAPU32");this._setWordsUtf16(Ee,W&&W.length||0),ve(Ee,W)},y.ParagraphBuilder.prototype.setGraphemeBreaksUtf8=function(W){var Ee=ae(W,"HEAPU32");this._setGraphemeBreaksUtf8(Ee,W&&W.length||0),ve(Ee,W)},y.ParagraphBuilder.prototype.setGraphemeBreaksUtf16=function(W){var Ee=ae(W,"HEAPU32");this._setGraphemeBreaksUtf16(Ee,W&&W.length||0),ve(Ee,W)},y.ParagraphBuilder.prototype.setLineBreaksUtf8=function(W){var Ee=ae(W,"HEAPU32");this._setLineBreaksUtf8(Ee,W&&W.length||0),ve(Ee,W)},y.ParagraphBuilder.prototype.setLineBreaksUtf16=function(W){var Ee=ae(W,"HEAPU32");this._setLineBreaksUtf16(Ee,W&&W.length||0),ve(Ee,W)}})}(a),h.MakeManagedAnimation=function(y,g,T,k,V){if(!h._MakeManagedAnimation)throw"Not compiled with MakeManagedAnimation";if(T||(T=""),!g)return h._MakeManagedAnimation(y,0,vt,vt,vt,T,k,V);for(var se=[],Te=[],Ue=[],nt=Object.keys(g||{}),et=0;et<nt.length;et++){var bt=nt[et],_t=new Uint8Array(g[bt]),W=h._malloc(_t.byteLength);h.HEAPU8.set(_t,W),Te.push(W),Ue.push(_t.byteLength),_t=Dr(bt)+1,W=h._malloc(_t),wn(bt,ee,W,_t),se.push(W)}return g=ae(se,"HEAPU32"),Te=ae(Te,"HEAPU32"),Ue=ae(Ue,"HEAPU32"),y=h._MakeManagedAnimation(y,nt.length,g,Te,Ue,T,k,V),h._free(g),h._free(Te),h._free(Ue),y},h.wd=function(y){return y.text=y.text||"",y.textSize=y.textSize||0,y.minTextSize=y.minTextSize||0,y.maxTextSize=y.maxTextSize||Number.MAX_VALUE,y.strokeWidth=y.strokeWidth||0,y.lineHeight=y.lineHeight||0,y.lineShift=y.lineShift||0,y.ascent=y.ascent||0,y.maxLines=y.maxLines||0,y.horizAlign=y.horizAlign||h.TextAlign.Left,y.vertAlign=y.vertAlign||h.xd.Top,y.strokeJoin=y.strokeJoin||h.StrokeJoin.Miter,y.direction=y.direction||h.TextDirection.LTR,y.linebreak=y.linebreak||h.LineBreakType.HardLineBreak,y.resize=y.resize||h.vd.None,y.fillColor||(y.fillColor=h.TRANSPARENT),y.strokeColor||(y.strokeColor=h.TRANSPARENT),y.boundingBox||(y.boundingBox=[0,0,0,0]),y},function(y){y.ib=y.ib||[],y.ib.push(function(){y.Animation.prototype.render=function(g,T){gt(T,Ht),this._render(g,Ht)},y.Animation.prototype.size=function(g){this._size(Ht);var T=Br.toTypedArray();return g?(g[0]=T[0],g[1]=T[1],g):T.slice(0,2)},y.ManagedAnimation&&(y.ManagedAnimation.prototype.render=function(g,T){gt(T,Ht),this._render(g,Ht)},y.ManagedAnimation.prototype.seek=function(g,T){return this._seek(g,Ht),g=Br.toTypedArray(),T?(T.set(g),T):g.slice()},y.ManagedAnimation.prototype.seekFrame=function(g,T){return this._seekFrame(g,Ht),g=Br.toTypedArray(),T?(T.set(g),T):g.slice()},y.ManagedAnimation.prototype.setColor=function(g,T){return T=le(T),this._setColor(g,T)},y.ManagedAnimation.prototype.setColorSlot=function(g,T){return T=le(T),this._setColorSlot(g,T)},y.ManagedAnimation.prototype.getColorSlot=function(g){return this._getColorSlot(g,Gn),g=xt(Gn),g[0]==-1?null:g},y.ManagedAnimation.prototype.setVec2Slot=function(g,T){return ae(T,"HEAPF32",ps),this._setVec2Slot(g,ps)},y.ManagedAnimation.prototype.getVec2Slot=function(g){return this._getVec2Slot(g,ps),g=Ra.toTypedArray(),g[2]===-1?null:g.slice(0,2)},y.ManagedAnimation.prototype.setTextSlot=function(g,T){var k=le(T.fillColor,Gn),V=le(T.strokeColor,Ht),se=gt(T.boundingBox,Zn);return T._fillColorPtr=k,T._strokeColorPtr=V,T._boundingBoxPtr=se,this._setTextSlot(g,T)},y.ManagedAnimation.prototype.setTransform=function(g,T,k,V,se,Te,Ue){return T=ae([T[0],T[1],k[0],k[1],V[0],V[1],se,Te,Ue],"HEAPF32",Kn),this._setTransform(g,T)},y.ManagedAnimation.prototype.size=function(g){this._size(Ht);var T=Br.toTypedArray();return g?(g[0]=T[0],g[1]=T[1],g):T.slice(0,2)})})}(a),h.ib=h.ib||[],h.ib.push(function(){h.Path.prototype.op=function(y,g){return this._op(y,g)?this:null},h.Path.prototype.simplify=function(){return this._simplify()?this:null}}),h.ib=h.ib||[],h.ib.push(function(){h.Canvas.prototype.drawText=function(y,g,T,k,V){var se=Dr(y),Te=h._malloc(se+1);wn(y,ee,Te,se+1),this._drawSimpleText(Te,se,g,T,V,k),h._free(Te)},h.Canvas.prototype.drawGlyphs=function(y,g,T,k,V,se){if(!(2*y.length<=g.length))throw"Not enough positions for the array of gyphs";const Te=ae(y,"HEAPU16"),Ue=ae(g,"HEAPF32");this._drawGlyphs(y.length,Te,Ue,T,k,V,se),ve(Ue,g),ve(Te,y)},h.Font.prototype.getGlyphBounds=function(y,g,T){var k=ae(y,"HEAPU16"),V=h._malloc(16*y.length);return this._getGlyphWidthBounds(k,y.length,vt,V,g||null),g=new Float32Array(h.HEAPU8.buffer,V,4*y.length),ve(k,y),T?(T.set(g),h._free(V),T):(y=Float32Array.from(g),h._free(V),y)},h.Font.prototype.getGlyphIDs=function(y,g,T){g||(g=y.length);var k=Dr(y)+1,V=h._malloc(k);return wn(y,ee,V,k),y=h._malloc(2*g),g=this._getGlyphIDs(V,k-1,g,y),h._free(V),0>g?(h._free(y),null):(V=new Uint16Array(h.HEAPU8.buffer,y,g),T?(T.set(V),h._free(y),T):(T=Uint16Array.from(V),h._free(y),T))},h.Font.prototype.getGlyphIntercepts=function(y,g,T,k){var V=ae(y,"HEAPU16"),se=ae(g,"HEAPF32");return this._getGlyphIntercepts(V,y.length,!(y&&y._ck),se,g.length,!(g&&g._ck),T,k)},h.Font.prototype.getGlyphWidths=function(y,g,T){var k=ae(y,"HEAPU16"),V=h._malloc(4*y.length);return this._getGlyphWidthBounds(k,y.length,V,vt,g||null),g=new Float32Array(h.HEAPU8.buffer,V,y.length),ve(k,y),T?(T.set(g),h._free(V),T):(y=Float32Array.from(g),h._free(V),y)},h.FontMgr.FromData=function(){if(!arguments.length)return null;var y=arguments;if(y.length===1&&Array.isArray(y[0])&&(y=arguments[0]),!y.length)return null;for(var g=[],T=[],k=0;k<y.length;k++){var V=new Uint8Array(y[k]),se=ae(V,"HEAPU8");g.push(se),T.push(V.byteLength)}return g=ae(g,"HEAPU32"),T=ae(T,"HEAPU32"),y=h.FontMgr._fromData(g,T,y.length),h._free(g),h._free(T),y},h.Typeface.MakeFreeTypeFaceFromData=function(y){y=new Uint8Array(y);var g=ae(y,"HEAPU8");return(y=h.Typeface._MakeFreeTypeFaceFromData(g,y.byteLength))?y:null},h.Typeface.prototype.getGlyphIDs=function(y,g,T){g||(g=y.length);var k=Dr(y)+1,V=h._malloc(k);return wn(y,ee,V,k),y=h._malloc(2*g),g=this._getGlyphIDs(V,k-1,g,y),h._free(V),0>g?(h._free(y),null):(V=new Uint16Array(h.HEAPU8.buffer,y,g),T?(T.set(V),h._free(y),T):(T=Uint16Array.from(V),h._free(y),T))},h.TextBlob.MakeOnPath=function(y,g,T,k){if(y&&y.length&&g&&g.countPoints()){if(g.countPoints()===1)return this.MakeFromText(y,T);k||(k=0);var V=T.getGlyphIDs(y);V=T.getGlyphWidths(V);var se=[];g=new h.ContourMeasureIter(g,!1,1);for(var Te=g.next(),Ue=new Float32Array(4),nt=0;nt<y.length&&Te;nt++){var et=V[nt];if(k+=et/2,k>Te.length()){if(Te.delete(),Te=g.next(),!Te){y=y.substring(0,nt);break}k=et/2}Te.getPosTan(k,Ue);var bt=Ue[2],_t=Ue[3];se.push(bt,_t,Ue[0]-et/2*bt,Ue[1]-et/2*_t),k+=et/2}return y=this.MakeFromRSXform(y,se,T),Te&&Te.delete(),g.delete(),y}},h.TextBlob.MakeFromRSXform=function(y,g,T){var k=Dr(y)+1,V=h._malloc(k);return wn(y,ee,V,k),y=ae(g,"HEAPF32"),T=h.TextBlob._MakeFromRSXform(V,k-1,y,T),h._free(V),T||null},h.TextBlob.MakeFromRSXformGlyphs=function(y,g,T){var k=ae(y,"HEAPU16");return g=ae(g,"HEAPF32"),T=h.TextBlob._MakeFromRSXformGlyphs(k,2*y.length,g,T),ve(k,y),T||null},h.TextBlob.MakeFromGlyphs=function(y,g){var T=ae(y,"HEAPU16");return g=h.TextBlob._MakeFromGlyphs(T,2*y.length,g),ve(T,y),g||null},h.TextBlob.MakeFromText=function(y,g){var T=Dr(y)+1,k=h._malloc(T);return wn(y,ee,k,T),y=h.TextBlob._MakeFromText(k,T-1,g),h._free(k),y||null},h.MallocGlyphIDs=function(y){return h.Malloc(Uint16Array,y)}}),h.ib=h.ib||[],h.ib.push(function(){h.MakePicture=function(y){y=new Uint8Array(y);var g=h._malloc(y.byteLength);return h.HEAPU8.set(y,g),(y=h._MakePicture(g,y.byteLength))?y:null}}),h.ib=h.ib||[],h.ib.push(function(){h.RuntimeEffect.Make=function(y,g){return h.RuntimeEffect._Make(y,{onError:g||function(T){console.log("RuntimeEffect error",T)}})},h.RuntimeEffect.MakeForBlender=function(y,g){return h.RuntimeEffect._MakeForBlender(y,{onError:g||function(T){console.log("RuntimeEffect error",T)}})},h.RuntimeEffect.prototype.makeShader=function(y,g){var T=!y._ck,k=ae(y,"HEAPF32");return g=He(g),this._makeShader(k,4*y.length,T,g)},h.RuntimeEffect.prototype.makeShaderWithChildren=function(y,g,T){var k=!y._ck,V=ae(y,"HEAPF32");T=He(T);for(var se=[],Te=0;Te<g.length;Te++)se.push(g[Te].bb.kb);return g=ae(se,"HEAPU32"),this._makeShaderWithChildren(V,4*y.length,k,g,se.length,T)},h.RuntimeEffect.prototype.makeBlender=function(y){var g=!y._ck,T=ae(y,"HEAPF32");return this._makeBlender(T,4*y.length,g)}}),function(){function y(Ie){for(var P=0;P<Ie.length;P++)if(Ie[P]!==void 0&&!Number.isFinite(Ie[P]))return!1;return!0}function g(Ie){var P=h.getColorComponents(Ie);Ie=P[0];var $=P[1],de=P[2];return P=P[3],P===1?(Ie=Ie.toString(16).toLowerCase(),$=$.toString(16).toLowerCase(),de=de.toString(16).toLowerCase(),Ie=Ie.length===1?"0"+Ie:Ie,$=$.length===1?"0"+$:$,de=de.length===1?"0"+de:de,"#"+Ie+$+de):(P=P===0||P===1?P:P.toFixed(8),"rgba("+Ie+", "+$+", "+de+", "+P+")")}function T(Ie){return h.parseColorString(Ie,$r)}function k(Ie){if(Ie=tn.exec(Ie),!Ie)return null;var P=parseFloat(Ie[4]),$=16;switch(Ie[5]){case"em":case"rem":$=16*P;break;case"pt":$=4*P/3;break;case"px":$=P;break;case"pc":$=16*P;break;case"in":$=96*P;break;case"cm":$=96*P/2.54;break;case"mm":$=3.7795275590551185*P;break;case"q":$=.9448818897637796*P;break;case"%":$=.21333333333333335*P}return{style:Ie[1],variant:Ie[2],weight:Ie[3],sizePx:$,family:Ie[6].trim()}}function V(Ie){this.cb=Ie,this.fb=new h.Paint,this.fb.setAntiAlias(!0),this.fb.setStrokeMiter(10),this.fb.setStrokeCap(h.StrokeCap.Butt),this.fb.setStrokeJoin(h.StrokeJoin.Miter),this.ec="10px monospace",this.Eb=new h.Font(null,10),this.Eb.setSubpixel(!0),this.sb=this.xb=h.BLACK,this.Nb=0,this.Zb=h.TRANSPARENT,this.Pb=this.Ob=0,this.$b=this.zb=1,this.Yb=0,this.Mb=[],this.eb=h.BlendMode.SrcOver,this.fb.setStrokeWidth(this.$b),this.fb.setBlendMode(this.eb),this.hb=new h.Path,this.jb=h.Matrix.identity(),this.uc=[],this.Tb=[],this.Db=function(){this.hb.delete(),this.fb.delete(),this.Eb.delete(),this.Tb.forEach(function(P){P.Db()})},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.jb[0],c:this.jb[1],e:this.jb[2],b:this.jb[3],d:this.jb[4],f:this.jb[5]}},set:function(P){P.a&&this.setTransform(P.a,P.b,P.c,P.d,P.e,P.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return D(this.sb)?g(this.sb):this.sb},set:function(P){typeof P=="string"?this.sb=T(P):P.Lb&&(this.sb=P)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.ec},set:function(P){var $=k(P),de=$.family;$.typeface=xr[de]?xr[de][($.style||"normal")+"|"+($.variant||"normal")+"|"+($.weight||"normal")]||xr[de]["*"]:null,$&&(this.Eb.setSize($.sizePx),this.Eb.setTypeface($.typeface),this.ec=P)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.zb},set:function(P){!isFinite(P)||0>P||1<P||(this.zb=P)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.eb){case h.BlendMode.SrcOver:return"source-over";case h.BlendMode.DstOver:return"destination-over";case h.BlendMode.Src:return"copy";case h.BlendMode.Dst:return"destination";case h.BlendMode.Clear:return"clear";case h.BlendMode.SrcIn:return"source-in";case h.BlendMode.DstIn:return"destination-in";case h.BlendMode.SrcOut:return"source-out";case h.BlendMode.DstOut:return"destination-out";case h.BlendMode.SrcATop:return"source-atop";case h.BlendMode.DstATop:return"destination-atop";case h.BlendMode.Xor:return"xor";case h.BlendMode.Plus:return"lighter";case h.BlendMode.Multiply:return"multiply";case h.BlendMode.Screen:return"screen";case h.BlendMode.Overlay:return"overlay";case h.BlendMode.Darken:return"darken";case h.BlendMode.Lighten:return"lighten";case h.BlendMode.ColorDodge:return"color-dodge";case h.BlendMode.ColorBurn:return"color-burn";case h.BlendMode.HardLight:return"hard-light";case h.BlendMode.SoftLight:return"soft-light";case h.BlendMode.Difference:return"difference";case h.BlendMode.Exclusion:return"exclusion";case h.BlendMode.Hue:return"hue";case h.BlendMode.Saturation:return"saturation";case h.BlendMode.Color:return"color";case h.BlendMode.Luminosity:return"luminosity"}},set:function(P){switch(P){case"source-over":this.eb=h.BlendMode.SrcOver;break;case"destination-over":this.eb=h.BlendMode.DstOver;break;case"copy":this.eb=h.BlendMode.Src;break;case"destination":this.eb=h.BlendMode.Dst;break;case"clear":this.eb=h.BlendMode.Clear;break;case"source-in":this.eb=h.BlendMode.SrcIn;break;case"destination-in":this.eb=h.BlendMode.DstIn;break;case"source-out":this.eb=h.BlendMode.SrcOut;break;case"destination-out":this.eb=h.BlendMode.DstOut;break;case"source-atop":this.eb=h.BlendMode.SrcATop;break;case"destination-atop":this.eb=h.BlendMode.DstATop;break;case"xor":this.eb=h.BlendMode.Xor;break;case"lighter":this.eb=h.BlendMode.Plus;break;case"plus-lighter":this.eb=h.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.eb=h.BlendMode.Multiply;break;case"screen":this.eb=h.BlendMode.Screen;break;case"overlay":this.eb=h.BlendMode.Overlay;break;case"darken":this.eb=h.BlendMode.Darken;break;case"lighten":this.eb=h.BlendMode.Lighten;break;case"color-dodge":this.eb=h.BlendMode.ColorDodge;break;case"color-burn":this.eb=h.BlendMode.ColorBurn;break;case"hard-light":this.eb=h.BlendMode.HardLight;break;case"soft-light":this.eb=h.BlendMode.SoftLight;break;case"difference":this.eb=h.BlendMode.Difference;break;case"exclusion":this.eb=h.BlendMode.Exclusion;break;case"hue":this.eb=h.BlendMode.Hue;break;case"saturation":this.eb=h.BlendMode.Saturation;break;case"color":this.eb=h.BlendMode.Color;break;case"luminosity":this.eb=h.BlendMode.Luminosity;break;default:return}this.fb.setBlendMode(this.eb)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.fb.getStrokeCap()){case h.StrokeCap.Butt:return"butt";case h.StrokeCap.Round:return"round";case h.StrokeCap.Square:return"square"}},set:function(P){switch(P){case"butt":this.fb.setStrokeCap(h.StrokeCap.Butt);break;case"round":this.fb.setStrokeCap(h.StrokeCap.Round);break;case"square":this.fb.setStrokeCap(h.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Yb},set:function(P){isFinite(P)&&(this.Yb=P)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.fb.getStrokeJoin()){case h.StrokeJoin.Miter:return"miter";case h.StrokeJoin.Round:return"round";case h.StrokeJoin.Bevel:return"bevel"}},set:function(P){switch(P){case"miter":this.fb.setStrokeJoin(h.StrokeJoin.Miter);break;case"round":this.fb.setStrokeJoin(h.StrokeJoin.Round);break;case"bevel":this.fb.setStrokeJoin(h.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.fb.getStrokeWidth()},set:function(P){0>=P||!P||(this.$b=P,this.fb.setStrokeWidth(P))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.fb.getStrokeMiter()},set:function(P){0>=P||!P||this.fb.setStrokeMiter(P)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.Nb},set:function(P){0>P||!isFinite(P)||(this.Nb=P)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return g(this.Zb)},set:function(P){this.Zb=T(P)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.Ob},set:function(P){isFinite(P)&&(this.Ob=P)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.Pb},set:function(P){isFinite(P)&&(this.Pb=P)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return g(this.xb)},set:function(P){typeof P=="string"?this.xb=T(P):P.Lb&&(this.xb=P)}}),this.arc=function(P,$,de,Se,Pe,Re){W(this.hb,P,$,de,de,0,Se,Pe,Re)},this.arcTo=function(P,$,de,Se,Pe){et(this.hb,P,$,de,Se,Pe)},this.beginPath=function(){this.hb.delete(),this.hb=new h.Path},this.bezierCurveTo=function(P,$,de,Se,Pe,Re){var Ye=this.hb;y([P,$,de,Se,Pe,Re])&&(Ye.isEmpty()&&Ye.moveTo(P,$),Ye.cubicTo(P,$,de,Se,Pe,Re))},this.clearRect=function(P,$,de,Se){this.fb.setStyle(h.PaintStyle.Fill),this.fb.setBlendMode(h.BlendMode.Clear),this.cb.drawRect(h.XYWHRect(P,$,de,Se),this.fb),this.fb.setBlendMode(this.eb)},this.clip=function(P,$){typeof P=="string"?($=P,P=this.hb):P&&P.lc&&(P=P.lb),P||(P=this.hb),P=P.copy(),$&&$.toLowerCase()==="evenodd"?P.setFillType(h.FillType.EvenOdd):P.setFillType(h.FillType.Winding),this.cb.clipPath(P,h.ClipOp.Intersect,!0),P.delete()},this.closePath=function(){bt(this.hb)},this.createImageData=function(){if(arguments.length===1){var P=arguments[0];return new Ue(new Uint8ClampedArray(4*P.width*P.height),P.width,P.height)}if(arguments.length===2){P=arguments[0];var $=arguments[1];return new Ue(new Uint8ClampedArray(4*P*$),P,$)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(P,$,de,Se){if(y(arguments)){var Pe=new nt(P,$,de,Se);return this.Tb.push(Pe),Pe}},this.createPattern=function(P,$){return P=new Ut(P,$),this.Tb.push(P),P},this.createRadialGradient=function(P,$,de,Se,Pe,Re){if(y(arguments)){var Ye=new rr(P,$,de,Se,Pe,Re);return this.Tb.push(Ye),Ye}},this.drawImage=function(P){P instanceof Te&&(P=P.Ac());var $=this.dc();if(arguments.length===3||arguments.length===5)var de=h.XYWHRect(arguments[1],arguments[2],arguments[3]||P.width(),arguments[4]||P.height()),Se=h.XYWHRect(0,0,P.width(),P.height());else if(arguments.length===9)de=h.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),Se=h.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4]);else throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;this.cb.drawImageRect(P,Se,de,$,!1),$.dispose()},this.ellipse=function(P,$,de,Se,Pe,Re,Ye,jt){W(this.hb,P,$,de,Se,Pe,Re,Ye,jt)},this.dc=function(){var P=this.fb.copy();if(P.setStyle(h.PaintStyle.Fill),D(this.sb)){var $=h.multiplyByAlpha(this.sb,this.zb);P.setColor($)}else $=this.sb.Lb(this.jb),P.setColor(h.Color(0,0,0,this.zb)),P.setShader($);return P.dispose=function(){this.delete()},P},this.fill=function(P,$){if(typeof P=="string"?($=P,P=this.hb):P&&P.lc&&(P=P.lb),$==="evenodd")this.hb.setFillType(h.FillType.EvenOdd);else{if($!=="nonzero"&&$)throw"invalid fill rule";this.hb.setFillType(h.FillType.Winding)}P||(P=this.hb),$=this.dc();var de=this.Qb($);de&&(this.cb.save(),this.Jb(),this.cb.drawPath(P,de),this.cb.restore(),de.dispose()),this.cb.drawPath(P,$),$.dispose()},this.fillRect=function(P,$,de,Se){var Pe=this.dc(),Re=this.Qb(Pe);Re&&(this.cb.save(),this.Jb(),this.cb.drawRect(h.XYWHRect(P,$,de,Se),Re),this.cb.restore(),Re.dispose()),this.cb.drawRect(h.XYWHRect(P,$,de,Se),Pe),Pe.dispose()},this.fillText=function(P,$,de){var Se=this.dc();P=h.TextBlob.MakeFromText(P,this.Eb);var Pe=this.Qb(Se);Pe&&(this.cb.save(),this.Jb(),this.cb.drawTextBlob(P,$,de,Pe),this.cb.restore(),Pe.dispose()),this.cb.drawTextBlob(P,$,de,Se),P.delete(),Se.dispose()},this.getImageData=function(P,$,de,Se){return(P=this.cb.readPixels(P,$,{width:de,height:Se,colorType:h.ColorType.RGBA_8888,alphaType:h.AlphaType.Unpremul,colorSpace:h.ColorSpace.SRGB}))?new Ue(new Uint8ClampedArray(P.buffer),de,Se):null},this.getLineDash=function(){return this.Mb.slice()},this.vc=function(P){var $=h.Matrix.invert(this.jb);return h.Matrix.mapPoints($,P),P},this.isPointInPath=function(P,$,de){var Se=arguments;if(Se.length===3)var Pe=this.hb;else if(Se.length===4)Pe=Se[0],P=Se[1],$=Se[2],de=Se[3];else throw"invalid arg count, need 3 or 4, got "+Se.length;return!isFinite(P)||!isFinite($)||(de=de||"nonzero",de!=="nonzero"&&de!=="evenodd")?!1:(Se=this.vc([P,$]),P=Se[0],$=Se[1],Pe.setFillType(de==="nonzero"?h.FillType.Winding:h.FillType.EvenOdd),Pe.contains(P,$))},this.isPointInStroke=function(P,$){var de=arguments;if(de.length===2)var Se=this.hb;else if(de.length===3)Se=de[0],P=de[1],$=de[2];else throw"invalid arg count, need 2 or 3, got "+de.length;return!isFinite(P)||!isFinite($)?!1:(de=this.vc([P,$]),P=de[0],$=de[1],Se=Se.copy(),Se.setFillType(h.FillType.Winding),Se.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.fb.getStrokeCap(),join:this.fb.getStrokeJoin(),precision:.3}),de=Se.contains(P,$),Se.delete(),de)},this.lineTo=function(P,$){Ee(this.hb,P,$)},this.measureText=function(P){P=this.Eb.getGlyphIDs(P),P=this.Eb.getGlyphWidths(P);let $=0;for(const de of P)$+=de;return{width:$}},this.moveTo=function(P,$){var de=this.hb;y([P,$])&&de.moveTo(P,$)},this.putImageData=function(P,$,de,Se,Pe,Re,Ye){if(y([$,de,Se,Pe,Re,Ye])){if(Se===void 0)this.cb.writePixels(P.data,P.width,P.height,$,de);else if(Se=Se||0,Pe=Pe||0,Re=Re||P.width,Ye=Ye||P.height,0>Re&&(Se+=Re,Re=Math.abs(Re)),0>Ye&&(Pe+=Ye,Ye=Math.abs(Ye)),0>Se&&(Re+=Se,Se=0),0>Pe&&(Ye+=Pe,Pe=0),!(0>=Re||0>=Ye)){P=h.MakeImage({width:P.width,height:P.height,alphaType:h.AlphaType.Unpremul,colorType:h.ColorType.RGBA_8888,colorSpace:h.ColorSpace.SRGB},P.data,4*P.width);var jt=h.XYWHRect(Se,Pe,Re,Ye);$=h.XYWHRect($+Se,de+Pe,Re,Ye),de=h.Matrix.invert(this.jb),this.cb.save(),this.cb.concat(de),this.cb.drawImageRect(P,jt,$,null,!1),this.cb.restore(),P.delete()}}},this.quadraticCurveTo=function(P,$,de,Se){var Pe=this.hb;y([P,$,de,Se])&&(Pe.isEmpty()&&Pe.moveTo(P,$),Pe.quadTo(P,$,de,Se))},this.rect=function(P,$,de,Se){var Pe=this.hb;P=h.XYWHRect(P,$,de,Se),y(P)&&Pe.addRect(P)},this.resetTransform=function(){this.hb.transform(this.jb);var P=h.Matrix.invert(this.jb);this.cb.concat(P),this.jb=this.cb.getTotalMatrix()},this.restore=function(){var P=this.uc.pop();if(P){var $=h.Matrix.multiply(this.jb,h.Matrix.invert(P.Lc));this.hb.transform($),this.fb.delete(),this.fb=P.ad,this.Mb=P.Zc,this.$b=P.qd,this.xb=P.pd,this.sb=P.fs,this.Ob=P.nd,this.Pb=P.od,this.Nb=P.ed,this.Zb=P.md,this.zb=P.ga,this.eb=P.Rc,this.Yb=P.$c,this.ec=P.Qc,this.cb.restore(),this.jb=this.cb.getTotalMatrix()}},this.rotate=function(P){if(isFinite(P)){var $=h.Matrix.rotated(-P);this.hb.transform($),this.cb.rotate(P/Math.PI*180,0,0),this.jb=this.cb.getTotalMatrix()}},this.save=function(){if(this.sb.Kb){var P=this.sb.Kb();this.Tb.push(P)}else P=this.sb;if(this.xb.Kb){var $=this.xb.Kb();this.Tb.push($)}else $=this.xb;this.uc.push({Lc:this.jb.slice(),Zc:this.Mb.slice(),qd:this.$b,pd:$,fs:P,nd:this.Ob,od:this.Pb,ed:this.Nb,md:this.Zb,ga:this.zb,$c:this.Yb,Rc:this.eb,ad:this.fb.copy(),Qc:this.ec}),this.cb.save()},this.scale=function(P,$){if(y(arguments)){var de=h.Matrix.scaled(1/P,1/$);this.hb.transform(de),this.cb.scale(P,$),this.jb=this.cb.getTotalMatrix()}},this.setLineDash=function(P){for(var $=0;$<P.length;$++)if(!isFinite(P[$])||0>P[$])return;P.length%2===1&&Array.prototype.push.apply(P,P),this.Mb=P},this.setTransform=function(P,$,de,Se,Pe,Re){y(arguments)&&(this.resetTransform(),this.transform(P,$,de,Se,Pe,Re))},this.Jb=function(){var P=h.Matrix.invert(this.jb);this.cb.concat(P),this.cb.concat(h.Matrix.translated(this.Ob,this.Pb)),this.cb.concat(this.jb)},this.Qb=function(P){var $=h.multiplyByAlpha(this.Zb,this.zb);if(!h.getColorComponents($)[3]||!(this.Nb||this.Pb||this.Ob))return null;P=P.copy(),P.setColor($);var de=h.MaskFilter.MakeBlur(h.BlurStyle.Normal,this.Nb/2,!1);return P.setMaskFilter(de),P.dispose=function(){de.delete(),this.delete()},P},this.nc=function(){var P=this.fb.copy();if(P.setStyle(h.PaintStyle.Stroke),D(this.xb)){var $=h.multiplyByAlpha(this.xb,this.zb);P.setColor($)}else $=this.xb.Lb(this.jb),P.setColor(h.Color(0,0,0,this.zb)),P.setShader($);if(P.setStrokeWidth(this.$b),this.Mb.length){var de=h.PathEffect.MakeDash(this.Mb,this.Yb);P.setPathEffect(de)}return P.dispose=function(){de&&de.delete(),this.delete()},P},this.stroke=function(P){P=P?P.lb:this.hb;var $=this.nc(),de=this.Qb($);de&&(this.cb.save(),this.Jb(),this.cb.drawPath(P,de),this.cb.restore(),de.dispose()),this.cb.drawPath(P,$),$.dispose()},this.strokeRect=function(P,$,de,Se){var Pe=this.nc(),Re=this.Qb(Pe);Re&&(this.cb.save(),this.Jb(),this.cb.drawRect(h.XYWHRect(P,$,de,Se),Re),this.cb.restore(),Re.dispose()),this.cb.drawRect(h.XYWHRect(P,$,de,Se),Pe),Pe.dispose()},this.strokeText=function(P,$,de){var Se=this.nc();P=h.TextBlob.MakeFromText(P,this.Eb);var Pe=this.Qb(Se);Pe&&(this.cb.save(),this.Jb(),this.cb.drawTextBlob(P,$,de,Pe),this.cb.restore(),Pe.dispose()),this.cb.drawTextBlob(P,$,de,Se),P.delete(),Se.dispose()},this.translate=function(P,$){if(y(arguments)){var de=h.Matrix.translated(-P,-$);this.hb.transform(de),this.cb.translate(P,$),this.jb=this.cb.getTotalMatrix()}},this.transform=function(P,$,de,Se,Pe,Re){P=[P,de,Pe,$,Se,Re,0,0,1],$=h.Matrix.invert(P),this.hb.transform($),this.cb.concat(P),this.jb=this.cb.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function se(Ie){this.oc=Ie,this.Cb=new V(Ie.getCanvas()),this.fc=[],this.decodeImage=function(P){if(P=h.MakeImageFromEncoded(P),!P)throw"Invalid input";return this.fc.push(P),new Te(P)},this.loadFont=function(P,$){if(P=h.Typeface.MakeFreeTypeFaceFromData(P),!P)return null;this.fc.push(P);var de=($.style||"normal")+"|"+($.variant||"normal")+"|"+($.weight||"normal");$=$.family,xr[$]||(xr[$]={"*":P}),xr[$][de]=P},this.makePath2D=function(P){return P=new wt(P),this.fc.push(P.lb),P},this.getContext=function(P){return P==="2d"?this.Cb:null},this.toDataURL=function(P,$){this.oc.flush();var de=this.oc.makeImageSnapshot();if(de){P=P||"image/png";var Se=h.ImageFormat.PNG;if(P==="image/jpeg"&&(Se=h.ImageFormat.JPEG),$=de.encodeToBytes(Se,$||.92)){if(de.delete(),P="data:"+P+";base64,",typeof Buffer<"u")$=Buffer.from($).toString("base64");else{de=0,Se=$.length;for(var Pe="",Re;de<Se;)Re=$.slice(de,Math.min(de+32768,Se)),Pe+=String.fromCharCode.apply(null,Re),de+=32768;$=btoa(Pe)}return P+$}}},this.dispose=function(){this.Cb.Db(),this.fc.forEach(function(P){P.delete()}),this.oc.dispose()}}function Te(Ie){this.width=Ie.width(),this.height=Ie.height(),this.naturalWidth=this.width,this.naturalHeight=this.height,this.Ac=function(){return Ie}}function Ue(Ie,P,$){if(!P||$===0)throw"invalid dimensions, width and height must be non-zero";if(Ie.length%4)throw"arr must be a multiple of 4";$=$||Ie.length/(4*P),Object.defineProperty(this,"data",{value:Ie,writable:!1}),Object.defineProperty(this,"height",{value:$,writable:!1}),Object.defineProperty(this,"width",{value:P,writable:!1})}function nt(Ie,P,$,de){this.nb=null,this.ub=[],this.pb=[],this.addColorStop=function(Se,Pe){if(0>Se||1<Se||!isFinite(Se))throw"offset must be between 0 and 1 inclusively";Pe=T(Pe);var Re=this.pb.indexOf(Se);if(Re!==-1)this.ub[Re]=Pe;else{for(Re=0;Re<this.pb.length&&!(this.pb[Re]>Se);Re++);this.pb.splice(Re,0,Se),this.ub.splice(Re,0,Pe)}},this.Kb=function(){var Se=new nt(Ie,P,$,de);return Se.ub=this.ub.slice(),Se.pb=this.pb.slice(),Se},this.Db=function(){this.nb&&(this.nb.delete(),this.nb=null)},this.Lb=function(Se){var Pe=[Ie,P,$,de];h.Matrix.mapPoints(Se,Pe),Se=Pe[0];var Re=Pe[1],Ye=Pe[2];return Pe=Pe[3],this.Db(),this.nb=h.Shader.MakeLinearGradient([Se,Re],[Ye,Pe],this.ub,this.pb,h.TileMode.Clamp)}}function et(Ie,P,$,de,Se,Pe){if(y([P,$,de,Se,Pe])){if(0>Pe)throw"radii cannot be negative";Ie.isEmpty()&&Ie.moveTo(P,$),Ie.arcToTangent(P,$,de,Se,Pe)}}function bt(Ie){if(!Ie.isEmpty()){var P=Ie.getBounds();(P[3]-P[1]||P[2]-P[0])&&Ie.close()}}function _t(Ie,P,$,de,Se,Pe,Re){Re=(Re-Pe)/Math.PI*180,Pe=Pe/Math.PI*180,P=h.LTRBRect(P-de,$-Se,P+de,$+Se),1e-5>Math.abs(Math.abs(Re)-360)?($=Re/2,Ie.arcToOval(P,Pe,$,!1),Ie.arcToOval(P,Pe+$,$,!1)):Ie.arcToOval(P,Pe,Re,!1)}function W(Ie,P,$,de,Se,Pe,Re,Ye,jt){if(y([P,$,de,Se,Pe,Re,Ye])){if(0>de||0>Se)throw"radii cannot be negative";var zt=2*Math.PI,Pn=Re%zt;0>Pn&&(Pn+=zt);var ms=Pn-Re;Re=Pn,Ye+=ms,!jt&&Ye-Re>=zt?Ye=Re+zt:jt&&Re-Ye>=zt?Ye=Re-zt:!jt&&Re>Ye?Ye=Re+(zt-(Re-Ye)%zt):jt&&Re<Ye&&(Ye=Re-(zt-(Ye-Re)%zt)),Pe?(jt=h.Matrix.rotated(Pe,P,$),Pe=h.Matrix.rotated(-Pe,P,$),Ie.transform(Pe),_t(Ie,P,$,de,Se,Re,Ye),Ie.transform(jt)):_t(Ie,P,$,de,Se,Re,Ye)}}function Ee(Ie,P,$){y([P,$])&&(Ie.isEmpty()&&Ie.moveTo(P,$),Ie.lineTo(P,$))}function wt(Ie){this.lb=null,this.lb=typeof Ie=="string"?h.Path.MakeFromSVGString(Ie):Ie&&Ie.lc?Ie.lb.copy():new h.Path,this.lc=function(){return this.lb},this.addPath=function(P,$){$||($={a:1,c:0,e:0,b:0,d:1,f:0}),this.lb.addPath(P.lb,[$.a,$.c,$.e,$.b,$.d,$.f])},this.arc=function(P,$,de,Se,Pe,Re){W(this.lb,P,$,de,de,0,Se,Pe,Re)},this.arcTo=function(P,$,de,Se,Pe){et(this.lb,P,$,de,Se,Pe)},this.bezierCurveTo=function(P,$,de,Se,Pe,Re){var Ye=this.lb;y([P,$,de,Se,Pe,Re])&&(Ye.isEmpty()&&Ye.moveTo(P,$),Ye.cubicTo(P,$,de,Se,Pe,Re))},this.closePath=function(){bt(this.lb)},this.ellipse=function(P,$,de,Se,Pe,Re,Ye,jt){W(this.lb,P,$,de,Se,Pe,Re,Ye,jt)},this.lineTo=function(P,$){Ee(this.lb,P,$)},this.moveTo=function(P,$){var de=this.lb;y([P,$])&&de.moveTo(P,$)},this.quadraticCurveTo=function(P,$,de,Se){var Pe=this.lb;y([P,$,de,Se])&&(Pe.isEmpty()&&Pe.moveTo(P,$),Pe.quadTo(P,$,de,Se))},this.rect=function(P,$,de,Se){var Pe=this.lb;P=h.XYWHRect(P,$,de,Se),y(P)&&Pe.addRect(P)}}function Ut(Ie,P){switch(this.nb=null,Ie instanceof Te&&(Ie=Ie.Ac()),this.Fc=Ie,this._transform=h.Matrix.identity(),P===""&&(P="repeat"),P){case"repeat-x":this.Rb=h.TileMode.Repeat,this.Sb=h.TileMode.Decal;break;case"repeat-y":this.Rb=h.TileMode.Decal,this.Sb=h.TileMode.Repeat;break;case"repeat":this.Sb=this.Rb=h.TileMode.Repeat;break;case"no-repeat":this.Sb=this.Rb=h.TileMode.Decal;break;default:throw"invalid repetition mode "+P}this.setTransform=function($){$=[$.a,$.c,$.e,$.b,$.d,$.f,0,0,1],y($)&&(this._transform=$)},this.Kb=function(){var $=new Ut;return $.Rb=this.Rb,$.Sb=this.Sb,$},this.Db=function(){this.nb&&(this.nb.delete(),this.nb=null)},this.Lb=function(){return this.Db(),this.nb=this.Fc.makeShaderCubic(this.Rb,this.Sb,.3333333333333333,.3333333333333333,this._transform)}}function rr(Ie,P,$,de,Se,Pe){this.nb=null,this.ub=[],this.pb=[],this.addColorStop=function(Re,Ye){if(0>Re||1<Re||!isFinite(Re))throw"offset must be between 0 and 1 inclusively";Ye=T(Ye);var jt=this.pb.indexOf(Re);if(jt!==-1)this.ub[jt]=Ye;else{for(jt=0;jt<this.pb.length&&!(this.pb[jt]>Re);jt++);this.pb.splice(jt,0,Re),this.ub.splice(jt,0,Ye)}},this.Kb=function(){var Re=new rr(Ie,P,$,de,Se,Pe);return Re.ub=this.ub.slice(),Re.pb=this.pb.slice(),Re},this.Db=function(){this.nb&&(this.nb.delete(),this.nb=null)},this.Lb=function(Re){var Ye=[Ie,P,de,Se];h.Matrix.mapPoints(Re,Ye);var jt=Ye[0],zt=Ye[1],Pn=Ye[2];Ye=Ye[3];var ms=(Math.abs(Re[0])+Math.abs(Re[4]))/2;return Re=$*ms,ms*=Pe,this.Db(),this.nb=h.Shader.MakeTwoPointConicalGradient([jt,zt],Re,[Pn,Ye],ms,this.ub,this.pb,h.TileMode.Clamp)}}h._testing={};var $r={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};h._testing.parseColor=T,h._testing.colorToString=g;var tn=RegExp("(italic|oblique|normal|)\\s*(small-caps|normal|)\\s*(bold|bolder|lighter|[1-9]00|normal|)\\s*([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)"),xr={"Noto Mono":{"*":null},monospace:{"*":null}};h._testing.parseFontString=k,h.MakeCanvas=function(Ie,P){return(Ie=h.MakeSurface(Ie,P))?new se(Ie):null},h.ImageData=function(){if(arguments.length===2){var Ie=arguments[0],P=arguments[1];return new Ue(new Uint8ClampedArray(4*Ie*P),Ie,P)}if(arguments.length===3){var $=arguments[0];if($.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(Ie=arguments[1],P=arguments[2],$%4)throw"bytes must be given in a multiple of 4";if($%Ie)throw"bytes must divide evenly by width";if(P&&P!==$/(4*Ie))throw"invalid height given";return new Ue($,Ie,$/(4*Ie))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}}()}(a);var d=Object.assign({},a),p="./this.program",m=(h,w)=>{throw w},_=typeof window=="object",x=typeof importScripts=="function",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E="",I,A,R;if(S){var O=eg,L=eg;E=x?L.dirname(E)+"/":__dirname+"/",I=(h,w)=>(h=h.startsWith("file://")?new URL(h):L.normalize(h),O.readFileSync(h,w?void 0:"utf8")),R=h=>(h=I(h,!0),h.buffer||(h=new Uint8Array(h)),h),A=(h,w,C,D=!0)=>{h=h.startsWith("file://")?new URL(h):L.normalize(h),O.readFile(h,D?void 0:"utf8",(q,Q)=>{q?C(q):w(D?Q.buffer:Q)})},!a.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(h,w)=>{throw process.exitCode=h,w},a.inspect=()=>"[Emscripten Module object]"}else(_||x)&&(x?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),n&&(E=n),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",I=h=>{var w=new XMLHttpRequest;return w.open("GET",h,!1),w.send(null),w.responseText},x&&(R=h=>{var w=new XMLHttpRequest;return w.open("GET",h,!1),w.responseType="arraybuffer",w.send(null),new Uint8Array(w.response)}),A=(h,w,C)=>{var D=new XMLHttpRequest;D.open("GET",h,!0),D.responseType="arraybuffer",D.onload=()=>{D.status==200||D.status==0&&D.response?w(D.response):C()},D.onerror=C,D.send(null)});var X=a.print||console.log.bind(console),N=a.printErr||console.error.bind(console);Object.assign(a,d),d=null,a.thisProgram&&(p=a.thisProgram),a.quit&&(m=a.quit);var Z;a.wasmBinary&&(Z=a.wasmBinary);var G=a.noExitRuntime||!0;typeof WebAssembly!="object"&&Me("no native wasm support detected");var ie,re,_e=!1,oe,ee,me,ue,Ae,H,j,F;function K(){var h=ie.buffer;a.HEAP8=oe=new Int8Array(h),a.HEAP16=me=new Int16Array(h),a.HEAP32=Ae=new Int32Array(h),a.HEAPU8=ee=new Uint8Array(h),a.HEAPU16=ue=new Uint16Array(h),a.HEAPU32=H=new Uint32Array(h),a.HEAPF32=j=new Float32Array(h),a.HEAPF64=F=new Float64Array(h)}var U,B=[],z=[],te=[];function he(){var h=a.preRun.shift();B.unshift(h)}var xe=0,Ce=null;function Me(h){throw a.onAbort&&a.onAbort(h),h="Aborted("+h+")",N(h),_e=!0,h=new WebAssembly.RuntimeError(h+". Build with -sASSERTIONS for more info."),c(h),h}function ke(h){return h.startsWith("data:application/octet-stream;base64,")}var Ne;if(Ne="canvaskit.wasm",!ke(Ne)){var Oe=Ne;Ne=a.locateFile?a.locateFile(Oe,E):E+Oe}function ot(h){if(h==Ne&&Z)return new Uint8Array(Z);if(R)return R(h);throw"both async and sync fetching of the wasm failed"}function ft(h){if(!Z&&(_||x)){if(typeof fetch=="function"&&!h.startsWith("file://"))return fetch(h,{credentials:"same-origin"}).then(w=>{if(!w.ok)throw"failed to load wasm binary file at '"+h+"'";return w.arrayBuffer()}).catch(()=>ot(h));if(A)return new Promise((w,C)=>{A(h,D=>w(new Uint8Array(D)),C)})}return Promise.resolve().then(()=>ot(h))}function St(h,w,C){return ft(h).then(D=>WebAssembly.instantiate(D,w)).then(D=>D).then(C,D=>{N("failed to asynchronously prepare wasm: "+D),Me(D)})}function Dt(h,w){var C=Ne;return Z||typeof WebAssembly.instantiateStreaming!="function"||ke(C)||C.startsWith("file://")||S||typeof fetch!="function"?St(C,h,w):fetch(C,{credentials:"same-origin"}).then(D=>WebAssembly.instantiateStreaming(D,h).then(w,function(q){return N("wasm streaming compile failed: "+q),N("falling back to ArrayBuffer instantiation"),St(C,h,w)}))}function je(h){this.name="ExitStatus",this.message=`Program terminated with exit(${h})`,this.status=h}var tt=h=>{for(;0<h.length;)h.shift()(a)},at=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,tr=(h,w,C)=>{var D=w+C;for(C=w;h[C]&&!(C>=D);)++C;if(16<C-w&&h.buffer&&at)return at.decode(h.subarray(w,C));for(D="";w<C;){var q=h[w++];if(q&128){var Q=h[w++]&63;if((q&224)==192)D+=String.fromCharCode((q&31)<<6|Q);else{var be=h[w++]&63;q=(q&240)==224?(q&15)<<12|Q<<6|be:(q&7)<<18|Q<<12|be<<6|h[w++]&63,65536>q?D+=String.fromCharCode(q):(q-=65536,D+=String.fromCharCode(55296|q>>10,56320|q&1023))}}else D+=String.fromCharCode(q)}return D},Cr={};function vn(h){for(;h.length;){var w=h.pop();h.pop()(w)}}function vr(h){return this.fromWireType(Ae[h>>2])}var ur={},$t={},on={},Bn=void 0;function On(h){throw new Bn(h)}function dr(h,w,C){function D(ye){ye=C(ye),ye.length!==h.length&&On("Mismatched type converter count");for(var ve=0;ve<h.length;++ve)Xt(h[ve],ye[ve])}h.forEach(function(ye){on[ye]=w});var q=Array(w.length),Q=[],be=0;w.forEach((ye,ve)=>{$t.hasOwnProperty(ye)?q[ve]=$t[ye]:(Q.push(ye),ur.hasOwnProperty(ye)||(ur[ye]=[]),ur[ye].push(()=>{q[ve]=$t[ye],++be,be===Q.length&&D(q)}))}),Q.length===0&&D(q)}function sr(h){switch(h){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${h}`)}}var Ln=void 0;function Mt(h){for(var w="";ee[h];)w+=Ln[ee[h++]];return w}var Hr=void 0;function Et(h){throw new Hr(h)}function kr(h,w,C={}){var D=w.name;if(h||Et(`type "${D}" must have a positive integer typeid pointer`),$t.hasOwnProperty(h)){if(C.Xc)return;Et(`Cannot register type '${D}' twice`)}$t[h]=w,delete on[h],ur.hasOwnProperty(h)&&(w=ur[h],delete ur[h],w.forEach(q=>q()))}function Xt(h,w,C={}){if(!("argPackAdvance"in w))throw new TypeError("registerType registeredInstance requires argPackAdvance");kr(h,w,C)}function fe(h){Et(h.bb.mb.gb.name+" instance already deleted")}var ge=!1;function Ct(){}function kt(h){--h.count.value,h.count.value===0&&(h.rb?h.wb.Bb(h.rb):h.mb.gb.Bb(h.kb))}function Bt(h,w,C){return w===C?h:C.qb===void 0?null:(h=Bt(h,w,C.qb),h===null?null:C.Nc(h))}var mt={},hr=[];function Ar(){for(;hr.length;){var h=hr.pop();h.bb.Vb=!1,h.delete()}}var or=void 0,Fr={};function is(h,w){for(w===void 0&&Et("ptr should not be undefined");h.qb;)w=h.bc(w),h=h.qb;return Fr[w]}function an(h,w){return w.mb&&w.kb||On("makeClassHandle requires ptr and ptrType"),!!w.wb!=!!w.rb&&On("Both smartPtrType and smartPtr must be specified"),w.count={value:1},pr(Object.create(h,{bb:{value:w}}))}function pr(h){return typeof FinalizationRegistry>"u"?(pr=w=>w,h):(ge=new FinalizationRegistry(w=>{kt(w.bb)}),pr=w=>{var C=w.bb;return C.rb&&ge.register(w,{bb:C},w),w},Ct=w=>{ge.unregister(w)},pr(h))}function Qr(){}function ss(h){if(h===void 0)return"_unknown";h=h.replace(/[^a-zA-Z0-9_]/g,"$");var w=h.charCodeAt(0);return 48<=w&&57>=w?`_${h}`:h}function Nn(h,w){return h=ss(h),{[h]:function(){return w.apply(this,arguments)}}[h]}function _n(h,w,C){if(h[w].ob===void 0){var D=h[w];h[w]=function(){return h[w].ob.hasOwnProperty(arguments.length)||Et(`Function '${C}' called with an invalid number of arguments (${arguments.length}) - expects one of (${h[w].ob})!`),h[w].ob[arguments.length].apply(this,arguments)},h[w].ob=[],h[w].ob[D.Ub]=D}}function xn(h,w,C){a.hasOwnProperty(h)?((C===void 0||a[h].ob!==void 0&&a[h].ob[C]!==void 0)&&Et(`Cannot register public name '${h}' twice`),_n(a,h,h),a.hasOwnProperty(C)&&Et(`Cannot register multiple overloads of a function with the same number of arguments (${C})!`),a[h].ob[C]=w):(a[h]=w,C!==void 0&&(a[h].yd=C))}function os(h,w,C,D,q,Q,be,ye){this.name=h,this.constructor=w,this.Wb=C,this.Bb=D,this.qb=q,this.Sc=Q,this.bc=be,this.Nc=ye,this.cd=[]}function bn(h,w,C){for(;w!==C;)w.bc||Et(`Expected null or instance of ${C.name}, got an instance of ${w.name}`),h=w.bc(h),w=w.qb;return h}function vi(h,w){return w===null?(this.qc&&Et(`null is not a valid ${this.name}`),0):(w.bb||Et(`Cannot pass "${To(w)}" as a ${this.name}`),w.bb.kb||Et(`Cannot pass deleted object as a pointer of type ${this.name}`),bn(w.bb.kb,w.bb.mb.gb,this.gb))}function Oi(h,w){if(w===null){if(this.qc&&Et(`null is not a valid ${this.name}`),this.ic){var C=this.sc();return h!==null&&h.push(this.Bb,C),C}return 0}if(w.bb||Et(`Cannot pass "${To(w)}" as a ${this.name}`),w.bb.kb||Et(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.hc&&w.bb.mb.hc&&Et(`Cannot convert argument of type ${w.bb.wb?w.bb.wb.name:w.bb.mb.name} to parameter type ${this.name}`),C=bn(w.bb.kb,w.bb.mb.gb,this.gb),this.ic)switch(w.bb.rb===void 0&&Et("Passing raw pointer to smart pointer is illegal"),this.ld){case 0:w.bb.wb===this?C=w.bb.rb:Et(`Cannot convert argument of type ${w.bb.wb?w.bb.wb.name:w.bb.mb.name} to parameter type ${this.name}`);break;case 1:C=w.bb.rb;break;case 2:if(w.bb.wb===this)C=w.bb.rb;else{var D=w.clone();C=this.dd(C,It(function(){D.delete()})),h!==null&&h.push(this.Bb,C)}break;default:Et("Unsupporting sharing policy")}return C}function as(h,w){return w===null?(this.qc&&Et(`null is not a valid ${this.name}`),0):(w.bb||Et(`Cannot pass "${To(w)}" as a ${this.name}`),w.bb.kb||Et(`Cannot pass deleted object as a pointer of type ${this.name}`),w.bb.mb.hc&&Et(`Cannot convert argument of type ${w.bb.mb.name} to parameter type ${this.name}`),bn(w.bb.kb,w.bb.mb.gb,this.gb))}function jr(h,w,C,D,q,Q,be,ye,ve,ae,Ve){this.name=h,this.gb=w,this.qc=C,this.hc=D,this.ic=q,this.bd=Q,this.ld=be,this.Bc=ye,this.sc=ve,this.dd=ae,this.Bb=Ve,q||w.qb!==void 0?this.toWireType=Oi:(this.toWireType=D?vi:as,this.vb=null)}function Bs(h,w,C){a.hasOwnProperty(h)||On("Replacing nonexistant public symbol"),a[h].ob!==void 0&&C!==void 0?a[h].ob[C]=w:(a[h]=w,a[h].Ub=C)}var Os=(h,w)=>{var C=[];return function(){if(C.length=0,Object.assign(C,arguments),h.includes("j")){var D=a["dynCall_"+h];D=C&&C.length?D.apply(null,[w].concat(C)):D.call(null,w)}else D=U.get(w).apply(null,C);return D}};function Vt(h,w){h=Mt(h);var C=h.includes("j")?Os(h,w):U.get(w);return typeof C!="function"&&Et(`unknown function pointer with signature ${h}: ${w}`),C}var Ls=void 0;function Li(h){h=cs(h);var w=Mt(h);return en(h),w}function ln(h,w){function C(Q){q[Q]||$t[Q]||(on[Q]?on[Q].forEach(C):(D.push(Q),q[Q]=!0))}var D=[],q={};throw w.forEach(C),new Ls(`${h}: `+D.map(Li).join([", "]))}function Un(h,w,C,D,q){var Q=w.length;2>Q&&Et("argTypes array size mismatch! Must at least get return value and 'this' types!");var be=w[1]!==null&&C!==null,ye=!1;for(C=1;C<w.length;++C)if(w[C]!==null&&w[C].vb===void 0){ye=!0;break}var ve=w[0].name!=="void",ae=Q-2,Ve=Array(ae),He=[],ct=[];return function(){if(arguments.length!==ae&&Et(`function ${h} called with ${arguments.length} arguments, expected ${ae} args!`),ct.length=0,He.length=be?2:1,He[0]=q,be){var le=w[1].toWireType(ct,this);He[1]=le}for(var Je=0;Je<ae;++Je)Ve[Je]=w[Je+2].toWireType(ct,arguments[Je]),He.push(Ve[Je]);if(Je=D.apply(null,He),ye)vn(ct);else for(var xt=be?1:2;xt<w.length;xt++){var gt=xt===1?le:Ve[xt-2];w[xt].vb!==null&&w[xt].vb(gt)}return le=ve?w[0].fromWireType(Je):void 0,le}}function Ni(h,w){for(var C=[],D=0;D<h;D++)C.push(H[w+4*D>>2]);return C}function ls(){this.Ab=[void 0],this.zc=[]}var Jr=new ls;function va(h){h>=Jr.wc&&--Jr.get(h).Cc===0&&Jr.Oc(h)}var un=h=>(h||Et("Cannot use deleted val. handle = "+h),Jr.get(h).value),It=h=>{switch(h){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Jr.Jc({Cc:1,value:h})}};function Jh(h,w,C){switch(w){case 0:return function(D){return this.fromWireType((C?oe:ee)[D])};case 1:return function(D){return this.fromWireType((C?me:ue)[D>>1])};case 2:return function(D){return this.fromWireType((C?Ae:H)[D>>2])};default:throw new TypeError("Unknown integer type: "+h)}}function Ui(h,w){var C=$t[h];return C===void 0&&Et(w+" has unknown type "+Li(h)),C}function To(h){if(h===null)return"null";var w=typeof h;return w==="object"||w==="array"||w==="function"?h.toString():""+h}function So(h,w){switch(w){case 2:return function(C){return this.fromWireType(j[C>>2])};case 3:return function(C){return this.fromWireType(F[C>>3])};default:throw new TypeError("Unknown float type: "+h)}}function ec(h,w,C){switch(w){case 0:return C?function(D){return oe[D]}:function(D){return ee[D]};case 1:return C?function(D){return me[D>>1]}:function(D){return ue[D>>1]};case 2:return C?function(D){return Ae[D>>2]}:function(D){return H[D>>2]};default:throw new TypeError("Unknown integer type: "+h)}}var wn=(h,w,C,D)=>{if(0<D){D=C+D-1;for(var q=0;q<h.length;++q){var Q=h.charCodeAt(q);if(55296<=Q&&57343>=Q){var be=h.charCodeAt(++q);Q=65536+((Q&1023)<<10)|be&1023}if(127>=Q){if(C>=D)break;w[C++]=Q}else{if(2047>=Q){if(C+1>=D)break;w[C++]=192|Q>>6}else{if(65535>=Q){if(C+2>=D)break;w[C++]=224|Q>>12}else{if(C+3>=D)break;w[C++]=240|Q>>18,w[C++]=128|Q>>12&63}w[C++]=128|Q>>6&63}w[C++]=128|Q&63}}w[C]=0}},Dr=h=>{for(var w=0,C=0;C<h.length;++C){var D=h.charCodeAt(C);127>=D?w++:2047>=D?w+=2:55296<=D&&57343>=D?(w+=4,++C):w+=3}return w},Tn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,tc=(h,w)=>{for(var C=h>>1,D=C+w/2;!(C>=D)&&ue[C];)++C;if(C<<=1,32<C-h&&Tn)return Tn.decode(ee.subarray(h,C));for(C="",D=0;!(D>=w/2);++D){var q=me[h+2*D>>1];if(q==0)break;C+=String.fromCharCode(q)}return C},Sn=(h,w,C)=>{if(C===void 0&&(C=2147483647),2>C)return 0;C-=2;var D=w;C=C<2*h.length?C/2:h.length;for(var q=0;q<C;++q)me[w>>1]=h.charCodeAt(q),w+=2;return me[w>>1]=0,w-D},rc=h=>2*h.length,nc=(h,w)=>{for(var C=0,D="";!(C>=w/4);){var q=Ae[h+4*C>>2];if(q==0)break;++C,65536<=q?(q-=65536,D+=String.fromCharCode(55296|q>>10,56320|q&1023)):D+=String.fromCharCode(q)}return D},ic=(h,w,C)=>{if(C===void 0&&(C=2147483647),4>C)return 0;var D=w;C=D+C-4;for(var q=0;q<h.length;++q){var Q=h.charCodeAt(q);if(55296<=Q&&57343>=Q){var be=h.charCodeAt(++q);Q=65536+((Q&1023)<<10)|be&1023}if(Ae[w>>2]=Q,w+=4,w+4>C)break}return Ae[w>>2]=0,w-D},Eo=h=>{for(var w=0,C=0;C<h.length;++C){var D=h.charCodeAt(C);55296<=D&&57343>=D&&++C,w+=4}return w},Co={};function _i(h){var w=Co[h];return w===void 0?Mt(h):w}var Gi=[];function Hl(){function h(w){w.$$$embind_global$$$=w;var C=typeof $$$embind_global$$$=="object"&&w.$$$embind_global$$$==w;return C||delete w.$$$embind_global$$$,C}if(typeof globalThis=="object")return globalThis;if(typeof $$$embind_global$$$=="object"||(typeof ci=="object"&&h(ci)?$$$embind_global$$$=ci:typeof self=="object"&&h(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function sc(h){var w=Gi.length;return Gi.push(h),w}function _a(h,w){for(var C=Array(h),D=0;D<h;++D)C[D]=Ui(H[w+4*D>>2],"parameter "+D);return C}var xa=[];function ba(h){var w=Array(h+1);return function(C,D,q){w[0]=C;for(var Q=0;Q<h;++Q){var be=Ui(H[D+4*Q>>2],"parameter "+Q);w[Q+1]=be.readValueFromPointer(q),q+=be.argPackAdvance}return C=new(C.bind.apply(C,w)),It(C)}}var us={},jl=h=>{var w=Dr(h)+1,C=Cn(w);return C&&wn(h,ee,C,w),C},Ns={},Ot=()=>{if(!Ao){var h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},w;for(w in Ns)Ns[w]===void 0?delete h[w]:h[w]=Ns[w];var C=[];for(w in h)C.push(`${w}=${h[w]}`);Ao=C}return Ao},Ao,zl=[null,[],[]],hs=h=>h%4===0&&(h%100!==0||h%400===0),wa=[31,29,31,30,31,30,31,31,30,31,30,31],Ta=[31,28,31,30,31,30,31,31,30,31,30,31];function $l(h){var w=Array(Dr(h)+1);return wn(h,w,0,w.length),w}var Sa=(h,w,C,D)=>{function q(le,Je,xt){for(le=typeof le=="number"?le.toString():le||"";le.length<Je;)le=xt[0]+le;return le}function Q(le,Je){return q(le,Je,"0")}function be(le,Je){function xt(zr){return 0>zr?-1:0<zr?1:0}var gt;return(gt=xt(le.getFullYear()-Je.getFullYear()))===0&&(gt=xt(le.getMonth()-Je.getMonth()))===0&&(gt=xt(le.getDate()-Je.getDate())),gt}function ye(le){switch(le.getDay()){case 0:return new Date(le.getFullYear()-1,11,29);case 1:return le;case 2:return new Date(le.getFullYear(),0,3);case 3:return new Date(le.getFullYear(),0,2);case 4:return new Date(le.getFullYear(),0,1);case 5:return new Date(le.getFullYear()-1,11,31);case 6:return new Date(le.getFullYear()-1,11,30)}}function ve(le){var Je=le.Gb;for(le=new Date(new Date(le.Hb+1900,0,1).getTime());0<Je;){var xt=le.getMonth(),gt=(hs(le.getFullYear())?wa:Ta)[xt];if(Je>gt-le.getDate())Je-=gt-le.getDate()+1,le.setDate(1),11>xt?le.setMonth(xt+1):(le.setMonth(0),le.setFullYear(le.getFullYear()+1));else{le.setDate(le.getDate()+Je);break}}return xt=new Date(le.getFullYear()+1,0,4),Je=ye(new Date(le.getFullYear(),0,4)),xt=ye(xt),0>=be(Je,le)?0>=be(xt,le)?le.getFullYear()+1:le.getFullYear():le.getFullYear()-1}var ae=Ae[D+40>>2];D={td:Ae[D>>2],sd:Ae[D+4>>2],jc:Ae[D+8>>2],tc:Ae[D+12>>2],kc:Ae[D+16>>2],Hb:Ae[D+20>>2],yb:Ae[D+24>>2],Gb:Ae[D+28>>2],zd:Ae[D+32>>2],rd:Ae[D+36>>2],ud:ae&&ae?tr(ee,ae):""},C=C?tr(ee,C):"",ae={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ve in ae)C=C.replace(new RegExp(Ve,"g"),ae[Ve]);var He="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ct="January February March April May June July August September October November December".split(" ");ae={"%a":le=>He[le.yb].substring(0,3),"%A":le=>He[le.yb],"%b":le=>ct[le.kc].substring(0,3),"%B":le=>ct[le.kc],"%C":le=>Q((le.Hb+1900)/100|0,2),"%d":le=>Q(le.tc,2),"%e":le=>q(le.tc,2," "),"%g":le=>ve(le).toString().substring(2),"%G":le=>ve(le),"%H":le=>Q(le.jc,2),"%I":le=>(le=le.jc,le==0?le=12:12<le&&(le-=12),Q(le,2)),"%j":le=>{for(var Je=0,xt=0;xt<=le.kc-1;Je+=(hs(le.Hb+1900)?wa:Ta)[xt++]);return Q(le.tc+Je,3)},"%m":le=>Q(le.kc+1,2),"%M":le=>Q(le.sd,2),"%n":()=>`
`,"%p":le=>0<=le.jc&&12>le.jc?"AM":"PM","%S":le=>Q(le.td,2),"%t":()=>"	","%u":le=>le.yb||7,"%U":le=>Q(Math.floor((le.Gb+7-le.yb)/7),2),"%V":le=>{var Je=Math.floor((le.Gb+7-(le.yb+6)%7)/7);if(2>=(le.yb+371-le.Gb-2)%7&&Je++,Je)Je==53&&(xt=(le.yb+371-le.Gb)%7,xt==4||xt==3&&hs(le.Hb)||(Je=1));else{Je=52;var xt=(le.yb+7-le.Gb-1)%7;(xt==4||xt==5&&hs(le.Hb%400-1))&&Je++}return Q(Je,2)},"%w":le=>le.yb,"%W":le=>Q(Math.floor((le.Gb+7-(le.yb+6)%7)/7),2),"%y":le=>(le.Hb+1900).toString().substring(2),"%Y":le=>le.Hb+1900,"%z":le=>{le=le.rd;var Je=0<=le;return le=Math.abs(le)/60,(Je?"+":"-")+("0000"+(le/60*100+le%60)).slice(-4)},"%Z":le=>le.ud,"%%":()=>"%"},C=C.replace(/%%/g,"\0\0");for(Ve in ae)C.includes(Ve)&&(C=C.replace(new RegExp(Ve,"g"),ae[Ve](D)));return C=C.replace(/\0\0/g,"%"),Ve=$l(C),Ve.length>w?0:(oe.set(Ve,h),Ve.length-1)};Bn=a.InternalError=class extends Error{constructor(h){super(h),this.name="InternalError"}};for(var Us=Array(256),En=0;256>En;++En)Us[En]=String.fromCharCode(En);Ln=Us,Hr=a.BindingError=class extends Error{constructor(h){super(h),this.name="BindingError"}},Qr.prototype.isAliasOf=function(h){if(!(this instanceof Qr&&h instanceof Qr))return!1;var w=this.bb.mb.gb,C=this.bb.kb,D=h.bb.mb.gb;for(h=h.bb.kb;w.qb;)C=w.bc(C),w=w.qb;for(;D.qb;)h=D.bc(h),D=D.qb;return w===D&&C===h},Qr.prototype.clone=function(){if(this.bb.kb||fe(this),this.bb.ac)return this.bb.count.value+=1,this;var h=pr,w=Object,C=w.create,D=Object.getPrototypeOf(this),q=this.bb;return h=h(C.call(w,D,{bb:{value:{count:q.count,Vb:q.Vb,ac:q.ac,kb:q.kb,mb:q.mb,rb:q.rb,wb:q.wb}}})),h.bb.count.value+=1,h.bb.Vb=!1,h},Qr.prototype.delete=function(){this.bb.kb||fe(this),this.bb.Vb&&!this.bb.ac&&Et("Object already scheduled for deletion"),Ct(this),kt(this.bb),this.bb.ac||(this.bb.rb=void 0,this.bb.kb=void 0)},Qr.prototype.isDeleted=function(){return!this.bb.kb},Qr.prototype.deleteLater=function(){return this.bb.kb||fe(this),this.bb.Vb&&!this.bb.ac&&Et("Object already scheduled for deletion"),hr.push(this),hr.length===1&&or&&or(Ar),this.bb.Vb=!0,this},a.getInheritedInstanceCount=function(){return Object.keys(Fr).length},a.getLiveInheritedInstances=function(){var h=[],w;for(w in Fr)Fr.hasOwnProperty(w)&&h.push(Fr[w]);return h},a.flushPendingDeletes=Ar,a.setDelayFunction=function(h){or=h,hr.length&&or&&or(Ar)},jr.prototype.Tc=function(h){return this.Bc&&(h=this.Bc(h)),h},jr.prototype.xc=function(h){this.Bb&&this.Bb(h)},jr.prototype.argPackAdvance=8,jr.prototype.readValueFromPointer=vr,jr.prototype.deleteObject=function(h){h!==null&&h.delete()},jr.prototype.fromWireType=function(h){function w(){return this.ic?an(this.gb.Wb,{mb:this.bd,kb:C,wb:this,rb:h}):an(this.gb.Wb,{mb:this,kb:h})}var C=this.Tc(h);if(!C)return this.xc(h),null;var D=is(this.gb,C);if(D!==void 0)return D.bb.count.value===0?(D.bb.kb=C,D.bb.rb=h,D.clone()):(D=D.clone(),this.xc(h),D);if(D=this.gb.Sc(C),D=mt[D],!D)return w.call(this);D=this.hc?D.Kc:D.pointerType;var q=Bt(C,this.gb,D.gb);return q===null?w.call(this):this.ic?an(D.gb.Wb,{mb:D,kb:q,wb:this,rb:h}):an(D.gb.Wb,{mb:D,kb:q})},Ls=a.UnboundTypeError=function(h,w){var C=Nn(w,function(D){this.name=w,this.message=D,D=Error(D).stack,D!==void 0&&(this.stack=this.toString()+`
`+D.replace(/^Error(:[^\n]*)?\n/,""))});return C.prototype=Object.create(h.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},C}(Error,"UnboundTypeError"),Object.assign(ls.prototype,{get(h){return this.Ab[h]},has(h){return this.Ab[h]!==void 0},Jc(h){var w=this.zc.pop()||this.Ab.length;return this.Ab[w]=h,w},Oc(h){this.Ab[h]=void 0,this.zc.push(h)}}),Jr.Ab.push({value:void 0},{value:null},{value:!0},{value:!1}),Jr.wc=Jr.Ab.length,a.count_emval_handles=function(){for(var h=0,w=Jr.wc;w<Jr.Ab.length;++w)Jr.Ab[w]!==void 0&&++h;return h};var xi={Q:function(){return 0},ja:()=>{},la:function(){return 0},ga:()=>{},ha:()=>{},R:function(){},ia:()=>{},E:function(h){var w=Cr[h];delete Cr[h];var C=w.sc,D=w.Bb,q=w.yc,Q=q.map(be=>be.Wc).concat(q.map(be=>be.jd));dr([h],Q,be=>{var ye={};return q.forEach((ve,ae)=>{var Ve=be[ae],He=ve.Uc,ct=ve.Vc,le=be[ae+q.length],Je=ve.hd,xt=ve.kd;ye[ve.Pc]={read:gt=>Ve.fromWireType(He(ct,gt)),write:(gt,zr)=>{var cr=[];Je(xt,gt,le.toWireType(cr,zr)),vn(cr)}}}),[{name:w.name,fromWireType:function(ve){var ae={},Ve;for(Ve in ye)ae[Ve]=ye[Ve].read(ve);return D(ve),ae},toWireType:function(ve,ae){for(var Ve in ye)if(!(Ve in ae))throw new TypeError(`Missing field: "${Ve}"`);var He=C();for(Ve in ye)ye[Ve].write(He,ae[Ve]);return ve!==null&&ve.push(D,He),He},argPackAdvance:8,readValueFromPointer:vr,vb:D}]})},$:function(){},qa:function(h,w,C,D,q){var Q=sr(C);w=Mt(w),Xt(h,{name:w,fromWireType:function(be){return!!be},toWireType:function(be,ye){return ye?D:q},argPackAdvance:8,readValueFromPointer:function(be){if(C===1)var ye=oe;else if(C===2)ye=me;else if(C===4)ye=Ae;else throw new TypeError("Unknown boolean type size: "+w);return this.fromWireType(ye[be>>Q])},vb:null})},p:function(h,w,C,D,q,Q,be,ye,ve,ae,Ve,He,ct){Ve=Mt(Ve),Q=Vt(q,Q),ye&&(ye=Vt(be,ye)),ae&&(ae=Vt(ve,ae)),ct=Vt(He,ct);var le=ss(Ve);xn(le,function(){ln(`Cannot construct ${Ve} due to unbound types`,[D])}),dr([h,w,C],D?[D]:[],function(Je){if(Je=Je[0],D)var xt=Je.gb,gt=xt.Wb;else gt=Qr.prototype;Je=Nn(le,function(){if(Object.getPrototypeOf(this)!==zr)throw new Hr("Use 'new' to construct "+Ve);if(cr.Fb===void 0)throw new Hr(Ve+" has no accessible constructor");var $s=cr.Fb[arguments.length];if($s===void 0)throw new Hr(`Tried to invoke ctor of ${Ve} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(cr.Fb).toString()}) parameters instead!`);return $s.apply(this,arguments)});var zr=Object.create(gt,{constructor:{value:Je}});Je.prototype=zr;var cr=new os(Ve,Je,zr,ct,xt,Q,ye,ae);cr.qb&&(cr.qb.cc===void 0&&(cr.qb.cc=[]),cr.qb.cc.push(cr)),xt=new jr(Ve,cr,!0,!1,!1),gt=new jr(Ve+"*",cr,!1,!1,!1);var zs=new jr(Ve+" const*",cr,!1,!0,!1);return mt[h]={pointerType:gt,Kc:zs},Bs(le,Je),[xt,gt,zs]})},i:function(h,w,C,D,q,Q,be){var ye=Ni(C,D);w=Mt(w),Q=Vt(q,Q),dr([],[h],function(ve){function ae(){ln(`Cannot call ${Ve} due to unbound types`,ye)}ve=ve[0];var Ve=`${ve.name}.${w}`;w.startsWith("@@")&&(w=Symbol[w.substring(2)]);var He=ve.gb.constructor;return He[w]===void 0?(ae.Ub=C-1,He[w]=ae):(_n(He,w,Ve),He[w].ob[C-1]=ae),dr([],ye,function(ct){if(ct=[ct[0],null].concat(ct.slice(1)),ct=Un(Ve,ct,null,Q,be),He[w].ob===void 0?(ct.Ub=C-1,He[w]=ct):He[w].ob[C-1]=ct,ve.gb.cc)for(const le of ve.gb.cc)le.constructor.hasOwnProperty(w)||(le.constructor[w]=ct);return[]}),[]})},G:function(h,w,C,D,q,Q){var be=Ni(w,C);q=Vt(D,q),dr([],[h],function(ye){ye=ye[0];var ve=`constructor ${ye.name}`;if(ye.gb.Fb===void 0&&(ye.gb.Fb=[]),ye.gb.Fb[w-1]!==void 0)throw new Hr(`Cannot register multiple constructors with identical number of parameters (${w-1}) for class '${ye.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ye.gb.Fb[w-1]=()=>{ln(`Cannot construct ${ye.name} due to unbound types`,be)},dr([],be,function(ae){return ae.splice(1,0,null),ye.gb.Fb[w-1]=Un(ve,ae,null,q,Q),[]}),[]})},b:function(h,w,C,D,q,Q,be,ye){var ve=Ni(C,D);w=Mt(w),Q=Vt(q,Q),dr([],[h],function(ae){function Ve(){ln(`Cannot call ${He} due to unbound types`,ve)}ae=ae[0];var He=`${ae.name}.${w}`;w.startsWith("@@")&&(w=Symbol[w.substring(2)]),ye&&ae.gb.cd.push(w);var ct=ae.gb.Wb,le=ct[w];return le===void 0||le.ob===void 0&&le.className!==ae.name&&le.Ub===C-2?(Ve.Ub=C-2,Ve.className=ae.name,ct[w]=Ve):(_n(ct,w,He),ct[w].ob[C-2]=Ve),dr([],ve,function(Je){return Je=Un(He,Je,ae,Q,be),ct[w].ob===void 0?(Je.Ub=C-2,ct[w]=Je):ct[w].ob[C-2]=Je,[]}),[]})},w:function(h,w,C){h=Mt(h),dr([],[w],function(D){return D=D[0],a[h]=D.fromWireType(C),[]})},pa:function(h,w){w=Mt(w),Xt(h,{name:w,fromWireType:function(C){var D=un(C);return va(C),D},toWireType:function(C,D){return It(D)},argPackAdvance:8,readValueFromPointer:vr,vb:null})},n:function(h,w,C,D){function q(){}C=sr(C),w=Mt(w),q.values={},Xt(h,{name:w,constructor:q,fromWireType:function(Q){return this.constructor.values[Q]},toWireType:function(Q,be){return be.value},argPackAdvance:8,readValueFromPointer:Jh(w,C,D),vb:null}),xn(w,q)},d:function(h,w,C){var D=Ui(h,"enum");w=Mt(w),h=D.constructor,D=Object.create(D.constructor.prototype,{value:{value:C},constructor:{value:Nn(`${D.name}_${w}`,function(){})}}),h.values[C]=D,h[w]=D},T:function(h,w,C){C=sr(C),w=Mt(w),Xt(h,{name:w,fromWireType:function(D){return D},toWireType:function(D,q){return q},argPackAdvance:8,readValueFromPointer:So(w,C),vb:null})},H:function(h,w,C,D,q,Q){var be=Ni(w,C);h=Mt(h),q=Vt(D,q),xn(h,function(){ln(`Cannot call ${h} due to unbound types`,be)},w-1),dr([],be,function(ye){return ye=[ye[0],null].concat(ye.slice(1)),Bs(h,Un(h,ye,null,q,Q),w-1),[]})},I:function(h,w,C,D,q){w=Mt(w),q===-1&&(q=4294967295),q=sr(C);var Q=ye=>ye;if(D===0){var be=32-8*C;Q=ye=>ye<<be>>>be}C=w.includes("unsigned")?function(ye,ve){return ve>>>0}:function(ye,ve){return ve},Xt(h,{name:w,fromWireType:Q,toWireType:C,argPackAdvance:8,readValueFromPointer:ec(w,q,D!==0),vb:null})},v:function(h,w,C){function D(Q){Q>>=2;var be=H;return new q(be.buffer,be[Q+1],be[Q])}var q=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][w];C=Mt(C),Xt(h,{name:C,fromWireType:D,argPackAdvance:8,readValueFromPointer:D},{Xc:!0})},t:function(h,w,C,D,q,Q,be,ye,ve,ae,Ve,He){C=Mt(C),Q=Vt(q,Q),ye=Vt(be,ye),ae=Vt(ve,ae),He=Vt(Ve,He),dr([h],[w],function(ct){return ct=ct[0],[new jr(C,ct.gb,!1,!1,!0,ct,D,Q,ye,ae,He)]})},S:function(h,w){w=Mt(w);var C=w==="std::string";Xt(h,{name:w,fromWireType:function(D){var q=H[D>>2],Q=D+4;if(C)for(var be=Q,ye=0;ye<=q;++ye){var ve=Q+ye;if(ye==q||ee[ve]==0){if(be=be?tr(ee,be,ve-be):"",ae===void 0)var ae=be;else ae+="\0",ae+=be;be=ve+1}}else{for(ae=Array(q),ye=0;ye<q;++ye)ae[ye]=String.fromCharCode(ee[Q+ye]);ae=ae.join("")}return en(D),ae},toWireType:function(D,q){q instanceof ArrayBuffer&&(q=new Uint8Array(q));var Q=typeof q=="string";Q||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int8Array||Et("Cannot pass non-string to std::string");var be=C&&Q?Dr(q):q.length,ye=Cn(4+be+1),ve=ye+4;if(H[ye>>2]=be,C&&Q)wn(q,ee,ve,be+1);else if(Q)for(Q=0;Q<be;++Q){var ae=q.charCodeAt(Q);255<ae&&(en(ve),Et("String has UTF-16 code units that do not fit in 8 bits")),ee[ve+Q]=ae}else for(Q=0;Q<be;++Q)ee[ve+Q]=q[Q];return D!==null&&D.push(en,ye),ye},argPackAdvance:8,readValueFromPointer:vr,vb:function(D){en(D)}})},N:function(h,w,C){if(C=Mt(C),w===2)var D=tc,q=Sn,Q=rc,be=()=>ue,ye=1;else w===4&&(D=nc,q=ic,Q=Eo,be=()=>H,ye=2);Xt(h,{name:C,fromWireType:function(ve){for(var ae=H[ve>>2],Ve=be(),He,ct=ve+4,le=0;le<=ae;++le){var Je=ve+4+le*w;(le==ae||Ve[Je>>ye]==0)&&(ct=D(ct,Je-ct),He===void 0?He=ct:(He+="\0",He+=ct),ct=Je+w)}return en(ve),He},toWireType:function(ve,ae){typeof ae!="string"&&Et(`Cannot pass non-string to C++ string type ${C}`);var Ve=Q(ae),He=Cn(4+Ve+w);return H[He>>2]=Ve>>ye,q(ae,He+4,Ve+w),ve!==null&&ve.push(en,He),He},argPackAdvance:8,readValueFromPointer:vr,vb:function(ve){en(ve)}})},F:function(h,w,C,D,q,Q){Cr[h]={name:Mt(w),sc:Vt(C,D),Bb:Vt(q,Q),yc:[]}},f:function(h,w,C,D,q,Q,be,ye,ve,ae){Cr[h].yc.push({Pc:Mt(w),Wc:C,Uc:Vt(D,q),Vc:Q,jd:be,hd:Vt(ye,ve),kd:ae})},ra:function(h,w){w=Mt(w),Xt(h,{Yc:!0,name:w,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},na:()=>!0,ba:()=>{throw 1/0},B:function(h,w,C){h=un(h),w=Ui(w,"emval::as");var D=[],q=It(D);return H[C>>2]=q,w.toWireType(D,h)},L:function(h,w,C,D,q){h=Gi[h],w=un(w),C=_i(C);var Q=[];return H[D>>2]=It(Q),h(w,C,Q,q)},u:function(h,w,C,D){h=Gi[h],w=un(w),C=_i(C),h(w,C,null,D)},c:va,K:function(h){return h===0?It(Hl()):(h=_i(h),It(Hl()[h]))},r:function(h,w){var C=_a(h,w),D=C[0];w=D.name+"_$"+C.slice(1).map(function(be){return be.name}).join("_")+"$";var q=xa[w];if(q!==void 0)return q;var Q=Array(h-1);return q=sc((be,ye,ve,ae)=>{for(var Ve=0,He=0;He<h-1;++He)Q[He]=C[He+1].readValueFromPointer(ae+Ve),Ve+=C[He+1].argPackAdvance;for(be=be[ye].apply(be,Q),He=0;He<h-1;++He)C[He+1].Mc&&C[He+1].Mc(Q[He]);if(!D.Yc)return D.toWireType(ve,be)}),xa[w]=q},A:function(h,w){return h=un(h),w=un(w),It(h[w])},o:function(h){4<h&&(Jr.get(h).Cc+=1)},O:function(h,w,C,D){h=un(h);var q=us[w];return q||(q=ba(w),us[w]=q),q(h,C,D)},D:function(){return It([])},e:function(h){return It(_i(h))},y:function(){return It({})},ya:function(h){return h=un(h),!h},z:function(h){var w=un(h);vn(w),va(h)},g:function(h,w,C){h=un(h),w=un(w),C=un(C),h[w]=C},h:function(h,w){return h=Ui(h,"_emval_take_value"),h=h.readValueFromPointer(w),It(h)},Z:function(h,w,C){h=new Date(1e3*(w+2097152>>>0<4194305-!!h?(h>>>0)+4294967296*w:NaN)),Ae[C>>2]=h.getUTCSeconds(),Ae[C+4>>2]=h.getUTCMinutes(),Ae[C+8>>2]=h.getUTCHours(),Ae[C+12>>2]=h.getUTCDate(),Ae[C+16>>2]=h.getUTCMonth(),Ae[C+20>>2]=h.getUTCFullYear()-1900,Ae[C+24>>2]=h.getUTCDay(),Ae[C+28>>2]=(h.getTime()-Date.UTC(h.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(){return-52},Y:function(){},da:(h,w,C)=>{function D(ve){return(ve=ve.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ve[1]:"GMT"}var q=new Date().getFullYear(),Q=new Date(q,0,1),be=new Date(q,6,1);q=Q.getTimezoneOffset();var ye=be.getTimezoneOffset();H[h>>2]=60*Math.max(q,ye),Ae[w>>2]=+(q!=ye),h=D(Q),w=D(be),h=jl(h),w=jl(w),ye<q?(H[C>>2]=h,H[C+4>>2]=w):(H[C>>2]=w,H[C+4>>2]=h)},a:()=>{Me("")},oa:function(){return Date.now()},ma:()=>performance.now(),ca:h=>{var w=ee.length;if(h>>>=0,2147483648<h)return!1;for(var C=1;4>=C;C*=2){var D=w*(1+.2/C);D=Math.min(D,h+100663296);var q=Math;D=Math.max(h,D);e:{q=q.min.call(q,2147483648,D+(65536-D%65536)%65536)-ie.buffer.byteLength+65535>>>16;try{ie.grow(q),K();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},ea:(h,w)=>{var C=0;return Ot().forEach(function(D,q){var Q=w+C;for(q=H[h+4*q>>2]=Q,Q=0;Q<D.length;++Q)oe[q++>>0]=D.charCodeAt(Q);oe[q>>0]=0,C+=D.length+1}),0},fa:(h,w)=>{var C=Ot();H[h>>2]=C.length;var D=0;return C.forEach(function(q){D+=q.length+1}),H[w>>2]=D,0},sa:h=>{G||(a.onExit&&a.onExit(h),_e=!0),m(h,new je(h))},M:()=>52,W:function(){return 52},ka:()=>52,_:function(){return 70},P:(h,w,C,D)=>{for(var q=0,Q=0;Q<C;Q++){var be=H[w>>2],ye=H[w+4>>2];w+=8;for(var ve=0;ve<ye;ve++){var ae=ee[be+ve],Ve=zl[h];ae===0||ae===10?((h===1?X:N)(tr(Ve,0)),Ve.length=0):Ve.push(ae)}q+=ye}return H[D>>2]=q,0},j:Wl,l:Gs,k:Po,C:Vl,ua:Ea,V:Io,U:Xl,J:fs,m:ac,x:js,q:Hs,xa:Ro,s:oc,ta:Ca,va:uc,wa:lc,aa:(h,w,C,D)=>Sa(h,w,C,D)};(function(){function h(C){if(re=C=C.exports,ie=re.za,K(),U=re.Ca,z.unshift(re.Aa),xe--,a.monitorRunDependencies&&a.monitorRunDependencies(xe),xe==0&&Ce){var D=Ce;Ce=null,D()}return C}var w={a:xi};if(xe++,a.monitorRunDependencies&&a.monitorRunDependencies(xe),a.instantiateWasm)try{return a.instantiateWasm(w,h)}catch(C){N("Module.instantiateWasm callback failed with error: "+C),c(C)}return Dt(w,function(C){h(C.instance)}).catch(c),{}})();var Cn=a._malloc=h=>(Cn=a._malloc=re.Ba)(h),en=a._free=h=>(en=a._free=re.Da)(h),cs=h=>(cs=re.Ea)(h);a.__embind_initialize_bindings=()=>(a.__embind_initialize_bindings=re.Fa)();var qt=(h,w)=>(qt=re.Ga)(h,w),_r=()=>(_r=re.Ha)(),mr=h=>(mr=re.Ia)(h);a.dynCall_viji=(h,w,C,D,q)=>(a.dynCall_viji=re.Ja)(h,w,C,D,q),a.dynCall_vijiii=(h,w,C,D,q,Q,be)=>(a.dynCall_vijiii=re.Ka)(h,w,C,D,q,Q,be),a.dynCall_viiiiij=(h,w,C,D,q,Q,be,ye)=>(a.dynCall_viiiiij=re.La)(h,w,C,D,q,Q,be,ye),a.dynCall_jiiiijiiiii=(h,w,C,D,q,Q,be,ye,ve,ae,Ve,He)=>(a.dynCall_jiiiijiiiii=re.Ma)(h,w,C,D,q,Q,be,ye,ve,ae,Ve,He),a.dynCall_viiij=(h,w,C,D,q,Q)=>(a.dynCall_viiij=re.Na)(h,w,C,D,q,Q),a.dynCall_jiiiii=(h,w,C,D,q,Q)=>(a.dynCall_jiiiii=re.Oa)(h,w,C,D,q,Q),a.dynCall_jiiiiii=(h,w,C,D,q,Q,be)=>(a.dynCall_jiiiiii=re.Pa)(h,w,C,D,q,Q,be),a.dynCall_jiiiiji=(h,w,C,D,q,Q,be,ye)=>(a.dynCall_jiiiiji=re.Qa)(h,w,C,D,q,Q,be,ye),a.dynCall_ji=(h,w)=>(a.dynCall_ji=re.Ra)(h,w),a.dynCall_iijj=(h,w,C,D,q,Q)=>(a.dynCall_iijj=re.Sa)(h,w,C,D,q,Q),a.dynCall_iiiji=(h,w,C,D,q,Q)=>(a.dynCall_iiiji=re.Ta)(h,w,C,D,q,Q),a.dynCall_iiji=(h,w,C,D,q)=>(a.dynCall_iiji=re.Ua)(h,w,C,D,q),a.dynCall_iijjiii=(h,w,C,D,q,Q,be,ye,ve)=>(a.dynCall_iijjiii=re.Va)(h,w,C,D,q,Q,be,ye,ve),a.dynCall_iij=(h,w,C,D)=>(a.dynCall_iij=re.Wa)(h,w,C,D),a.dynCall_vijjjii=(h,w,C,D,q,Q,be,ye,ve,ae)=>(a.dynCall_vijjjii=re.Xa)(h,w,C,D,q,Q,be,ye,ve,ae),a.dynCall_jiji=(h,w,C,D,q)=>(a.dynCall_jiji=re.Ya)(h,w,C,D,q),a.dynCall_viijii=(h,w,C,D,q,Q,be)=>(a.dynCall_viijii=re.Za)(h,w,C,D,q,Q,be),a.dynCall_iiiiij=(h,w,C,D,q,Q,be)=>(a.dynCall_iiiiij=re._a)(h,w,C,D,q,Q,be),a.dynCall_iiiiijj=(h,w,C,D,q,Q,be,ye,ve)=>(a.dynCall_iiiiijj=re.$a)(h,w,C,D,q,Q,be,ye,ve),a.dynCall_iiiiiijj=(h,w,C,D,q,Q,be,ye,ve,ae)=>(a.dynCall_iiiiiijj=re.ab)(h,w,C,D,q,Q,be,ye,ve,ae);function Gs(h,w,C){var D=_r();try{return U.get(h)(w,C)}catch(q){if(mr(D),q!==q+0)throw q;qt(1,0)}}function oc(h,w,C,D,q){var Q=_r();try{U.get(h)(w,C,D,q)}catch(be){if(mr(Q),be!==be+0)throw be;qt(1,0)}}function Vl(h,w,C,D,q){var Q=_r();try{return U.get(h)(w,C,D,q)}catch(be){if(mr(Q),be!==be+0)throw be;qt(1,0)}}function Po(h,w,C,D){var q=_r();try{return U.get(h)(w,C,D)}catch(Q){if(mr(q),Q!==Q+0)throw Q;qt(1,0)}}function Wl(h,w){var C=_r();try{return U.get(h)(w)}catch(D){if(mr(C),D!==D+0)throw D;qt(1,0)}}function ac(h,w){var C=_r();try{U.get(h)(w)}catch(D){if(mr(C),D!==D+0)throw D;qt(1,0)}}function Hs(h,w,C,D){var q=_r();try{U.get(h)(w,C,D)}catch(Q){if(mr(q),Q!==Q+0)throw Q;qt(1,0)}}function js(h,w,C){var D=_r();try{U.get(h)(w,C)}catch(q){if(mr(D),q!==q+0)throw q;qt(1,0)}}function fs(h){var w=_r();try{U.get(h)()}catch(C){if(mr(w),C!==C+0)throw C;qt(1,0)}}function Ro(h,w,C,D,q){var Q=_r();try{U.get(h)(w,C,D,q)}catch(be){if(mr(Q),be!==be+0)throw be;qt(1,0)}}function lc(h,w,C,D,q,Q,be,ye,ve,ae){var Ve=_r();try{U.get(h)(w,C,D,q,Q,be,ye,ve,ae)}catch(He){if(mr(Ve),He!==He+0)throw He;qt(1,0)}}function uc(h,w,C,D,q,Q,be){var ye=_r();try{U.get(h)(w,C,D,q,Q,be)}catch(ve){if(mr(ye),ve!==ve+0)throw ve;qt(1,0)}}function Ea(h,w,C,D,q,Q){var be=_r();try{return U.get(h)(w,C,D,q,Q)}catch(ye){if(mr(be),ye!==ye+0)throw ye;qt(1,0)}}function Io(h,w,C,D,q,Q,be){var ye=_r();try{return U.get(h)(w,C,D,q,Q,be)}catch(ve){if(mr(ye),ve!==ve+0)throw ve;qt(1,0)}}function Ca(h,w,C,D,q,Q){var be=_r();try{U.get(h)(w,C,D,q,Q)}catch(ye){if(mr(be),ye!==ye+0)throw ye;qt(1,0)}}function Xl(h,w,C,D,q,Q,be,ye,ve,ae){var Ve=_r();try{return U.get(h)(w,C,D,q,Q,be,ye,ve,ae)}catch(He){if(mr(Ve),He!==He+0)throw He;qt(1,0)}}var An;Ce=function h(){An||Mo(),An||(Ce=h)};function Mo(){function h(){if(!An&&(An=!0,a.calledRun=!0,!_e)){if(tt(z),u(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;){var w=a.postRun.shift();te.unshift(w)}tt(te)}}if(!(0<xe)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)he();tt(B),0<xe||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),h()},1)):h())}}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return Mo(),s.ready}})();t.exports=r}(zm)),zm.exports}var vI=yI();const _I=Il(vI);class ny{constructor(e,r,n,s){el(this,"stage",new Zh(Zw(),[]));this.options=e,this.am=r,this.ck=n,this.surface=s}static makeCPUCanvas(e,r,n){const s=n.MakeSWCanvasSurface(e.canvas);return Ds(s,"Cannot initiate surface"),new ny(e,r,n,s)}prescale(e){for(const r of e)r.transform=G2(this.options.resolution,this.options.resolution,r.transform)}render(){this.surface.drawOnce(e=>{const r=this.stage.clone(),n=vo.fromHex(this.options.background);e.clear(this.ck.Color4f(n.r/255,n.g/255,n.b/255,1)),this.prescale(r),new ST(e,this.am,this.ck).render(r)})}}class xI{constructor(e,r,n){el(this,"stage",new Zh(Zw(),[]));el(this,"document");this.options=e,this.am=r,this.ck=n;const s=this.ck.MakeSinglePagePDF({},e.size);Ds(s,"Cannot create software PDF document"),this.document=s}renderStageIntoCanvas(e){const r=this.stage.clone(),n=vo.fromHex(this.options.background);e.clear(this.ck.Color4f(n.r/255,n.g/255,n.b/255,1)),new ST(e,this.am,this.ck).render(r)}render(){const e=this.document.getCanvas();Ds(e,"Cannot acces PDF document canvas."),this.renderStageIntoCanvas(e)}export(e){new wT(this.document.export()).download(e,"pdf")}}var $m,eb;function bI(){if(eb)return $m;eb=1;var t=Math.floor,e=Math.random;function r(n,s){return n+t(e()*(s-n+1))}return $m=r,$m}var Vm,tb;function ET(){if(tb)return Vm;tb=1;var t=bI();function e(r,n){var s=-1,a=r.length,u=a-1;for(n=n===void 0?a:n;++s<n;){var c=t(s,u),d=r[c];r[c]=r[s],r[s]=d}return r.length=n,r}return Vm=e,Vm}var Wm,rb;function wI(){if(rb)return Wm;rb=1;var t=uT(),e=ET();function r(n){return e(t(n))}return Wm=r,Wm}var Xm,nb;function TI(){if(nb)return Xm;nb=1;function t(e,r){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=r(e[n],n,e);return a}return Xm=t,Xm}var qm,ib;function SI(){if(ib)return qm;ib=1;var t=TI();function e(r,n){return t(n,function(s){return r[s]})}return qm=e,qm}var Ym,sb;function EI(){if(sb)return Ym;sb=1;var t=SI(),e=Kh();function r(n){return n==null?[]:t(n,e(n))}return Ym=r,Ym}var Km,ob;function CI(){if(ob)return Km;ob=1;var t=ET(),e=EI();function r(n){return t(e(n))}return Km=r,Km}var Zm,ab;function AI(){if(ab)return Zm;ab=1;var t=wI(),e=CI(),r=Yh();function n(s){var a=r(s)?t:e;return a(s)}return Zm=n,Zm}var PI=AI();const RI=Il(PI),II=RI(["/img1.jpg","/img2.jpeg","/img3.jpeg","/img4.png"]),Gt=t=>t*Math.random(),Ig=t=>{t.setTransform(t.position.x,t.position.y,Gt(1.2),Gt(1.2),Gt(360),Gt(1.2),Gt(1.2),Gt(250),Gt(250))},lb=t=>{const e=II.pop(),r=new Fi(t.get(e));return Ig(r),r},MI=t=>{const e=new lr,r=new lr,n=new lr,s=new yn,a=new yn,u=new yn,c=new yn,d=new yn,p=new yn;return s.beginFill("#ff0000").drawEllipse(Gt(512),Gt(512),Gt(100),Gt(100)).endFill(),a.beginFill("#0000ff").drawRect(Gt(512),Gt(512),Gt(100),Gt(100)).endFill(),u.lineStyle(100,"#f0ffff",1).moveTo(Gt(512),Gt(512)).lineTo(Gt(512),Gt(512)),c.lineStyle(30,"#f0ff00",1).moveTo(Gt(512),Gt(512)).lineTo(Gt(512),Gt(512)),d.beginFill("#ff0000").drawCircle(Gt(512),Gt(512),Gt(100)).endFill(),p.beginFill("#ff0000").drawRoundedRect(Gt(512),Gt(512),Gt(100),Gt(100),Gt(20)).endFill(),n.addChild(d,p,lb(t)),r.addChild(n),r.addChild(u,c),e.addChild(r,s,a,lb(t)),e.position.set(250,250),Ig(r),Ig(n),e},CT=new Promise(async t=>{fo.setPreferences({preferWorkers:!0,preferCreateImageBitmap:!0});const e=["/img1.jpg","/img2.jpeg","/img3.jpeg","/img4.png"],r=await _I({locateFile:s=>`/${s}`}),[n]=await Promise.all([new gI(r).load(e),fo.load(e)]);t({ck:r,skiaAssets:n})}),kI=(t,e,r)=>{ch.useEffect(()=>{CT.then(({ck:n,skiaAssets:s})=>{lI(e.current);const a=ny.makeCPUCanvas({background:"#f11fff",resolution:window.devicePixelRatio,size:{width:512,height:512},canvas:e.current},s,n),u=new jg({forceCanvas:!0,view:t.current,clearBeforeRender:!0,background:"#f11fff",resolution:window.devicePixelRatio,width:512,height:512});u.stage=r,u.stage.addChild(MI(fo)),setTimeout(()=>{const c=u.stage.toSceneObjectRecursive();a.stage.addChild(c),a.render()},100)})},[])};function FI(){const t=ch.useRef(new lr),e=ch.useRef(null),r=ch.useRef(null);return kI(r,e,t.current),Xn.jsxs("div",{className:"app",children:[Xn.jsxs("div",{className:"canvases",children:[Xn.jsxs("div",{className:"canvas-wrapper",children:[Xn.jsx("h2",{children:"pixi"}),Xn.jsx("canvas",{width:512,height:512,ref:r})]}),Xn.jsxs("div",{className:"canvas-wrapper",children:[Xn.jsx("h2",{children:"skia"}),Xn.jsx("canvas",{width:512,height:512,ref:e})]})]}),Xn.jsxs("div",{className:"controls",children:[Xn.jsx("button",{onClick:async()=>{const{skiaAssets:n,ck:s}=await CT,a=new xI({size:{height:512,width:512},background:"#f11fff"},n,s);a.stage.addChild(t.current.toSceneObjectRecursive()),a.render(),a.export("ahahddhhahh.pdf")},children:"В PDF"}),Xn.jsx("button",{onClick:()=>{document.location.reload()},children:"Перезагрузить"})]})]})}MS.createRoot(document.getElementById("root")).render(Xn.jsx(FI,{}));
